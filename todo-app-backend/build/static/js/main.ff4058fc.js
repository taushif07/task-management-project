/*! For license information please see main.ff4058fc.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function B(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case S:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){$(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ee=null;function Se(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Ie(e){xe?Ee?Ee.push(e):Ee=[e]:xe=e}function Te(){if(xe){var e=xe,t=Ee;if(Ee=xe=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==xe||null!==Ee)&&(Ne(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){De=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,je=!1,Ue=null,Ve={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(a(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Je=i.unstable_requestPaint,$e=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,Et,St,It=!1,Tt=[],Ct=null,Nt=null,At=null,Rt=new Map,Pt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Vt(){It=!1,null!==Ct&&jt(Ct)&&(Ct=null),null!==Nt&&jt(Nt)&&(Nt=null),null!==At&&jt(At)&&(At=null),Rt.forEach(Ut),Pt.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Nt&&Bt(Nt,e),null!==At&&Bt(At,e),Rt.forEach(t),Pt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Gt(e,t,n,r){if(Kt){var i=Yt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Sn(){return En}var In=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(In),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(Rn),Dn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ie(r),0<(t=Wr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Gn=null;function Qn(e){jr(e,0)}function Yn(e){if(G(bi(e)))return e}function Jn(e,t){if("change"===e)return t}var $n=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;$n=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Gn=Wn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Hn(t,Gn,e,we(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Er={};function Sr(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return xr[e]=n[t];return e}l&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Ir=Sr("animationend"),Tr=Sr("animationiteration"),Cr=Sr("animationstart"),Nr=Sr("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ar.set(e,t),s(t,[e])}for(var Dr=0;Dr<Rr.length;Dr++){var Or=Rr[Dr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(Ir,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,je||(je=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Jt(t)){case 1:var i=Ht;break;case 4:i=Wt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Re((function(){var r=a,i=we(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Ir:case Tr:case Cr:s=yn;break;case Nr:s=An;break;case"scroll":s=hn;break;case"wheel":s=Pn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Pe(p,h))&&l.push(Hr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Gr(d))p++;for(d=0,v=h;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)h=Gr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Gr(l),h=Gr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Jn;else if(Kn(u))if($n)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Hn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?bi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Xt="value"in($t=i)?$t.value:$t.textContent,zn=!0)),0<(y=Wr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Xt=$t=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}jr(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Hr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Hr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Pe(n,a))&&o.unshift(Hr(n,s,u)):i||null!=(s=Pe(n,a))&&o.push(Hr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Jr,"")}function Xr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Ei(e){return{current:e}}function Si(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Ii(e,t){xi++,_i[xi]=e.current,e.current=t}var Ti={},Ci=Ei(Ti),Ni=Ei(!1),Ai=Ti;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Si(Ni),Si(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Ii(Ci,t),Ii(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Ii(Ci,e),Ii(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Si(Ni),Si(Ci),Ii(Ci,e)):Si(Ni),Ii(Ni,n)}var ji=null,Ui=!1,Vi=!1;function Bi(e){null===ji?ji=[e]:ji.push(e)}function zi(){if(!Vi&&null!==ji){Vi=!0;var e=0,t=kt;try{var n=ji;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),Ge(Ze,zi),i}finally{kt=t,Vi=!1}}return null}var qi=[],Ki=0,Hi=null,Wi=0,Gi=[],Qi=0,Yi=null,Ji=1,$i="";function Xi(e,t){qi[Ki++]=Wi,qi[Ki++]=Hi,Hi=e,Wi=t}function Zi(e,t,n){Gi[Qi++]=Ji,Gi[Qi++]=$i,Gi[Qi++]=Yi,Yi=e;var r=Ji;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ji=1<<32-ot(t)+i|n<<i|r,$i=a+e}else Ji=1<<a|n<<i|r,$i=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Hi;)Hi=qi[--Ki],qi[Ki]=null,Wi=qi[--Ki],qi[Ki]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,$i=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ji,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ei(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function _a(e){var t=ya.current;Si(ya),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ia=null;function Ta(e){null===Ia?Ia=[e]:Ia.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Da(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ns)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Aa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=f}}function ja(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ba={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Da(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Da(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Da(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Pi(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Ha(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Pi(t)?Ai:Ci.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ba.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Wa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Wa(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Wa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Wa(e,null,t),n.return=e,n;case _:return(t=Uc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),ia&&Xi(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Xi(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),ia&&Xi(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Xi(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Wa(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Wa(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case P:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=jc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ja=Ya(!0),$a=Ya(!1),Xa={},Za=Ei(Xa),eo=Ei(Xa),to=Ei(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Ii(to,t),Ii(eo,e),Ii(Za,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ii(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ii(eo,e),Ii(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var uo=Ei(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,bo=0,wo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function So(){var e=0!==bo;return bo=0,e}function Io(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Fs|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Po(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Uo(9,Oo.bind(null,n,r,i,t),void 0,null),null===As)throw Error(a(349));0!==(30&po)||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&rc(t,e,1,-1)}function jo(e){var t=Io();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function Bo(e,t,n,r){var i=Io();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Ko(e,t){return zo(2048,8,e,t)}function Ho(e,t){return zo(4,2,e,t)}function Wo(e,t){return zo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Go.bind(null,t,e),n)}function Yo(){}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Fs|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Sa,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},uu={readContext:Sa,useCallback:function(e,t){return Io().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=Io();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Io();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Io().memoizedState=e},useState:jo,useDebugValue:Yo,useDeferredValue:function(e){return Io().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=Zo.bind(null,e[1]),Io().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Io();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===As)throw Error(a(349));0!==(30&po)||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Io(),t=As.identifierPrefix;if(ia){var n=$i;t=":"+t+"R"+(n=(Ji&~(1<<32-ot(Ji)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Sa,useCallback:Jo,useContext:Sa,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Wo,useMemo:$o,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Xo(To(),mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Sa,useCallback:Jo,useContext:Sa,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Wo,useMemo:$o,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Xo(t,mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Da(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hs||(Hs=!0,Ws=r),hu(0,t)},n}function vu(e,t,n){(n=Da(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Gs?Gs=new Set([this]):Gs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Da(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?$a(t,null,n,r):Ja(t,e.child,n,r)}function _u(e,t,n,r,i){n=n.render;var a=t.ref;return Ea(t,i),r=Eo(e,t,n,r,a,i),n=So(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hu(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Dc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Eu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Hu(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Eu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Hu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Tu(e,t,n,r,i)}function Su(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Os,Ds),Ds|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ii(Os,Ds),Ds|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ii(Os,Ds),Ds|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ii(Os,Ds),Ds|=r;return wu(e,t,i,n),t.child}function Iu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Pi(n)?Ai:Ci.current;return a=Ri(t,a),Ea(t,i),n=Eo(e,t,n,r,a,i),r=So(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hu(e,t,i))}function Cu(e,t,n,r,i){if(Pi(n)){var a=!0;Mi(t)}else a=!1;if(Ea(t,i),null===t.stateNode)Ku(e,t),qa(t,n,r),Ha(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Sa(c):c=Ri(t,c=Pi(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Aa?("function"===typeof l&&(Va(t,n,l,r),s=t.memoizedState),(u=Aa||za(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Sa(s):s=Ri(t,s=Pi(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Aa=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||Aa?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Aa||za(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Iu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Hu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ja(t,e.child,null,a),t.child=Ja(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Au(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Ru(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Pu,Du,Ou,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function ju(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ii(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Mu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Vu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ja(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return Vu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Vu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=As)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),rc(r,e,i,-1))}return mc(),Vu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Qi++]=Ji,Gi[Qi++]=$i,Gi[Qi++]=Yi,Ji=e.id,$i=e.overflow,Yi=t),t=Uu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Oc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Oc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){return null!==r&&pa(r),Ja(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function zu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bu(e,n,t);else if(19===e.tag)Bu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ii(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zu(t,!0,n,null,a);break;case"together":zu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ku(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gu(t),null;case 1:case 17:return Pi(t.type)&&Di(),Gu(t),null;case 3:return r=t.stateNode,io(),Si(Ni),Si(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Du(e,t),Gu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ou(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Gu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":J(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Ur("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Pu(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":J(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Gu(t),null;case 13:if(Si(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):mc())),null!==t.updateQueue&&(t.flags|=4),Gu(t),null);case 4:return io(),Du(e,t),null===e&&zr(t.stateNode.containerInfo),Gu(t),null;case 10:return _a(t.type._context),Gu(t),null;case 19:if(Si(uo),null===(o=t.memoizedState))return Gu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Wu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Wu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ii(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>qs&&(t.flags|=128,r=!0,Wu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Gu(t),null}else 2*$e()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Wu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=uo.current,Ii(uo,r?1&n|2:1&n),t):(Gu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ds)&&(Gu(t),6&t.subtreeFlags&&(t.flags|=8192)):Gu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yu(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ni),Si(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(uo),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Pu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Du=function(){},Ou=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ju=!1,$u=!1,Xu="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:$u||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!$u&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!$u&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Sc(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?($u=(r=$u)||null!==n.memoizedState,ds(e,t,n),$u=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xu),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ms(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));ps(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Sc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ms(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(m){Sc(e,e.return,m)}try{rs(5,e,e.return)}catch(m){Sc(e,e.return,m)}}break;case 1:ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Sc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&$(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Sc(e,e.return,m)}}break;case 6:if(ms(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Sc(e,e.return,m)}}break;case 3:if(ms(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Sc(e,e.return,m)}break;case 4:default:ms(t,e),gs(e);break;case 13:ms(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zs=$e())),4&r&&vs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?($u=(l=$u)||f,ms(t,e),$u=l):ms(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Sc(r,n,m)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){_s(h);continue}}null!==p?(p.return=d,Zu=p):_s(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){Sc(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Sc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ms(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Sc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Zu=e,bs(e,t,n)}function bs(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ju;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||$u;u=Ju;var c=$u;if(Ju=o,($u=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Zu=s):xs(i);for(;null!==a;)Zu=a,bs(a,t,n),a=a.sibling;Zu=i,Ju=u,$u=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):ws(e)}}function ws(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$u||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$u)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ja(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ja(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}$u||512&t.flags&&as(t)}catch(d){Sc(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function _s(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Sc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Sc(t,i,s)}}var a=t.return;try{as(t)}catch(s){Sc(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Sc(t,o,s)}}}catch(s){Sc(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Es,Ss=Math.ceil,Is=b.ReactCurrentDispatcher,Ts=b.ReactCurrentOwner,Cs=b.ReactCurrentBatchConfig,Ns=0,As=null,Rs=null,Ps=0,Ds=0,Os=Ei(0),Ls=0,Ms=null,Fs=0,js=0,Us=0,Vs=null,Bs=null,zs=0,qs=1/0,Ks=null,Hs=!1,Ws=null,Gs=null,Qs=!1,Ys=null,Js=0,$s=0,Xs=null,Zs=-1,ec=0;function tc(){return 0!==(6&Ns)?$e():-1!==Zs?Zs:Zs=$e()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Ns)&&0!==Ps?Ps&-Ps:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function rc(e,t,n,r){if(50<$s)throw $s=0,Xs=null,Error(a(185));yt(e,n,r),0!==(2&Ns)&&e===As||(e===As&&(0===(2&Ns)&&(js|=n),4===Ls&&sc(e,Ps)),ic(e,r),1===n&&0===Ns&&0===(1&t.mode)&&(qs=$e()+500,Ui&&zi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===As?Ps:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,Bi(e)}(cc.bind(null,e)):Bi(cc.bind(null,e)),oi((function(){0===(6&Ns)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&Ns))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===As?Ps:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Ns;Ns|=2;var o=vc();for(As===e&&Ps===t||(Ks=null,qs=$e()+500,dc(e,t));;)try{kc();break}catch(s){pc(e,s)}wa(),Is.current=o,Ns=i,null!==Rs?t=0:(As=null,Ps=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,$e()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,Bs,Ks);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=zs+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,Bs,Ks),t);break}_c(e,Bs,Ks);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ss(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,Bs,Ks),r);break}_c(e,Bs,Ks);break;default:throw Error(a(329))}}}return ic(e,$e()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Bs,Bs=n,null!==t&&uc(t)),e}function uc(e){null===Bs?Bs=e:Bs.push.apply(Bs,e)}function sc(e,t){for(t&=~Us,t&=~js,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Ns))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return ic(e,$e()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Bs,Ks),ic(e,$e()),null}function lc(e,t){var n=Ns;Ns|=1;try{return e(t)}finally{0===(Ns=n)&&(qs=$e()+500,Ui&&zi())}}function fc(e){null!==Ys&&0===Ys.tag&&0===(6&Ns)&&xc();var t=Ns;Ns|=1;var n=Cs.transition,r=kt;try{if(Cs.transition=null,kt=1,e)return e()}finally{kt=r,Cs.transition=n,0===(6&(Ns=t))&&zi()}}function hc(){Ds=Os.current,Si(Os)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rs)for(n=Rs.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:io(),Si(Ni),Si(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(uo);break;case 10:_a(r.type._context);break;case 22:case 23:hc()}n=n.return}if(As=e,Rs=e=Oc(e.current,null),Ps=Ds=t,Ls=0,Ms=null,Us=js=Fs=0,Bs=Vs=null,null!==Ia){for(t=0;t<Ia.length;t++)if(null!==(r=(n=Ia[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ia=null}return e}function pc(e,t){for(;;){var n=Rs;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,bo=0,Ts.current=null,null===n||null===n.return){Ls=1,Ms=t,Rs=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ps,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===Vs?Vs=[o]:Vs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Gs||!Gs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,Rs===n&&null!==n&&(Rs=n=n.return);continue}break}}function vc(){var e=Is.current;return Is.current=ou,null===e?ou:e}function mc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===As||0===(268435455&Fs)&&0===(268435455&js)||sc(As,Ps)}function yc(e,t){var n=Ns;Ns|=2;var r=vc();for(As===e&&Ps===t||(Ks=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(wa(),Ns=n,Is.current=r,null!==Rs)throw Error(a(261));return As=null,Ps=0,Ls}function gc(){for(;null!==Rs;)bc(Rs)}function kc(){for(;null!==Rs&&!Ye();)bc(Rs)}function bc(e){var t=Es(e.alternate,e,Ds);e.memoizedProps=e.pendingProps,null===t?wc(e):Rs=t,Ts.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qu(n,t,Ds)))return void(Rs=n)}else{if(null!==(n=Yu(n,t)))return n.flags&=32767,void(Rs=n);if(null===e)return Ls=6,void(Rs=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rs=t);Rs=t=e}while(null!==t);0===Ls&&(Ls=5)}function _c(e,t,n){var r=kt,i=Cs.transition;try{Cs.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Ys);if(0!==(6&Ns))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===As&&(Rs=As=null,Ps=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qs||(Qs=!0,Ac(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=kt;kt=1;var s=Ns;Ns|=4,Ts.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ns,ns=!1}(e,n),ys(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),Je(),Ns=s,kt=u,Cs.transition=o}else e.current=n;if(Qs&&(Qs=!1,Ys=e,Js=i),o=e.pendingLanes,0===o&&(Gs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hs)throw Hs=!1,e=Ws,Ws=null,e;0!==(1&Js)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Xs?$s++:($s=0,Xs=e):$s=0,zi()}(e,t,n,r)}finally{Cs.transition=i,kt=r}return null}function xc(){if(null!==Ys){var e=bt(Js),t=Cs.transition,n=kt;try{if(Cs.transition=null,kt=16>e?16:e,null===Ys)var r=!1;else{if(e=Ys,Ys=null,Js=0,0!==(6&Ns))throw Error(a(331));var i=Ns;for(Ns|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,p=f.return;if(os(f),f===l){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var b=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Zu=b;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(_){Sc(s,s.return,_)}if(s===u){Zu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Zu=w;break e}Zu=s.return}}if(Ns=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Cs.transition=t}}return!1}function Ec(e,t,n){e=Oa(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Sc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gs||!Gs.has(r))){t=Oa(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,As===e&&(Ps&n)===n&&(4===Ls||3===Ls&&(130023424&Ps)===Ps&&500>$e()-zs?dc(e,0):Us|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Na(e,t))&&(yt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Ac(e,t){return Ge(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Rc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Dc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Mc(n.children,i,o,t);case E:u=8,i|=8;break;case S:return(e=Pc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case N:return(e=Pc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Pc(19,n,t,i)).elementType=A,e.lanes=o,e;case D:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:u=10;break e;case T:u=9;break e;case C:u=11;break e;case R:u=14;break e;case P:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function zc(e){if(!e)return Ti;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=Bc(n,r,!0,e,0,a,0,u,s)).context=zc(null),n=e.current,(a=Da(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Kc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Da(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Es=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Au(t),da();break;case 5:ao(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ii(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ii(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?ju(e,t,n):(Ii(uo,1&uo.current),null!==(e=Hu(e,t,n))?e.sibling:null);Ii(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,n)}return Hu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ku(e,t),e=t.pendingProps;var i=Ri(t,Ci.current);Ea(t,n),i=Eo(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ra(t),i.updater=Ba,t.stateNode=i,i._reactInternals=t,Ha(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ku(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Au(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Pa(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ru(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Ru(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=$a(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Hu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Iu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return ju(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ja(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ii(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Hu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Da(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ea(t,n),r=r(i=Sa(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),xu(e,t,r,i=ma(r.type,i),n);case 15:return Eu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Ku(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Ea(t,n),qa(t,r,i),Ha(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Su(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Hc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Hc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Hc(s);u.call(e)}}var s=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),fc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Hc(o)}Jc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},Jc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Kc(null,e,null,null)})),t[pi]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,$e()),0===(6&Ns)&&(qs=$e()+500,zi()))}break;case 13:fc((function(){var t=Na(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Gc(e,1)}},_t=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)rc(t,e,134217728,tc());Gc(e,134217728)}},xt=function(e){if(13===e.tag){var t=nc(e),n=Na(e,t);if(null!==n)rc(n,e,t,tc());Gc(e,t)}},Et=function(){return kt},St=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));G(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ne=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ie,Te,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},D={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:D,ReactCurrentOwner:x};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,D(_);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function _(e,n){v=!1,m&&(m=!1,g(I),I=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,E=!1,S=null,I=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?x():(E=!1,S=null)}}else E=!1}if("function"===typeof k)x=function(){k(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=A,x=function(){P.postMessage(null)}}else x=function(){y(A,0)};function D(e){S=e,E||(E=!0,x())}function O(e,n){I=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(I),I=-1):m=!0,O(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,D(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".2843ca88.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="todo-app:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunktodo_app=self.webpackChunktodo_app||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return Ju},SDK_VERSION:function(){return sc},_DEFAULT_ENTRY_NAME:function(){return Ys},_addComponent:function(){return Zs},_addOrOverwriteComponent:function(){return ec},_apps:function(){return $s},_clearComponents:function(){return ic},_components:function(){return Xs},_getProvider:function(){return nc},_registerComponent:function(){return tc},_removeServiceInstance:function(){return rc},deleteApp:function(){return hc},getApp:function(){return lc},getApps:function(){return fc},initializeApp:function(){return cc},onLog:function(){return vc},registerVersion:function(){return pc},setLogLevel:function(){return mc}});var t,r=n(791),i=n.t(r,2),a=n(250);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function s(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function c(e){return function(e){if(Array.isArray(e))return o(e)}(e)||u(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){var t=g();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}(this,n)}}function w(e,t,n){return w=g()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&v(i,n.prototype),i},w.apply(null,arguments)}function _(e){var t="function"===typeof Map?new Map:void 0;return _=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return w(e,arguments,y(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),v(r,e)},_(e)}function x(e){if(Array.isArray(e))return e}function E(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(e,t){return x(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||s(e,t)||E()}function I(e){return x(e)||u(e)||s(e)||E()}function T(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var N,A="popstate";function R(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function P(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function D(e,t){return{usr:e.state,key:e.key,idx:t}}function O(e,t,n,r){return void 0===n&&(n=null),C({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?M(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function L(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function M(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function F(e,n,r,i){void 0===i&&(i={});var a=i,o=a.window,u=void 0===o?document.defaultView:o,s=a.v5Compat,c=void 0!==s&&s,l=u.history,f=t.Pop,h=null,d=p();function p(){return(l.state||{idx:null}).idx}function v(){f=t.Pop;var e=p(),n=null==e?null:e-d;d=e,h&&h({action:f,location:y.location,delta:n})}function m(e){var t="null"!==u.location.origin?u.location.origin:u.location.href,n="string"===typeof e?e:L(e);return R(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==d&&(d=0,l.replaceState(C({},l.state,{idx:d}),""));var y={get action(){return f},get location(){return e(u,l)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return u.addEventListener(A,v),h=e,function(){u.removeEventListener(A,v),h=null}},createHref:function(e){return n(u,e)},createURL:m,encodeLocation:function(e){var t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){f=t.Push;var i=O(y.location,e,n);r&&r(i,e);var a=D(i,d=p()+1),o=y.createHref(i);try{l.pushState(a,"",o)}catch(s){if(s instanceof DOMException&&"DataCloneError"===s.name)throw s;u.location.assign(o)}c&&h&&h({action:f,location:y.location,delta:1})},replace:function(e,n){f=t.Replace;var i=O(y.location,e,n);r&&r(i,e);var a=D(i,d=p()),o=y.createHref(i);l.replaceState(a,"",o),c&&h&&h({action:f,location:y.location,delta:0})},go:function(e){return l.go(e)}};return y}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(N||(N={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function j(e,t,n){void 0===n&&(n="/");var r=X(("string"===typeof t?M(t):t).pathname||"/",n);if(null==r)return null;var i=U(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=Y(i[o],$(r));return a}function U(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(R(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=ne([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(R(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),U(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:Q(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=T(V(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function V(e){var t=e.split("/");if(0===t.length)return[];var n=I(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var u=V(i.join("/")),s=[];return s.push.apply(s,c(u.map((function(e){return""===e?o:[o,e].join("/")})))),a&&s.push.apply(s,c(u)),s.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var B=/^:\w+$/,z=3,q=2,K=1,H=10,W=-2,G=function(e){return"*"===e};function Q(e,t){var n=e.split("/"),r=n.length;return n.some(G)&&(r+=W),t&&(r+=q),n.filter((function(e){return!G(e)})).reduce((function(e,t){return e+(B.test(t)?z:""===t?K:H)}),r)}function Y(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=J({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:ne([i,l.pathname]),pathnameBase:re(ne([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=ne([i,l.pathnameBase]))}return a}function J(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);P("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=S(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1),l=a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return P(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c[n]||"",t),e}),{});return{params:l,pathname:u,pathnameBase:s,pattern:e}}function $(e){try{return decodeURI(e)}catch(t){return P(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function X(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Z(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function ee(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function te(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=M(e):(R(!(i=C({},e)).pathname||!i.pathname.includes("?"),Z("?","pathname","search",i)),R(!i.pathname||!i.pathname.includes("#"),Z("#","pathname","hash",i)),R(!i.search||!i.search.includes("#"),Z("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?M(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:ie(a),hash:ae(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var ne=function(e){return e.join("/").replace(/\/\/+/g,"/")},re=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ie=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},ae=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},oe=function(e){m(n,e);var t=b(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n)}(_(Error));function ue(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var se=["post","put","patch","delete"],ce=(new Set(se),["get"].concat(se));new Set(ce),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},le.apply(this,arguments)}var fe=r.createContext(null);var he=r.createContext(null);var de=r.createContext(null);var pe=r.createContext(null);var ve=r.createContext(null);var me=r.createContext({outlet:null,matches:[],isDataRoute:!1});var ye=r.createContext(null);function ge(){return null!=r.useContext(ve)}function ke(){return ge()||R(!1),r.useContext(ve).location}function be(e){r.useContext(pe).static||r.useLayoutEffect(e)}function we(){return r.useContext(me).isDataRoute?function(){var e=Pe(Ie.UseNavigateStable).router,t=Oe(Te.UseNavigateStable),n=r.useRef(!1);be((function(){n.current=!0}));var i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,le({fromRouteId:t},i)))}),[e,t]);return i}():function(){ge()||R(!1);var e=r.useContext(fe),t=r.useContext(pe),n=t.basename,i=t.navigator,a=r.useContext(me).matches,o=ke().pathname,u=JSON.stringify(ee(a).map((function(e){return e.pathnameBase}))),s=r.useRef(!1);return be((function(){s.current=!0})),r.useCallback((function(t,r){if(void 0===r&&(r={}),s.current)if("number"!==typeof t){var a=te(t,JSON.parse(u),o,"path"===r.relative);null==e&&"/"!==n&&(a.pathname="/"===a.pathname?n:ne([n,a.pathname])),(r.replace?i.replace:i.push)(a,r.state,r)}else i.go(t)}),[n,i,u,o,e])}()}function _e(){var e=r.useContext(me).matches,t=e[e.length-1];return t?t.params:{}}function xe(e,t){var n=(void 0===t?{}:t).relative,i=r.useContext(me).matches,a=ke().pathname,o=JSON.stringify(ee(i).map((function(e){return e.pathnameBase})));return r.useMemo((function(){return te(e,JSON.parse(o),a,"path"===n)}),[e,o,a,n])}function Ee(e,n,i){ge()||R(!1);var a,o=r.useContext(pe).navigator,u=r.useContext(me).matches,s=u[u.length-1],c=s?s.params:{},l=(s&&s.pathname,s?s.pathnameBase:"/"),f=(s&&s.route,ke());if(n){var h,d="string"===typeof n?M(n):n;"/"===l||(null==(h=d.pathname)?void 0:h.startsWith(l))||R(!1),a=d}else a=f;var p=a.pathname||"/",v=j(e,{pathname:"/"===l?p:p.slice(l.length)||"/"});var m=Re(v&&v.map((function(e){return Object.assign({},e,{params:Object.assign({},c,e.params),pathname:ne([l,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:ne([l,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),u,i);return n&&m?r.createElement(ve.Provider,{value:{location:le({pathname:"/",search:"",hash:"",state:null,key:"default"},a),navigationType:t.Pop}},m):m}function Se(){var e=function(){var e,t=r.useContext(ye),n=De(Te.UseRouteError),i=Oe(Te.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=ue(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,null)}var Ie,Te,Ce=r.createElement(Se,null),Ne=function(e){m(n,e);var t=b(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},r}return p(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?r.createElement(me.Provider,{value:this.props.routeContext},r.createElement(ye.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),n}(r.Component);function Ae(e){var t=e.routeContext,n=e.match,i=e.children,a=r.useContext(fe);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(me.Provider,{value:t},i)}function Re(e,t,n){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),null==e){var a;if(null==(a=n)||!a.errors)return null;e=n.matches}var o=e,u=null==(i=n)?void 0:i.errors;if(null!=u){var s=o.findIndex((function(e){return e.route.id&&(null==u?void 0:u[e.route.id])}));s>=0||R(!1),o=o.slice(0,Math.min(o.length,s+1))}return o.reduceRight((function(e,i,a){var s=i.route.id?null==u?void 0:u[i.route.id]:null,c=null;n&&(c=i.route.errorElement||Ce);var l=t.concat(o.slice(0,a+1)),f=function(){var t;return t=s?c:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(Ae,{match:i,routeContext:{outlet:e,matches:l,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?r.createElement(Ne,{location:n.location,revalidation:n.revalidation,component:c,error:s,children:f(),routeContext:{outlet:null,matches:l,isDataRoute:!0}}):f()}),null)}function Pe(e){var t=r.useContext(fe);return t||R(!1),t}function De(e){var t=r.useContext(he);return t||R(!1),t}function Oe(e){var t=function(e){var t=r.useContext(me);return t||R(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||R(!1),n.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"}(Ie||(Ie={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"}(Te||(Te={}));var Le;i.startTransition;function Me(e){var t=e.to,n=e.replace,i=e.state,a=e.relative;ge()||R(!1);var o=r.useContext(me).matches,u=ke().pathname,s=we(),c=te(t,ee(o).map((function(e){return e.pathnameBase})),u,"path"===a),l=JSON.stringify(c);return r.useEffect((function(){return s(JSON.parse(l),{replace:n,state:i,relative:a})}),[s,l,a,n,i]),null}function Fe(e){R(!1)}function je(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,u=e.location,s=e.navigationType,c=void 0===s?t.Pop:s,l=e.navigator,f=e.static,h=void 0!==f&&f;ge()&&R(!1);var d=i.replace(/^\/*/,"/"),p=r.useMemo((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof u&&(u=M(u));var v=u,m=v.pathname,y=void 0===m?"/":m,g=v.search,k=void 0===g?"":g,b=v.hash,w=void 0===b?"":b,_=v.state,x=void 0===_?null:_,E=v.key,S=void 0===E?"default":E,I=r.useMemo((function(){var e=X(y,d);return null==e?null:{location:{pathname:e,search:k,hash:w,state:x,key:S},navigationType:c}}),[d,y,k,w,x,S,c]);return null==I?null:r.createElement(pe.Provider,{value:p},r.createElement(ve.Provider,{children:o,value:I}))}function Ue(e){var t=e.children,n=e.location;return Ee(Be(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Le||(Le={}));var Ve=new Promise((function(){}));r.Component;function Be(e,t){void 0===t&&(t=[]);var n=[];return r.Children.forEach(e,(function(e,i){if(r.isValidElement(e)){var a=[].concat(c(t),[i]);if(e.type!==r.Fragment){e.type!==Fe&&R(!1),e.props.index&&e.props.children&&R(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Be(e.props.children,a)),n.push(o)}else n.push.apply(n,Be(e.props.children,a))}})),n}function ze(e,t){return function(){return e.apply(t,arguments)}}var qe,Ke=Object.prototype.toString,He=Object.getPrototypeOf,We=(qe=Object.create(null),function(e){var t=Ke.call(e);return qe[t]||(qe[t]=t.slice(8,-1).toLowerCase())}),Ge=function(e){return e=e.toLowerCase(),function(t){return We(t)===e}},Qe=function(e){return function(t){return typeof t===e}},Ye=Array.isArray,Je=Qe("undefined");var $e=Ge("ArrayBuffer");var Xe=Qe("string"),Ze=Qe("function"),et=Qe("number"),tt=function(e){return null!==e&&"object"===typeof e},nt=function(e){if("object"!==We(e))return!1;var t=He(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},rt=Ge("Date"),it=Ge("File"),at=Ge("Blob"),ot=Ge("FileList"),ut=Ge("URLSearchParams");function st(e,t){var n,r,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allOwnKeys,a=void 0!==i&&i;if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Ye(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{var o,u=a?Object.getOwnPropertyNames(e):Object.keys(e),s=u.length;for(n=0;n<s;n++)o=u[n],t.call(null,e[o],o,e)}}function ct(e,t){t=t.toLowerCase();for(var n,r=Object.keys(e),i=r.length;i-- >0;)if(t===(n=r[i]).toLowerCase())return n;return null}var lt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,ft=function(e){return!Je(e)&&e!==lt};var ht,dt=(ht="undefined"!==typeof Uint8Array&&He(Uint8Array),function(e){return ht&&e instanceof ht}),pt=Ge("HTMLFormElement"),vt=function(e){var t=Object.prototype.hasOwnProperty;return function(e,n){return t.call(e,n)}}(),mt=Ge("RegExp"),yt=function(e,t){var n=Object.getOwnPropertyDescriptors(e),r={};st(n,(function(n,i){!1!==t(n,i,e)&&(r[i]=n)})),Object.defineProperties(e,r)},gt="abcdefghijklmnopqrstuvwxyz",kt="0123456789",bt={DIGIT:kt,ALPHA:gt,ALPHA_DIGIT:gt+gt.toUpperCase()+kt};var wt=Ge("AsyncFunction"),_t={isArray:Ye,isArrayBuffer:$e,isBuffer:function(e){return null!==e&&!Je(e)&&null!==e.constructor&&!Je(e.constructor)&&Ze(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t;return e&&("function"===typeof FormData&&e instanceof FormData||Ze(e.append)&&("formdata"===(t=We(e))||"object"===t&&Ze(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&$e(e.buffer)},isString:Xe,isNumber:et,isBoolean:function(e){return!0===e||!1===e},isObject:tt,isPlainObject:nt,isUndefined:Je,isDate:rt,isFile:it,isBlob:at,isRegExp:mt,isFunction:Ze,isStream:function(e){return tt(e)&&Ze(e.pipe)},isURLSearchParams:ut,isTypedArray:dt,isFileList:ot,forEach:st,merge:function e(){for(var t=(ft(this)&&this||{}).caseless,n={},r=function(r,i){var a=t&&ct(n,i)||i;nt(n[a])&&nt(r)?n[a]=e(n[a],r):nt(r)?n[a]=e({},r):Ye(r)?n[a]=r.slice():n[a]=r},i=0,a=arguments.length;i<a;i++)arguments[i]&&st(arguments[i],r);return n},extend:function(e,t,n){return st(t,(function(t,r){n&&Ze(t)?e[r]=ze(t,n):e[r]=t}),{allOwnKeys:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var i,a,o,u={};if(t=t||{},null==e)return t;do{for(a=(i=Object.getOwnPropertyNames(e)).length;a-- >0;)o=i[a],r&&!r(o,e,t)||u[o]||(t[o]=e[o],u[o]=!0);e=!1!==n&&He(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:We,kindOfTest:Ge,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(Ye(e))return e;var t=e.length;if(!et(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var i=n.value;t.call(e,i[0],i[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:pt,hasOwnProperty:vt,hasOwnProp:vt,reduceDescriptors:yt,freezeMethods:function(e){yt(e,(function(t,n){if(Ze(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;var r=e[n];Ze(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:function(e,t){var n={},r=function(e){e.forEach((function(e){n[e]=!0}))};return Ye(e)?r(e):r(String(e).split(t)),n},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(e,t){return e=+e,Number.isFinite(e)?e:t},findKey:ct,global:lt,isContextDefined:ft,ALPHABET:bt,generateString:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bt.ALPHA_DIGIT,n="",r=t.length;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&Ze(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:function(e){var t=new Array(10);return function e(n,r){if(tt(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[r]=n;var i=Ye(n)?[]:{};return st(n,(function(t,n){var a=e(t,r+1);!Je(a)&&(i[n]=a)})),t[r]=void 0,i}}return n}(e,0)},isAsyncFn:wt,isThenable:function(e){return e&&(tt(e)||Ze(e))&&Ze(e.then)&&Ze(e.catch)}};function xt(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}_t.inherits(xt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:_t.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Et=xt.prototype,St={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){St[e]={value:e}})),Object.defineProperties(xt,St),Object.defineProperty(Et,"isAxiosError",{value:!0}),xt.from=function(e,t,n,r,i,a){var o=Object.create(Et);return _t.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),xt.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};var It=xt;function Tt(e){return _t.isPlainObject(e)||_t.isArray(e)}function Ct(e){return _t.endsWith(e,"[]")?e.slice(0,-2):e}function Nt(e,t,n){return e?e.concat(t).map((function(e,t){return e=Ct(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var At=_t.toFlatObject(_t,{},null,(function(e){return/^is[A-Z]/.test(e)}));var Rt=function(e,t,n){if(!_t.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;var r=(n=_t.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!_t.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,a=n.dots,o=n.indexes,u=(n.Blob||"undefined"!==typeof Blob&&Blob)&&_t.isSpecCompliantForm(t);if(!_t.isFunction(i))throw new TypeError("visitor must be a function");function s(e){if(null===e)return"";if(_t.isDate(e))return e.toISOString();if(!u&&_t.isBlob(e))throw new It("Blob is not supported. Use a Buffer instead.");return _t.isArrayBuffer(e)||_t.isTypedArray(e)?u&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){var u=e;if(e&&!i&&"object"===typeof e)if(_t.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(_t.isArray(e)&&function(e){return _t.isArray(e)&&!e.some(Tt)}(e)||(_t.isFileList(e)||_t.endsWith(n,"[]"))&&(u=_t.toArray(e)))return n=Ct(n),u.forEach((function(e,r){!_t.isUndefined(e)&&null!==e&&t.append(!0===o?Nt([n],r,a):null===o?n:n+"[]",s(e))})),!1;return!!Tt(e)||(t.append(Nt(i,n,a),s(e)),!1)}var l=[],f=Object.assign(At,{defaultVisitor:c,convertValue:s,isVisitable:Tt});if(!_t.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!_t.isUndefined(n)){if(-1!==l.indexOf(n))throw Error("Circular reference detected in "+r.join("."));l.push(n),_t.forEach(n,(function(n,a){!0===(!(_t.isUndefined(n)||null===n)&&i.call(t,n,_t.isString(a)?a.trim():a,r,f))&&e(n,r?r.concat(a):[a])})),l.pop()}}(e),t};function Pt(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Dt(e,t){this._pairs=[],e&&Rt(e,this,t)}var Ot=Dt.prototype;Ot.append=function(e,t){this._pairs.push([e,t])},Ot.toString=function(e){var t=e?function(t){return e.call(this,t,Pt)}:Pt;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var Lt=Dt;function Mt(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ft(e,t,n){if(!t)return e;var r,i=n&&n.encode||Mt,a=n&&n.serialize;if(r=a?a(t,n):_t.isURLSearchParams(t)?t.toString():new Lt(t,n).toString(i)){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}var jt=function(){function e(){l(this,e),this.handlers=[]}return p(e,[{key:"use",value:function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){_t.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),e}(),Ut=jt,Vt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Bt={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Lt,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},isStandardBrowserEnv:function(){var e;return("undefined"===typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!==typeof window&&"undefined"!==typeof document)}(),isStandardBrowserWebWorkerEnv:"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};var zt=function(e){function t(e,n,r,i){var a=e[i++],o=Number.isFinite(+a),u=i>=e.length;return a=!a&&_t.isArray(r)?r.length:a,u?(_t.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!o):(r[a]&&_t.isObject(r[a])||(r[a]=[]),t(e,n,r[a],i)&&_t.isArray(r[a])&&(r[a]=function(e){var t,n,r={},i=Object.keys(e),a=i.length;for(t=0;t<a;t++)r[n=i[t]]=e[n];return r}(r[a])),!o)}if(_t.isFormData(e)&&_t.isFunction(e.entries)){var n={};return _t.forEachEntry(e,(function(e,r){t(function(e){return _t.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),r,n,0)})),n}return null},qt={"Content-Type":void 0};var Kt={transitional:Vt,adapter:["xhr","http"],transformRequest:[function(e,t){var n,r=t.getContentType()||"",i=r.indexOf("application/json")>-1,a=_t.isObject(e);if(a&&_t.isHTMLForm(e)&&(e=new FormData(e)),_t.isFormData(e))return i&&i?JSON.stringify(zt(e)):e;if(_t.isArrayBuffer(e)||_t.isBuffer(e)||_t.isStream(e)||_t.isFile(e)||_t.isBlob(e))return e;if(_t.isArrayBufferView(e))return e.buffer;if(_t.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Rt(e,new Bt.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Bt.isNode&&_t.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((n=_t.isFileList(e))||r.indexOf("multipart/form-data")>-1){var o=this.env&&this.env.FormData;return Rt(n?{"files[]":e}:e,o&&new o,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),function(e,t,n){if(_t.isString(e))try{return(t||JSON.parse)(e),_t.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||Kt.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&_t.isString(e)&&(n&&!this.responseType||r)){var i=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(i){if("SyntaxError"===a.name)throw It.from(a,It.ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Bt.classes.FormData,Blob:Bt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};_t.forEach(["delete","get","head"],(function(e){Kt.headers[e]={}})),_t.forEach(["post","put","patch"],(function(e){Kt.headers[e]=_t.merge(qt)}));var Ht=Kt,Wt=_t.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Gt=Symbol("internals");function Qt(e){return e&&String(e).trim().toLowerCase()}function Yt(e){return!1===e||null==e?e:_t.isArray(e)?e.map(Yt):String(e)}function Jt(e,t,n,r,i){return _t.isFunction(r)?r.call(this,t,n):(i&&(t=n),_t.isString(t)?_t.isString(r)?-1!==t.indexOf(r):_t.isRegExp(r)?r.test(t):void 0:void 0)}var $t=function(e,t){function n(e){l(this,n),e&&this.set(e)}return p(n,[{key:"set",value:function(e,t,n){var r=this;function i(e,t,n){var i=Qt(t);if(!i)throw new Error("header name must be a non-empty string");var a=_t.findKey(r,i);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||t]=Yt(e))}var a=function(e,t){return _t.forEach(e,(function(e,n){return i(e,n,t)}))};return _t.isPlainObject(e)||e instanceof this.constructor?a(e,t):_t.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?a(function(e){var t,n,r,i={};return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),t=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!t||i[t]&&Wt[t]||("set-cookie"===t?i[t]?i[t].push(n):i[t]=[n]:i[t]=i[t]?i[t]+", "+n:n)})),i}(e),t):null!=e&&i(t,e,n),this}},{key:"get",value:function(e,t){if(e=Qt(e)){var n=_t.findKey(this,e);if(n){var r=this[n];if(!t)return r;if(!0===t)return function(e){for(var t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=r.exec(e);)n[t[1]]=t[2];return n}(r);if(_t.isFunction(t))return t.call(this,r,n);if(_t.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,t){if(e=Qt(e)){var n=_t.findKey(this,e);return!(!n||void 0===this[n]||t&&!Jt(0,this[n],n,t))}return!1}},{key:"delete",value:function(e,t){var n=this,r=!1;function i(e){if(e=Qt(e)){var i=_t.findKey(n,e);!i||t&&!Jt(0,n[i],i,t)||(delete n[i],r=!0)}}return _t.isArray(e)?e.forEach(i):i(e),r}},{key:"clear",value:function(e){for(var t=Object.keys(this),n=t.length,r=!1;n--;){var i=t[n];e&&!Jt(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}},{key:"normalize",value:function(e){var t=this,n={};return _t.forEach(this,(function(r,i){var a=_t.findKey(n,i);if(a)return t[a]=Yt(r),void delete t[i];var o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))}(i):String(i).trim();o!==i&&delete t[i],t[o]=Yt(r),n[o]=!0})),this}},{key:"concat",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.constructor).concat.apply(e,[this].concat(n))}},{key:"toJSON",value:function(e){var t=Object.create(null);return _t.forEach(this,(function(n,r){null!=n&&!1!==n&&(t[r]=e&&_t.isArray(n)?n.join(", "):n)})),t}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(e){var t=S(e,2);return t[0]+": "+t[1]})).join("\n")}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var t=new this(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((function(e){return t.set(e)})),t}},{key:"accessor",value:function(e){var t=(this[Gt]=this[Gt]={accessors:{}}).accessors,n=this.prototype;function r(e){var r=Qt(e);t[r]||(!function(e,t){var n=_t.toCamelCase(" "+t);["get","set","has"].forEach((function(r){Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return _t.isArray(e)?e.forEach(r):r(e),this}}]),n}();$t.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),_t.freezeMethods($t.prototype),_t.freezeMethods($t);var Xt=$t;function Zt(e,t){var n=this||Ht,r=t||n,i=Xt.from(r.headers),a=r.data;return _t.forEach(e,(function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)})),i.normalize(),a}function en(e){return!(!e||!e.__CANCEL__)}function tn(e,t,n){It.call(this,null==e?"canceled":e,It.ERR_CANCELED,t,n),this.name="CanceledError"}_t.inherits(tn,It,{__CANCEL__:!0});var nn=tn;var rn=Bt.isStandardBrowserEnv?{write:function(e,t,n,r,i,a){var o=[];o.push(e+"="+encodeURIComponent(t)),_t.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),_t.isString(r)&&o.push("path="+r),_t.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function an(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var on=Bt.isStandardBrowserEnv?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=_t.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};var un=function(e,t){e=e||10;var n,r=new Array(e),i=new Array(e),a=0,o=0;return t=void 0!==t?t:1e3,function(u){var s=Date.now(),c=i[o];n||(n=s),r[a]=u,i[a]=s;for(var l=o,f=0;l!==a;)f+=r[l++],l%=e;if((a=(a+1)%e)===o&&(o=(o+1)%e),!(s-n<t)){var h=c&&s-c;return h?Math.round(1e3*f/h):void 0}}};function sn(e,t){var n=0,r=un(50,250);return function(i){var a=i.loaded,o=i.lengthComputable?i.total:void 0,u=a-n,s=r(u);n=a;var c={loaded:a,total:o,progress:o?a/o:void 0,bytes:u,rate:s||void 0,estimated:s&&o&&a<=o?(o-a)/s:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}var cn="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){var r,i=e.data,a=Xt.from(e.headers).normalize(),o=e.responseType;function u(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}_t.isFormData(i)&&(Bt.isStandardBrowserEnv||Bt.isStandardBrowserWebWorkerEnv?a.setContentType(!1):a.setContentType("multipart/form-data;",!1));var s=new XMLHttpRequest;if(e.auth){var c=e.auth.username||"",l=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.set("Authorization","Basic "+btoa(c+":"+l))}var f=an(e.baseURL,e.url);function h(){if(s){var r=Xt.from("getAllResponseHeaders"in s&&s.getAllResponseHeaders());!function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new It("Request failed with status code "+n.status,[It.ERR_BAD_REQUEST,It.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),u()}),(function(e){n(e),u()}),{data:o&&"text"!==o&&"json"!==o?s.response:s.responseText,status:s.status,statusText:s.statusText,headers:r,config:e,request:s}),s=null}}if(s.open(e.method.toUpperCase(),Ft(f,e.params,e.paramsSerializer),!0),s.timeout=e.timeout,"onloadend"in s?s.onloadend=h:s.onreadystatechange=function(){s&&4===s.readyState&&(0!==s.status||s.responseURL&&0===s.responseURL.indexOf("file:"))&&setTimeout(h)},s.onabort=function(){s&&(n(new It("Request aborted",It.ECONNABORTED,e,s)),s=null)},s.onerror=function(){n(new It("Network Error",It.ERR_NETWORK,e,s)),s=null},s.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||Vt;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new It(t,r.clarifyTimeoutError?It.ETIMEDOUT:It.ECONNABORTED,e,s)),s=null},Bt.isStandardBrowserEnv){var d=(e.withCredentials||on(f))&&e.xsrfCookieName&&rn.read(e.xsrfCookieName);d&&a.set(e.xsrfHeaderName,d)}void 0===i&&a.setContentType(null),"setRequestHeader"in s&&_t.forEach(a.toJSON(),(function(e,t){s.setRequestHeader(t,e)})),_t.isUndefined(e.withCredentials)||(s.withCredentials=!!e.withCredentials),o&&"json"!==o&&(s.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&s.addEventListener("progress",sn(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&s.upload&&s.upload.addEventListener("progress",sn(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=function(t){s&&(n(!t||t.type?new nn(null,e,s):t),s.abort(),s=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));var p=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(f);p&&-1===Bt.protocols.indexOf(p)?n(new It("Unsupported protocol "+p+":",It.ERR_BAD_REQUEST,e)):s.send(i||null)}))},ln={http:null,xhr:cn};_t.forEach(ln,(function(e,t){if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));var fn=function(e){for(var t,n,r=(e=_t.isArray(e)?e:[e]).length,i=0;i<r&&(t=e[i],!(n=_t.isString(t)?ln[t.toLowerCase()]:t));i++);if(!n){if(!1===n)throw new It("Adapter ".concat(t," is not supported by the environment"),"ERR_NOT_SUPPORT");throw new Error(_t.hasOwnProp(ln,t)?"Adapter '".concat(t,"' is not available in the build"):"Unknown adapter '".concat(t,"'"))}if(!_t.isFunction(n))throw new TypeError("adapter is not a function");return n};function hn(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new nn(null,e)}function dn(e){return hn(e),e.headers=Xt.from(e.headers),e.data=Zt.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),fn(e.adapter||Ht.adapter)(e).then((function(t){return hn(e),t.data=Zt.call(e,e.transformResponse,t),t.headers=Xt.from(t.headers),t}),(function(t){return en(t)||(hn(e),t&&t.response&&(t.response.data=Zt.call(e,e.transformResponse,t.response),t.response.headers=Xt.from(t.response.headers))),Promise.reject(t)}))}var pn=function(e){return e instanceof Xt?e.toJSON():e};function vn(e,t){t=t||{};var n={};function r(e,t,n){return _t.isPlainObject(e)&&_t.isPlainObject(t)?_t.merge.call({caseless:n},e,t):_t.isPlainObject(t)?_t.merge({},t):_t.isArray(t)?t.slice():t}function i(e,t,n){return _t.isUndefined(t)?_t.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function a(e,t){if(!_t.isUndefined(t))return r(void 0,t)}function o(e,t){return _t.isUndefined(t)?_t.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function u(n,i,a){return a in t?r(n,i):a in e?r(void 0,n):void 0}var s={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u,headers:function(e,t){return i(pn(e),pn(t),!0)}};return _t.forEach(Object.keys(Object.assign({},e,t)),(function(r){var a=s[r]||i,o=a(e[r],t[r],r);_t.isUndefined(o)&&a!==u||(n[r]=o)})),n}var mn="1.4.0",yn={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){yn[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var gn={};yn.transitional=function(e,t,n){function r(e,t){return"[Axios v1.4.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,a){if(!1===e)throw new It(r(i," has been removed"+(t?" in "+t:"")),It.ERR_DEPRECATED);return t&&!gn[i]&&(gn[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}};var kn={assertOptions:function(e,t,n){if("object"!==typeof e)throw new It("options must be an object",It.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var a=r[i],o=t[a];if(o){var u=e[a],s=void 0===u||o(u,a,e);if(!0!==s)throw new It("option "+a+" must be "+s,It.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new It("Unknown option "+a,It.ERR_BAD_OPTION)}},validators:yn},bn=kn.validators,wn=function(){function e(t){l(this,e),this.defaults=t,this.interceptors={request:new Ut,response:new Ut}}return p(e,[{key:"request",value:function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{};var n,r=t=vn(this.defaults,t),i=r.transitional,a=r.paramsSerializer,o=r.headers;void 0!==i&&kn.assertOptions(i,{silentJSONParsing:bn.transitional(bn.boolean),forcedJSONParsing:bn.transitional(bn.boolean),clarifyTimeoutError:bn.transitional(bn.boolean)},!1),null!=a&&(_t.isFunction(a)?t.paramsSerializer={serialize:a}:kn.assertOptions(a,{encode:bn.function,serialize:bn.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase(),(n=o&&_t.merge(o.common,o[t.method]))&&_t.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete o[e]})),t.headers=Xt.concat(n,o);var u=[],s=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,u.unshift(e.fulfilled,e.rejected))}));var c,l=[];this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));var f,h=0;if(!s){var d=[dn.bind(this),void 0];for(d.unshift.apply(d,u),d.push.apply(d,l),f=d.length,c=Promise.resolve(t);h<f;)c=c.then(d[h++],d[h++]);return c}f=u.length;var p=t;for(h=0;h<f;){var v=u[h++],m=u[h++];try{p=v(p)}catch(y){m.call(this,y);break}}try{c=dn.call(this,p)}catch(y){return Promise.reject(y)}for(h=0,f=l.length;h<f;)c=c.then(l[h++],l[h++]);return c}},{key:"getUri",value:function(e){return Ft(an((e=vn(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),e}();_t.forEach(["delete","get","head","options"],(function(e){wn.prototype[e]=function(t,n){return this.request(vn(n||{},{method:e,url:t,data:(n||{}).data}))}})),_t.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(vn(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}wn.prototype[e]=t(),wn.prototype[e+"Form"]=t(!0)}));var _n=wn,xn=function(){function e(t){if(l(this,e),"function"!==typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var r=this;this.promise.then((function(e){if(r._listeners){for(var t=r._listeners.length;t-- >0;)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},t((function(e,t,i){r.reason||(r.reason=new nn(e,t,i),n(r.reason))}))}return p(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}}],[{key:"source",value:function(){var t;return{token:new e((function(e){t=e})),cancel:t}}}]),e}(),En=xn;var Sn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Sn).forEach((function(e){var t=S(e,2),n=t[0],r=t[1];Sn[r]=n}));var In=Sn;var Tn=function e(t){var n=new _n(t),r=ze(_n.prototype.request,n);return _t.extend(r,_n.prototype,n,{allOwnKeys:!0}),_t.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(vn(t,n))},r}(Ht);Tn.Axios=_n,Tn.CanceledError=nn,Tn.CancelToken=En,Tn.isCancel=en,Tn.VERSION=mn,Tn.toFormData=Rt,Tn.AxiosError=It,Tn.Cancel=Tn.CanceledError,Tn.all=function(e){return Promise.all(e)},Tn.spread=function(e){return function(t){return e.apply(null,t)}},Tn.isAxiosError=function(e){return _t.isObject(e)&&!0===e.isAxiosError},Tn.mergeConfig=vn,Tn.AxiosHeaders=Xt,Tn.formToJSON=function(e){return zt(_t.isHTMLForm(e)?new FormData(e):e)},Tn.HttpStatusCode=In,Tn.default=Tn;var Cn=Tn,Nn=n.p+"static/media/taskNinjaLogo.aef80241cc33f64baa22.jpg";function An(){return An=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},An.apply(this,arguments)}function Rn(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var Pn=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];var Dn=i.startTransition;function On(e){var t,n=e.basename,i=e.children,a=e.future,o=e.window,u=r.useRef();null==u.current&&(u.current=(void 0===(t={window:o,v5Compat:!0})&&(t={}),F((function(e,t){var n=e.location;return O("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:L(t)}),null,t)));var s=u.current,c=S(r.useState({action:s.action,location:s.location}),2),l=c[0],f=c[1],h=(a||{}).v7_startTransition,d=r.useCallback((function(e){h&&Dn?Dn((function(){return f(e)})):f(e)}),[f,h]);return r.useLayoutEffect((function(){return s.listen(d)}),[s,d]),r.createElement(je,{basename:n,children:i,location:l.location,navigationType:l.action,navigator:s})}var Ln="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Mn=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fn=r.forwardRef((function(e,t){var n,i=e.onClick,a=e.relative,o=e.reloadDocument,u=e.replace,s=e.state,c=e.target,l=e.to,f=e.preventScrollReset,h=Rn(e,Pn),d=r.useContext(pe).basename,p=!1;if("string"===typeof l&&Mn.test(l)&&(n=l,Ln))try{var v=new URL(window.location.href),m=l.startsWith("//")?new URL(v.protocol+l):new URL(l),y=X(m.pathname,d);m.origin===v.origin&&null!=y?l=y+m.search+m.hash:p=!0}catch(b){}var g=function(e,t){var n=(void 0===t?{}:t).relative;ge()||R(!1);var i=r.useContext(pe),a=i.basename,o=i.navigator,u=xe(e,{relative:n}),s=u.hash,c=u.pathname,l=u.search,f=c;return"/"!==a&&(f="/"===c?a:ne([a,c])),o.createHref({pathname:f,search:l,hash:s})}(l,{relative:a}),k=function(e,t){var n=void 0===t?{}:t,i=n.target,a=n.replace,o=n.state,u=n.preventScrollReset,s=n.relative,c=we(),l=ke(),f=xe(e,{relative:s});return r.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==a?a:L(l)===L(f);c(e,{replace:n,state:o,preventScrollReset:u,relative:s})}}),[l,c,f,a,o,i,e,u,s])}(l,{replace:u,state:s,target:c,preventScrollReset:f,relative:a});return r.createElement("a",An({},h,{href:n||g,onClick:p||o?i:function(e){i&&i(e),e.defaultPrevented||k(e)},ref:t,target:c}))}));var jn,Un;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(jn||(jn={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Un||(Un={}));var Vn=n(184);var Bn=function(){return(0,Vn.jsx)("div",{children:(0,Vn.jsx)("nav",{className:"navbar navbar-expand-lg bg-body-tertiary",children:(0,Vn.jsxs)("div",{className:"container-fluid",children:[(0,Vn.jsxs)(Fn,{className:"navbar-brand brandImg",to:"/",children:[" ",(0,Vn.jsx)("img",{src:Nn,alt:"Task Ninja"})]}),(0,Vn.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,Vn.jsx)("span",{className:"navbar-toggler-icon"})}),(0,Vn.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[(0,Vn.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[(0,Vn.jsx)("li",{className:"nav-item",children:(0,Vn.jsx)(Fn,{className:"nav-link active","aria-current":"page",to:"/",children:"Home"})}),(0,Vn.jsx)("li",{className:"nav-item",children:(0,Vn.jsx)(Fn,{className:"nav-link",to:"/tasks",children:"All Task"})}),(0,Vn.jsx)("li",{className:"nav-item",children:(0,Vn.jsx)(Fn,{className:"nav-link",to:"/login",children:"Login"})}),(0,Vn.jsx)("li",{className:"nav-item",children:(0,Vn.jsx)(Fn,{className:"nav-link",to:"/signup",children:"Signup"})}),(0,Vn.jsx)("li",{className:"nav-item",children:(0,Vn.jsx)(Fn,{className:"nav-link",to:"/admin",children:"Admin"})})]}),(0,Vn.jsxs)("form",{className:"d-flex",role:"search",children:[(0,Vn.jsx)("input",{className:"form-control me-2",type:"search",placeholder:"Search","aria-label":"Search"}),(0,Vn.jsx)("button",{className:"btn btn-outline-success",type:"submit",children:"Search"})]})]})]})})})};var zn=function(){return(0,Vn.jsx)("div",{children:(0,Vn.jsxs)("footer",{id:"footer",className:"border-top",children:[(0,Vn.jsx)("i",{className:"fa-brands fa-twitter"}),(0,Vn.jsx)("i",{className:"fa-brands fa-facebook"}),(0,Vn.jsx)("i",{className:"fa-brands fa-instagram"}),(0,Vn.jsx)("i",{className:"fa-solid fa-envelope"}),(0,Vn.jsx)("p",{className:"coyright-footer",children:"\xa9 Copyright TaskNinja"})]})})};var qn=function(){var e=S((0,r.useState)(""),2),t=e[0],n=e[1],i=S((0,r.useState)(""),2),a=i[0],o=i[1],u=S((0,r.useState)(""),2),s=u[0],c=u[1],l=S((0,r.useState)(""),2),f=l[0],h=l[1],d=S((0,r.useState)(""),2),p=d[0],v=d[1];return(0,Vn.jsxs)(Vn.Fragment,{children:[(0,Vn.jsx)(Bn,{}),(0,Vn.jsx)("div",{className:"container formContainer mt-20",children:(0,Vn.jsx)("div",{className:"row d-flex justify-content-center",children:(0,Vn.jsxs)("div",{className:"col-8 border formDiv",children:[(0,Vn.jsx)("h1",{className:"text-center  text-success text-decoration-underline",children:"Create a Task"}),(0,Vn.jsxs)("form",{onSubmit:function(e){e.preventDefault();var r={title:t,description:a,dueDate:s,status:f,user:p};console.log(r);var i=JSON.stringify(r);console.log(i),Cn.post("http://localhost:".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.PORT,"/todos"),r).then((function(e){console.log("Task created successfully:",e.data)})).catch((function(e){console.error("Error creating task:",e)})),n(""),o(""),v(""),c(""),h("")},children:[(0,Vn.jsxs)("div",{className:"mb-3",children:[(0,Vn.jsx)("label",{htmlFor:"title",className:"form-label",children:"Title"}),(0,Vn.jsx)("input",{type:"text",className:"form-control",id:"title",value:t,onChange:function(e){return n(e.target.value)}})]}),(0,Vn.jsxs)("div",{className:"mb-3",children:[(0,Vn.jsx)("label",{htmlFor:"description",className:"form-label",children:"Description"}),(0,Vn.jsx)("textarea",{className:"form-control",id:"description",rows:"1",value:a,onChange:function(e){return o(e.target.value)}})]}),(0,Vn.jsxs)("div",{className:"mb-3",children:[(0,Vn.jsx)("label",{htmlFor:"dueDate",className:"form-label",children:"Due Date"}),(0,Vn.jsx)("input",{type:"date",className:"form-control",id:"dueDate",value:s,onChange:function(e){return c(e.target.value)}})]}),(0,Vn.jsxs)("div",{className:"mb-3",children:[(0,Vn.jsx)("label",{htmlFor:"status",className:"form-label",children:"Status"}),(0,Vn.jsxs)("select",{className:"form-select",id:"status",value:f,onChange:function(e){return h(e.target.value)},children:[(0,Vn.jsx)("option",{value:"",children:"Select Status"}),(0,Vn.jsx)("option",{value:"Pending",children:"Pending"}),(0,Vn.jsx)("option",{value:"In Progress",children:"In Progress"}),(0,Vn.jsx)("option",{value:"Completed",children:"Completed"})]})]}),(0,Vn.jsxs)("div",{className:"mb-3",children:[(0,Vn.jsx)("label",{htmlFor:"user",className:"form-label",children:"User"}),(0,Vn.jsxs)("select",{className:"form-select",id:"user",value:p,onChange:function(e){return v(e.target.value)},children:[(0,Vn.jsx)("option",{value:"",children:"Select User"}),(0,Vn.jsx)("option",{value:"User 1",children:"User 1"}),(0,Vn.jsx)("option",{value:"User 2",children:"User 2"}),(0,Vn.jsx)("option",{value:"User 3",children:"User 3"})]})]}),(0,Vn.jsx)("div",{className:"col-12 d-grid",children:(0,Vn.jsx)("button",{type:"submit",className:"btn btn-success",id:"formBtn",children:"Add Task"})})]})]})})}),(0,Vn.jsx)(zn,{})]})};var Kn=function(){var e=S((0,r.useState)([]),2),t=e[0],n=e[1],i=S((0,r.useState)(""),2),a=i[0],o=i[1];(0,r.useEffect)((function(){Cn.get("http://localhost:8080/todos").then((function(e){var t=e.data;console.log(t),n(t)}))}),[]);var u=a?t.filter((function(e){return e.status===a})):t;function s(e){var t=e.data,n=e.index,r=t._id,i=t.title,a=t.dueDate,o=t.description,u=t.status,s=t.user,l=n+1;return(0,Vn.jsxs)("tr",{children:[(0,Vn.jsx)("th",{children:l}),(0,Vn.jsx)("td",{children:i}),(0,Vn.jsx)("td",{children:o}),(0,Vn.jsx)("td",{children:u}),(0,Vn.jsx)("td",{children:a}),(0,Vn.jsx)("td",{children:s}),(0,Vn.jsx)("td",{children:(0,Vn.jsx)(Fn,{to:"/edit/".concat(r),children:(0,Vn.jsx)("buton",{type:"button",className:"btn btn-primary",children:"Edit"})})}),(0,Vn.jsx)("td",{children:(0,Vn.jsx)("buton",{type:"button",className:"btn btn-danger",name:r,onClick:function(){c(r)},children:"Delete"})})]},r)}var c=function(e){Cn.delete("http://localhost:".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.PORT,"/todos/").concat(e)).then((function(){Cn.get("http://localhost:".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.PORT,"/todos")).then((function(e){return n(e.data)})).catch((function(e){return console.error(e)}))})).catch((function(e){return console.error(e)}))};return(0,Vn.jsxs)("div",{children:[(0,Vn.jsx)(Bn,{}),(0,Vn.jsx)("div",{className:"col-2"}),(0,Vn.jsxs)("div",{className:"col-8 table-responsive showData",children:[(0,Vn.jsx)("div",{children:(0,Vn.jsxs)("label",{children:["Filter by Status:",(0,Vn.jsxs)("select",{value:a,onChange:function(e){return o(e.target.value)},children:[(0,Vn.jsx)("option",{value:"",children:"All"}),(0,Vn.jsx)("option",{value:"Pending",children:"Pending"}),(0,Vn.jsx)("option",{value:"In Progress",children:"In Progress"}),(0,Vn.jsx)("option",{value:"Completed",children:"Completed"})]})]})}),(0,Vn.jsxs)("table",{className:"table",children:[(0,Vn.jsx)("thead",{children:(0,Vn.jsxs)("tr",{children:[(0,Vn.jsx)("th",{scope:"col",children:"#"}),(0,Vn.jsx)("th",{scope:"col",children:"Title"}),(0,Vn.jsx)("th",{scope:"col",children:"Description"}),(0,Vn.jsx)("th",{scope:"col",children:"Status"}),(0,Vn.jsx)("th",{scope:"col",children:"Due-Date"}),(0,Vn.jsx)("th",{scope:"col",children:"User"})]})}),(0,Vn.jsx)("tbody",{className:"table-group-divider",id:"tableBody",children:u.map((function(e,t){return(0,Vn.jsx)(s,{data:e,index:t})}))})]})]}),(0,Vn.jsx)("div",{className:"col-2"}),(0,Vn.jsx)(zn,{})]})};function Hn(){return Hn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Hn.apply(this,arguments)}var Wn=function(e){m(n,e);var t=b(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jn;if(l(this,n),r=t.call(this),Object.defineProperties(k(r),{_intern:{value:new Map},_key:{value:i}}),null!=e){var a,o=T(e);try{for(o.s();!(a=o.n()).done;){var u=S(a.value,2),s=u[0],c=u[1];r.set(s,c)}}catch(f){o.e(f)}finally{o.f()}}return r}return p(n,[{key:"get",value:function(e){return Hn(y(n.prototype),"get",this).call(this,Gn(this,e))}},{key:"has",value:function(e){return Hn(y(n.prototype),"has",this).call(this,Gn(this,e))}},{key:"set",value:function(e,t){return Hn(y(n.prototype),"set",this).call(this,Qn(this,e),t)}},{key:"delete",value:function(e){return Hn(y(n.prototype),"delete",this).call(this,Yn(this,e))}}]),n}(_(Map));function Gn(e,t){var n=e._intern,r=(0,e._key)(t);return n.has(r)?n.get(r):t}function Qn(e,t){var n=e._intern,r=(0,e._key)(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function Yn(e,t){var n=e._intern,r=(0,e._key)(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function Jn(e){return null!==e&&"object"===typeof e?e.valueOf():e}function $n(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return Xn(e,Array.from,t,r)}function Xn(e,t,n,r){return function e(i,a){if(a>=r.length)return n(i);var o,u=new Wn,s=r[a++],c=-1,l=T(i);try{for(l.s();!(o=l.n()).done;){var f=o.value,h=s(f,++c,i),d=u.get(h);d?d.push(f):u.set(h,[f])}}catch(k){l.e(k)}finally{l.f()}var p,v=T(u);try{for(v.s();!(p=v.n()).done;){var m=S(p.value,2),y=m[0],g=m[1];u.set(y,e(g,a))}}catch(k){v.e(k)}finally{v.f()}return t(u)}(e,0)}function Zn(e,t){var n;if(void 0===t){var r,i=T(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;null!=a&&(n<a||void 0===n&&a>=a)&&(n=a)}}catch(l){i.e(l)}finally{i.f()}}else{var o,u=-1,s=T(e);try{for(s.s();!(o=s.n()).done;){var c=o.value;null!=(c=t(c,++u,e))&&(n<c||void 0===n&&c>=c)&&(n=c)}}catch(l){s.e(l)}finally{s.f()}}return n}function er(e){return e}var tr=1,nr=2,rr=3,ir=4,ar=1e-6;function or(e){return"translate("+e+",0)"}function ur(e){return"translate(0,"+e+")"}function sr(e){return function(t){return+e(t)}}function cr(e,t){return t=Math.max(0,e.bandwidth()-2*t)/2,e.round()&&(t=Math.round(t)),function(n){return+e(n)+t}}function lr(){return!this.__axis}function fr(e,t){var n=[],r=null,i=null,a=6,o=6,u=3,s="undefined"!==typeof window&&window.devicePixelRatio>1?0:.5,c=e===tr||e===ir?-1:1,l=e===ir||e===nr?"x":"y",f=e===tr||e===rr?or:ur;function h(h){var d=null==r?t.ticks?t.ticks.apply(t,n):t.domain():r,p=null==i?t.tickFormat?t.tickFormat.apply(t,n):er:i,v=Math.max(a,0)+u,m=t.range(),y=+m[0]+s,g=+m[m.length-1]+s,k=(t.bandwidth?cr:sr)(t.copy(),s),b=h.selection?h.selection():h,w=b.selectAll(".domain").data([null]),_=b.selectAll(".tick").data(d,t).order(),x=_.exit(),E=_.enter().append("g").attr("class","tick"),S=_.select("line"),I=_.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),_=_.merge(E),S=S.merge(E.append("line").attr("stroke","currentColor").attr(l+"2",c*a)),I=I.merge(E.append("text").attr("fill","currentColor").attr(l,c*v).attr("dy",e===tr?"0em":e===rr?"0.71em":"0.32em")),h!==b&&(w=w.transition(h),_=_.transition(h),S=S.transition(h),I=I.transition(h),x=x.transition(h).attr("opacity",ar).attr("transform",(function(e){return isFinite(e=k(e))?f(e+s):this.getAttribute("transform")})),E.attr("opacity",ar).attr("transform",(function(e){var t=this.parentNode.__axis;return f((t&&isFinite(t=t(e))?t:k(e))+s)}))),x.remove(),w.attr("d",e===ir||e===nr?o?"M"+c*o+","+y+"H"+s+"V"+g+"H"+c*o:"M"+s+","+y+"V"+g:o?"M"+y+","+c*o+"V"+s+"H"+g+"V"+c*o:"M"+y+","+s+"H"+g),_.attr("opacity",1).attr("transform",(function(e){return f(k(e)+s)})),S.attr(l+"2",c*a),I.attr(l,c*v).text(p),b.filter(lr).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===nr?"start":e===ir?"end":"middle"),b.each((function(){this.__axis=k}))}return h.scale=function(e){return arguments.length?(t=e,h):t},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(e){return arguments.length?(n=null==e?[]:Array.from(e),h):n.slice()},h.tickValues=function(e){return arguments.length?(r=null==e?null:Array.from(e),h):r&&r.slice()},h.tickFormat=function(e){return arguments.length?(i=e,h):i},h.tickSize=function(e){return arguments.length?(a=o=+e,h):a},h.tickSizeInner=function(e){return arguments.length?(a=+e,h):a},h.tickSizeOuter=function(e){return arguments.length?(o=+e,h):o},h.tickPadding=function(e){return arguments.length?(u=+e,h):u},h.offset=function(e){return arguments.length?(s=+e,h):s},h}function hr(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dr(){}function pr(e){return null==e?dr:function(){return this.querySelector(e)}}function vr(){return[]}function mr(e){return null==e?vr:function(){return this.querySelectorAll(e)}}function yr(e){return function(){return function(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}(e.apply(this,arguments))}}function gr(e){return function(){return this.matches(e)}}function kr(e){return function(t){return t.matches(e)}}var br=Array.prototype.find;function wr(){return this.firstElementChild}var _r=Array.prototype.filter;function xr(){return Array.from(this.children)}function Er(e){return new Array(e.length)}function Sr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Ir(e,t,n,r,i,a){for(var o,u=0,s=t.length,c=a.length;u<c;++u)(o=t[u])?(o.__data__=a[u],r[u]=o):n[u]=new Sr(e,a[u]);for(;u<s;++u)(o=t[u])&&(i[u]=o)}function Tr(e,t,n,r,i,a,o){var u,s,c,l=new Map,f=t.length,h=a.length,d=new Array(f);for(u=0;u<f;++u)(s=t[u])&&(d[u]=c=o.call(s,s.__data__,u,t)+"",l.has(c)?i[u]=s:l.set(c,s));for(u=0;u<h;++u)c=o.call(e,a[u],u,a)+"",(s=l.get(c))?(r[u]=s,s.__data__=a[u],l.delete(c)):n[u]=new Sr(e,a[u]);for(u=0;u<f;++u)(s=t[u])&&l.get(d[u])===s&&(i[u]=s)}function Cr(e){return e.__data__}function Nr(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function Ar(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}Sr.prototype={constructor:Sr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var Rr="http://www.w3.org/1999/xhtml",Pr={svg:"http://www.w3.org/2000/svg",xhtml:Rr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Dr(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Pr.hasOwnProperty(t)?{space:Pr[t],local:e}:e}function Or(e){return function(){this.removeAttribute(e)}}function Lr(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Mr(e,t){return function(){this.setAttribute(e,t)}}function Fr(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function jr(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Ur(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Vr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Br(e){return function(){this.style.removeProperty(e)}}function zr(e,t,n){return function(){this.style.setProperty(e,t,n)}}function qr(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Kr(e,t){return e.style.getPropertyValue(t)||Vr(e).getComputedStyle(e,null).getPropertyValue(t)}function Hr(e){return function(){delete this[e]}}function Wr(e,t){return function(){this[e]=t}}function Gr(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Qr(e){return e.trim().split(/^|\s+/)}function Yr(e){return e.classList||new Jr(e)}function Jr(e){this._node=e,this._names=Qr(e.getAttribute("class")||"")}function $r(e,t){for(var n=Yr(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Xr(e,t){for(var n=Yr(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Zr(e){return function(){$r(this,e)}}function ei(e){return function(){Xr(this,e)}}function ti(e,t){return function(){(t.apply(this,arguments)?$r:Xr)(this,e)}}function ni(){this.textContent=""}function ri(e){return function(){this.textContent=e}}function ii(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function ai(){this.innerHTML=""}function oi(e){return function(){this.innerHTML=e}}function ui(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function si(){this.nextSibling&&this.parentNode.appendChild(this)}function ci(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function li(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Rr&&t.documentElement.namespaceURI===Rr?t.createElement(e):t.createElementNS(n,e)}}function fi(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function hi(e){var t=Dr(e);return(t.local?fi:li)(t)}function di(){return null}function pi(){var e=this.parentNode;e&&e.removeChild(this)}function vi(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function mi(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function yi(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,a=t.length;r<a;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function gi(e,t,n){return function(){var r,i=this.__on,a=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var o=0,u=i.length;o<u;++o)if((r=i[o]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),void(r.value=t);this.addEventListener(e.type,a,n),r={type:e.type,name:e.name,value:t,listener:a,options:n},i?i.push(r):this.__on=[r]}}function ki(e,t,n){var r=Vr(e),i=r.CustomEvent;"function"===typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function bi(e,t){return function(){return ki(this,e,t)}}function wi(e,t){return function(){return ki(this,e,t.apply(this,arguments))}}function _i(){_i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(N){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),u=new I(i||[]);return r(o,"_invoke",{value:_(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=c;var h={};function d(){}function p(){}function v(){}var m={};s(m,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(T([])));g&&g!==t&&n.call(g,a)&&(m=g);var k=v.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==f(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=x(o,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=v,r(k,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(k),s(k,u,"Generator"),s(k,a,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}Jr.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var xi=_i().mark(Ei);function Ei(){var e,t,n,r,i,a,o;return _i().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:e=this._groups,t=0,n=e.length;case 1:if(!(t<n)){u.next=13;break}r=e[t],i=0,a=r.length;case 3:if(!(i<a)){u.next=10;break}if(!(o=r[i])){u.next=7;break}return u.next=7,o;case 7:++i,u.next=3;break;case 10:++t,u.next=1;break;case 13:case"end":return u.stop()}}),xi,this)}var Si=[null];function Ii(e,t){this._groups=e,this._parents=t}function Ti(){return new Ii([[document.documentElement]],Si)}Ii.prototype=Ti.prototype=hr({constructor:Ii,select:function(e){"function"!==typeof e&&(e=pr(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o,u=t[i],s=u.length,c=r[i]=new Array(s),l=0;l<s;++l)(a=u[l])&&(o=e.call(a,a.__data__,l,u))&&("__data__"in a&&(o.__data__=a.__data__),c[l]=o);return new Ii(r,this._parents)},selectAll:function(e){e="function"===typeof e?yr(e):mr(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o,u=t[a],s=u.length,c=0;c<s;++c)(o=u[c])&&(r.push(e.call(o,o.__data__,c,u)),i.push(o));return new Ii(r,i)},selectChild:function(e){return this.select(null==e?wr:function(e){return function(){return br.call(this.children,e)}}("function"===typeof e?e:kr(e)))},selectChildren:function(e){return this.selectAll(null==e?xr:function(e){return function(){return _r.call(this.children,e)}}("function"===typeof e?e:kr(e)))},filter:function(e){"function"!==typeof e&&(e=gr(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o=t[i],u=o.length,s=r[i]=[],c=0;c<u;++c)(a=o[c])&&e.call(a,a.__data__,c,o)&&s.push(a);return new Ii(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Cr);var n=t?Tr:Ir,r=this._parents,i=this._groups;"function"!==typeof e&&(e=function(e){return function(){return e}}(e));for(var a=i.length,o=new Array(a),u=new Array(a),s=new Array(a),c=0;c<a;++c){var l=r[c],f=i[c],h=f.length,d=Nr(e.call(l,l&&l.__data__,c,r)),p=d.length,v=u[c]=new Array(p),m=o[c]=new Array(p);n(l,f,v,m,s[c]=new Array(h),d,t);for(var y,g,k=0,b=0;k<p;++k)if(y=v[k]){for(k>=b&&(b=k+1);!(g=m[b])&&++b<p;);y._next=g||null}}return(o=new Ii(o,r))._enter=u,o._exit=s,o},enter:function(){return new Ii(this._enter||this._groups.map(Er),this._parents)},exit:function(){return new Ii(this._exit||this._groups.map(Er),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,a=this.exit();return"function"===typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(i=t(i))&&(i=i.selection()),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),u=new Array(i),s=0;s<o;++s)for(var c,l=n[s],f=r[s],h=l.length,d=u[s]=new Array(h),p=0;p<h;++p)(c=l[p]||f[p])&&(d[p]=c);for(;s<i;++s)u[s]=n[s];return new Ii(u,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Ar);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,u=n[a],s=u.length,c=i[a]=new Array(s),l=0;l<s;++l)(o=u[l])&&(c[l]=o);c.sort(t)}return new Ii(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){var e,t=0,n=T(this);try{for(n.s();!(e=n.n()).done;){e.value;++t}}catch(r){n.e(r)}finally{n.f()}return t},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,a=t[n],o=0,u=a.length;o<u;++o)(i=a[o])&&e.call(i,i.__data__,o,a);return this},attr:function(e,t){var n=Dr(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?Lr:Or:"function"===typeof t?n.local?Ur:jr:n.local?Fr:Mr)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Br:"function"===typeof t?qr:zr)(e,t,null==n?"":n)):Kr(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Hr:"function"===typeof t?Gr:Wr)(e,t)):this.node()[e]},classed:function(e,t){var n=Qr(e+"");if(arguments.length<2){for(var r=Yr(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof t?ti:t?Zr:ei)(n,t))},text:function(e){return arguments.length?this.each(null==e?ni:("function"===typeof e?ii:ri)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?ai:("function"===typeof e?ui:oi)(e)):this.node().innerHTML},raise:function(){return this.each(si)},lower:function(){return this.each(ci)},append:function(e){var t="function"===typeof e?e:hi(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:hi(e),r=null==t?di:"function"===typeof t?t:pr(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(pi)},clone:function(e){return this.select(e?mi:vi)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,a=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),o=a.length;if(!(arguments.length<2)){for(u=t?gi:yi,r=0;r<o;++r)this.each(u(a[r],t,n));return this}var u=this.node().__on;if(u)for(var s,c=0,l=u.length;c<l;++c)for(r=0,s=u[c];r<o;++r)if((i=a[r]).type===s.type&&i.name===s.name)return s.value},dispatch:function(e,t){return this.each(("function"===typeof t?wi:bi)(e,t))}},Symbol.iterator,Ei);var Ci=Ti,Ni={value:function(){}};function Ai(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new Ri(r)}function Ri(e){this._=e}function Pi(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function Di(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Ni,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}Ri.prototype=Ai.prototype={constructor:Ri,on:function(e,t){var n,r,i=this._,a=(r=i,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),o=-1,u=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++o<u;)if(n=(e=a[o]).type)i[n]=Di(i[n],e.name,t);else if(null==t)for(n in i)i[n]=Di(i[n],e.name,null);return this}for(;++o<u;)if((n=(e=a[o]).type)&&(n=Pi(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ri(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(r=this._[e]).length;a<n;++a)r[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};var Oi,Li,Mi=Ai,Fi=0,ji=0,Ui=0,Vi=1e3,Bi=0,zi=0,qi=0,Ki="object"===typeof performance&&performance.now?performance:Date,Hi="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Wi(){return zi||(Hi(Gi),zi=Ki.now()+qi)}function Gi(){zi=0}function Qi(){this._call=this._time=this._next=null}function Yi(e,t,n){var r=new Qi;return r.restart(e,t,n),r}function Ji(){zi=(Bi=Ki.now())+qi,Fi=ji=0;try{!function(){Wi(),++Fi;for(var e,t=Oi;t;)(e=zi-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Fi}()}finally{Fi=0,function(){var e,t,n=Oi,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Oi=t);Li=e,Xi(r)}(),zi=0}}function $i(){var e=Ki.now(),t=e-Bi;t>Vi&&(qi-=t,Bi=e)}function Xi(e){Fi||(ji&&(ji=clearTimeout(ji)),e-zi>24?(e<1/0&&(ji=setTimeout(Ji,e-Ki.now()-qi)),Ui&&(Ui=clearInterval(Ui))):(Ui||(Bi=Ki.now(),Ui=setInterval($i,Vi)),Fi=1,Hi(Ji)))}function Zi(e,t,n){var r=new Qi;return t=null==t?0:+t,r.restart((function(n){r.stop(),e(n+t)}),t,n),r}Qi.prototype=Yi.prototype={constructor:Qi,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?Wi():+n)+(null==t?0:+t),this._next||Li===this||(Li?Li._next=this:Oi=this,Li=this),this._call=e,this._time=n,Xi()},stop:function(){this._call&&(this._call=null,this._time=1/0,Xi())}};var ea=Mi("start","end","cancel","interrupt"),ta=[],na=0,ra=1,ia=2,aa=3,oa=4,ua=5,sa=6;function ca(e,t,n,r,i,a){var o=e.__transition;if(o){if(n in o)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function a(e){n.state=ra,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)}function o(a){var c,l,f,h;if(n.state!==ra)return s();for(c in i)if((h=i[c]).name===n.name){if(h.state===aa)return Zi(o);h.state===oa?(h.state=sa,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete i[c]):+c<t&&(h.state=sa,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete i[c])}if(Zi((function(){n.state===aa&&(n.state=oa,n.timer.restart(u,n.delay,n.time),u(a))})),n.state=ia,n.on.call("start",e,e.__data__,n.index,n.group),n.state===ia){for(n.state=aa,r=new Array(f=n.tween.length),c=0,l=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++l]=h);r.length=l+1}}function u(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=ua,1),a=-1,o=r.length;++a<o;)r[a].call(e,i);n.state===ua&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var r in n.state=sa,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=Yi(a,0,n.time)}(e,n,{name:t,index:r,group:i,on:ea,tween:ta,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:na})}function la(e,t){var n=ha(e,t);if(n.state>na)throw new Error("too late; already scheduled");return n}function fa(e,t){var n=ha(e,t);if(n.state>aa)throw new Error("too late; already running");return n}function ha(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function da(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var pa,va=180/Math.PI,ma={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ya(e,t,n,r,i,a){var o,u,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*va,skewX:Math.atan(s)*va,scaleX:o,scaleY:u}}function ga(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(a,o){var u=[],s=[];return a=e(a),o=e(o),function(e,r,i,a,o,u){if(e!==i||r!==a){var s=o.push("translate(",null,t,null,n);u.push({i:s-4,x:da(e,i)},{i:s-2,x:da(r,a)})}else(i||a)&&o.push("translate("+i+t+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,u,s),function(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:da(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(a.rotate,o.rotate,u,s),function(e,t,n,a){e!==t?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:da(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(a.skewX,o.skewX,u,s),function(e,t,n,r,a,o){if(e!==n||t!==r){var u=a.push(i(a)+"scale(",null,",",null,")");o.push({i:u-4,x:da(e,n)},{i:u-2,x:da(t,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,u,s),a=o=null,function(e){for(var t,n=-1,r=s.length;++n<r;)u[(t=s[n]).i]=t.x(e);return u.join("")}}}var ka=ga((function(e){var t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ma:ya(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),ba=ga((function(e){return null==e?ma:(pa||(pa=document.createElementNS("http://www.w3.org/2000/svg","g")),pa.setAttribute("transform",e),(e=pa.transform.baseVal.consolidate())?ya((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):ma)}),", ",")",")");function wa(e,t){var n,r;return function(){var i=fa(this,e),a=i.tween;if(a!==n)for(var o=0,u=(r=n=a).length;o<u;++o)if(r[o].name===t){(r=r.slice()).splice(o,1);break}i.tween=r}}function _a(e,t,n){var r,i;if("function"!==typeof n)throw new Error;return function(){var a=fa(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var u={name:t,value:n},s=0,c=i.length;s<c;++s)if(i[s].name===t){i[s]=u;break}s===c&&i.push(u)}a.tween=i}}function xa(e,t,n){var r=e._id;return e.each((function(){var e=fa(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return ha(e,r).value[t]}}function Ea(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Sa(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ia(){}var Ta=.7,Ca=1/Ta,Na="\\s*([+-]?\\d+)\\s*",Aa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ra="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Pa=/^#([0-9a-f]{3,8})$/,Da=new RegExp("^rgb\\(".concat(Na,",").concat(Na,",").concat(Na,"\\)$")),Oa=new RegExp("^rgb\\(".concat(Ra,",").concat(Ra,",").concat(Ra,"\\)$")),La=new RegExp("^rgba\\(".concat(Na,",").concat(Na,",").concat(Na,",").concat(Aa,"\\)$")),Ma=new RegExp("^rgba\\(".concat(Ra,",").concat(Ra,",").concat(Ra,",").concat(Aa,"\\)$")),Fa=new RegExp("^hsl\\(".concat(Aa,",").concat(Ra,",").concat(Ra,"\\)$")),ja=new RegExp("^hsla\\(".concat(Aa,",").concat(Ra,",").concat(Ra,",").concat(Aa,"\\)$")),Ua={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Va(){return this.rgb().formatHex()}function Ba(){return this.rgb().formatRgb()}function za(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Pa.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?qa(t):3===n?new Wa(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Ka(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Ka(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Da.exec(e))?new Wa(t[1],t[2],t[3],1):(t=Oa.exec(e))?new Wa(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=La.exec(e))?Ka(t[1],t[2],t[3],t[4]):(t=Ma.exec(e))?Ka(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Fa.exec(e))?Xa(t[1],t[2]/100,t[3]/100,1):(t=ja.exec(e))?Xa(t[1],t[2]/100,t[3]/100,t[4]):Ua.hasOwnProperty(e)?qa(Ua[e]):"transparent"===e?new Wa(NaN,NaN,NaN,0):null}function qa(e){return new Wa(e>>16&255,e>>8&255,255&e,1)}function Ka(e,t,n,r){return r<=0&&(e=t=n=NaN),new Wa(e,t,n,r)}function Ha(e,t,n,r){return 1===arguments.length?((i=e)instanceof Ia||(i=za(i)),i?new Wa((i=i.rgb()).r,i.g,i.b,i.opacity):new Wa):new Wa(e,t,n,null==r?1:r);var i}function Wa(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Ga(){return"#".concat($a(this.r)).concat($a(this.g)).concat($a(this.b))}function Qa(){var e=Ya(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(Ja(this.r),", ").concat(Ja(this.g),", ").concat(Ja(this.b)).concat(1===e?")":", ".concat(e,")"))}function Ya(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ja(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function $a(e){return((e=Ja(e))<16?"0":"")+e.toString(16)}function Xa(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new eo(e,t,n,r)}function Za(e){if(e instanceof eo)return new eo(e.h,e.s,e.l,e.opacity);if(e instanceof Ia||(e=za(e)),!e)return new eo;if(e instanceof eo)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,u=a-i,s=(a+i)/2;return u?(o=t===a?(n-r)/u+6*(n<r):n===a?(r-t)/u+2:(t-n)/u+4,u/=s<.5?a+i:2-a-i,o*=60):u=s>0&&s<1?0:o,new eo(o,u,s,e.opacity)}function eo(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function to(e){return(e=(e||0)%360)<0?e+360:e}function no(e){return Math.max(0,Math.min(1,e||0))}function ro(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function io(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}Ea(Ia,za,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Va,formatHex:Va,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Za(this).formatHsl()},formatRgb:Ba,toString:Ba}),Ea(Wa,Ha,Sa(Ia,{brighter:function(e){return e=null==e?Ca:Math.pow(Ca,e),new Wa(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Ta:Math.pow(Ta,e),new Wa(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new Wa(Ja(this.r),Ja(this.g),Ja(this.b),Ya(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ga,formatHex:Ga,formatHex8:function(){return"#".concat($a(this.r)).concat($a(this.g)).concat($a(this.b)).concat($a(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:Qa,toString:Qa})),Ea(eo,(function(e,t,n,r){return 1===arguments.length?Za(e):new eo(e,t,n,null==r?1:r)}),Sa(Ia,{brighter:function(e){return e=null==e?Ca:Math.pow(Ca,e),new eo(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Ta:Math.pow(Ta,e),new eo(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Wa(ro(e>=240?e-240:e+120,i,r),ro(e,i,r),ro(e<120?e+240:e-120,i,r),this.opacity)},clamp:function(){return new eo(to(this.h),no(this.s),no(this.l),Ya(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=Ya(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(to(this.h),", ").concat(100*no(this.s),"%, ").concat(100*no(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));var ao=function(e){return function(){return e}};function oo(e,t){return function(n){return e+n*t}}function uo(e){return 1===(e=+e)?so:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):ao(isNaN(t)?n:t)}}function so(e,t){var n=t-e;return n?oo(e,n):ao(isNaN(e)?t:e)}var co=function e(t){var n=uo(t);function r(e,t){var r=n((e=Ha(e)).r,(t=Ha(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=so(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function lo(e){return function(t){var n,r,i=t.length,a=new Array(i),o=new Array(i),u=new Array(i);for(n=0;n<i;++n)r=Ha(t[n]),a[n]=r.r||0,o[n]=r.g||0,u[n]=r.b||0;return a=e(a),o=e(o),u=e(u),r.opacity=1,function(e){return r.r=a(e),r.g=o(e),r.b=u(e),r+""}}}lo((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,u=r<t-1?e[r+2]:2*a-i;return io((n-r/t)*t,o,i,a,u)}})),lo((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],a=e[r%t],o=e[(r+1)%t],u=e[(r+2)%t];return io((n-r/t)*t,i,a,o,u)}}));var fo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ho=new RegExp(fo.source,"g");function po(e,t){var n,r,i,a=fo.lastIndex=ho.lastIndex=0,o=-1,u=[],s=[];for(e+="",t+="";(n=fo.exec(e))&&(r=ho.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),u[o]?u[o]+=i:u[++o]=i),(n=n[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,s.push({i:o,x:da(n,r)})),a=ho.lastIndex;return a<t.length&&(i=t.slice(a),u[o]?u[o]+=i:u[++o]=i),u.length<2?s[0]?function(e){return function(t){return e(t)+""}}(s[0].x):function(e){return function(){return e}}(t):(t=s.length,function(e){for(var n,r=0;r<t;++r)u[(n=s[r]).i]=n.x(e);return u.join("")})}function vo(e,t){var n;return("number"===typeof t?da:t instanceof za?co:(n=za(t))?(t=n,co):po)(e,t)}function mo(e){return function(){this.removeAttribute(e)}}function yo(e){return function(){this.removeAttributeNS(e.space,e.local)}}function go(e,t,n){var r,i,a=n+"";return function(){var o=this.getAttribute(e);return o===a?null:o===r?i:i=t(r=o,n)}}function ko(e,t,n){var r,i,a=n+"";return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===r?i:i=t(r=o,n)}}function bo(e,t,n){var r,i,a;return function(){var o,u,s=n(this);if(null!=s)return(o=this.getAttribute(e))===(u=s+"")?null:o===r&&u===i?a:(i=u,a=t(r=o,s));this.removeAttribute(e)}}function wo(e,t,n){var r,i,a;return function(){var o,u,s=n(this);if(null!=s)return(o=this.getAttributeNS(e.space,e.local))===(u=s+"")?null:o===r&&u===i?a:(i=u,a=t(r=o,s));this.removeAttributeNS(e.space,e.local)}}function _o(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,i)),n}return i._value=t,i}function xo(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,i)),n}return i._value=t,i}function Eo(e,t){return function(){la(this,e).delay=+t.apply(this,arguments)}}function So(e,t){return t=+t,function(){la(this,e).delay=t}}function Io(e,t){return function(){fa(this,e).duration=+t.apply(this,arguments)}}function To(e,t){return t=+t,function(){fa(this,e).duration=t}}var Co=Ci.prototype.constructor;function No(e){return function(){this.style.removeProperty(e)}}var Ao=0;function Ro(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Po(){return++Ao}var Do=Ci.prototype;Ro.prototype=function(e){return Ci().transition(e)}.prototype=hr({constructor:Ro,select:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=pr(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var u,s,c=r[o],l=c.length,f=a[o]=new Array(l),h=0;h<l;++h)(u=c[h])&&(s=e.call(u,u.__data__,h,c))&&("__data__"in u&&(s.__data__=u.__data__),f[h]=s,ca(f[h],t,n,h,f,ha(u,n)));return new Ro(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=mr(e));for(var r=this._groups,i=r.length,a=[],o=[],u=0;u<i;++u)for(var s,c=r[u],l=c.length,f=0;f<l;++f)if(s=c[f]){for(var h,d=e.call(s,s.__data__,f,c),p=ha(s,n),v=0,m=d.length;v<m;++v)(h=d[v])&&ca(h,t,n,v,d,p);a.push(d),o.push(s)}return new Ro(a,o,t,n)},selectChild:Do.selectChild,selectChildren:Do.selectChildren,filter:function(e){"function"!==typeof e&&(e=gr(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o=t[i],u=o.length,s=r[i]=[],c=0;c<u;++c)(a=o[c])&&e.call(a,a.__data__,c,o)&&s.push(a);return new Ro(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var s,c=t[u],l=n[u],f=c.length,h=o[u]=new Array(f),d=0;d<f;++d)(s=c[d]||l[d])&&(h[d]=s);for(;u<r;++u)o[u]=t[u];return new Ro(o,this._parents,this._name,this._id)},selection:function(){return new Co(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Po(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,u=r[a],s=u.length,c=0;c<s;++c)if(o=u[c]){var l=ha(o,t);ca(o,e,n,c,u,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Ro(r,this._parents,e,n)},call:Do.call,nodes:Do.nodes,node:Do.node,size:Do.size,empty:Do.empty,each:Do.each,on:function(e,t){var n=this._id;return arguments.length<2?ha(this.node(),n).on.on(e):this.each(function(e,t,n){var r,i,a=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?la:fa;return function(){var o=a(this,e),u=o.on;u!==r&&(i=(r=u).copy()).on(t,n),o.on=i}}(n,e,t))},attr:function(e,t){var n=Dr(e),r="transform"===n?ba:vo;return this.attrTween(e,"function"===typeof t?(n.local?wo:bo)(n,r,xa(this,"attr."+e,t)):null==t?(n.local?yo:mo)(n):(n.local?ko:go)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var r=Dr(e);return this.tween(n,(r.local?_o:xo)(r,t))},style:function(e,t,n){var r="transform"===(e+="")?ka:vo;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var a=Kr(this,e),o=(this.style.removeProperty(e),Kr(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}(e,r)).on("end.style."+e,No(e)):"function"===typeof t?this.styleTween(e,function(e,t,n){var r,i,a;return function(){var o=Kr(this,e),u=n(this),s=u+"";return null==u&&(this.style.removeProperty(e),s=u=Kr(this,e)),o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u))}}(e,r,xa(this,"style."+e,t))).each(function(e,t){var n,r,i,a,o="style."+t,u="end."+o;return function(){var s=fa(this,e),c=s.on,l=null==s.value[o]?a||(a=No(t)):void 0;c===n&&i===l||(r=(n=c).copy()).on(u,i=l),s.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,a=n+"";return function(){var o=Kr(this,e);return o===a?null:o===r?i:i=t(r=o,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!==typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,i;function a(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,a,n)),r}return a._value=t,a}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"===typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(xa(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=ha(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===e)return r.value;return null}return this.each((null==t?wa:_a)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?Eo:So)(t,e)):ha(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?Io:To)(t,e)):ha(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!==typeof t)throw new Error;return function(){fa(this,e).ease=t}}(t,e)):ha(this.node(),t).ease},easeVarying:function(e){if("function"!==typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!==typeof n)throw new Error;fa(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(a,o){var u={value:o},s={value:function(){0===--i&&a()}};n.each((function(){var n=fa(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(u),t._.interrupt.push(u),t._.end.push(s)),n.on=t})),0===i&&a()}))}},Symbol.iterator,Do[Symbol.iterator]);var Oo={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Lo(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error("transition ".concat(t," not found"));return n}Ci.prototype.interrupt=function(e){return this.each((function(){!function(e,t){var n,r,i,a=e.__transition,o=!0;if(a){for(i in t=null==t?null:t+"",a)(n=a[i]).name===t?(r=n.state>ia&&n.state<ua,n.state=sa,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete e.__transition}}(this,e)}))},Ci.prototype.transition=function(e){var t,n;e instanceof Ro?(t=e._id,e=e._name):(t=Po(),(n=Oo).time=Wi(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,u=r[a],s=u.length,c=0;c<s;++c)(o=u[c])&&ca(o,e,t,c,u,n||Lo(o,t));return new Ro(r,this._parents,e,t)};Math.abs,Math.max,Math.min;function Mo(e){return[+e[0],+e[1]]}function Fo(e){return[Mo(e[0]),Mo(e[1])]}["w","e"].map(jo),["n","s"].map(jo),["n","w","e","s","nw","ne","sw","se"].map(jo);function jo(e){return{type:e}}function Uo(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}var Vo=Symbol("implicit");function Bo(){var e=new Wn,t=[],n=[],r=Vo;function i(i){var a=e.get(i);if(void 0===a){if(r!==Vo)return r;e.set(i,a=t.push(i)-1)}return n[a%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Wn;var r,a=T(n);try{for(a.s();!(r=a.n()).done;){var o=r.value;e.has(o)||e.set(o,t.push(o)-1)}}catch(u){a.e(u)}finally{a.f()}return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return Bo(t,n).unknown(r)},Uo.apply(i,arguments),i}function zo(){var e,t,n=Bo().unknown(void 0),r=n.domain,i=n.range,a=0,o=1,u=!1,s=0,c=0,l=.5;function f(){var n=r().length,f=o<a,h=f?o:a,d=f?a:o;e=(d-h)/Math.max(1,n-s+2*c),u&&(e=Math.floor(e)),h+=(d-h-e*(n-s))*l,t=e*(1-s),u&&(h=Math.round(h),t=Math.round(t));var p=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a}(n).map((function(t){return h+e*t}));return i(f?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),f()):r()},n.range=function(e){var t;return arguments.length?(t=S(e,2),a=t[0],o=t[1],a=+a,o=+o,f()):[a,o]},n.rangeRound=function(e){var t;return t=S(e,2),a=t[0],o=t[1],a=+a,o=+o,u=!0,f()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(u=!!e,f()):u},n.padding=function(e){return arguments.length?(s=Math.min(1,c=+e),f()):s},n.paddingInner=function(e){return arguments.length?(s=Math.min(1,e),f()):s},n.paddingOuter=function(e){return arguments.length?(c=+e,f()):c},n.align=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),f()):l},n.copy=function(){return zo(r(),[a,o]).round(u).paddingInner(s).paddingOuter(c).align(l)},Uo.apply(f(),arguments)}var qo=Math.sqrt(50),Ko=Math.sqrt(10),Ho=Math.sqrt(2);function Wo(e,t,n){var r,i,a,o=(t-e)/Math.max(0,n),u=Math.floor(Math.log10(o)),s=o/Math.pow(10,u),c=s>=qo?10:s>=Ko?5:s>=Ho?2:1;return u<0?(a=Math.pow(10,-u)/c,(r=Math.round(e*a))/a<e&&++r,(i=Math.round(t*a))/a>t&&--i,a=-a):(a=Math.pow(10,u)*c,(r=Math.round(e/a))*a<e&&++r,(i=Math.round(t/a))*a>t&&--i),i<r&&.5<=n&&n<2?Wo(e,t,2*n):[r,i,a]}function Go(e,t,n){return Wo(e=+e,t=+t,n=+n)[2]}function Qo(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Yo(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Jo(e){var t,n,r;function i(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(i<a){if(0!==t(r,r))return a;do{var o=i+a>>>1;n(e[o],r)<0?i=o+1:a=o}while(i<a)}return i}return 2!==e.length?(t=Qo,n=function(t,n){return Qo(e(t),n)},r=function(t,n){return e(t)-n}):(t=e===Qo||e===Yo?e:$o,n=e,r=e),{left:i,center:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=i(e,t,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return a>n&&r(e[a-1],t)>-r(e[a],t)?a-1:a},right:function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(i<a){if(0!==t(r,r))return a;do{var o=i+a>>>1;n(e[o],r)<=0?i=o+1:a=o}while(i<a)}return i}}}function $o(){return 0}var Xo=Jo(Qo),Zo=Xo.right,eu=(Xo.left,Jo((function(e){return null===e?NaN:+e})).center,Zo);function tu(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=au(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}}function nu(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ru(e,t){var n,r={},i={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=au(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}function iu(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}}function au(e,t){var n,r=typeof t;return null==t||"boolean"===r?ao(t):("number"===r?da:"string"===r?(n=za(t))?(t=n,co):po:t instanceof za?co:t instanceof Date?nu:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?iu:Array.isArray(t)?tu:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?ru:da)(e,t)}function ou(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function uu(e){return+e}var su=[0,1];function cu(e){return e}function lu(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function fu(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=lu(i,r),a=n(o,a)):(r=lu(r,i),a=n(a,o)),function(e){return a(r(e))}}function hu(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=lu(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(t){var n=eu(e,t,1,r)-1;return a[n](i[n](t))}}function du(){var e,t,n,r,i,a,o=su,u=su,s=au,c=cu;function l(){var e=Math.min(o.length,u.length);return c!==cu&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(o[0],o[e-1])),r=e>2?hu:fu,i=a=null,f}function f(t){return null==t||isNaN(t=+t)?n:(i||(i=r(o.map(e),u,s)))(e(c(t)))}return f.invert=function(n){return c(t((a||(a=r(u,o.map(e),da)))(n)))},f.domain=function(e){return arguments.length?(o=Array.from(e,uu),l()):o.slice()},f.range=function(e){return arguments.length?(u=Array.from(e),l()):u.slice()},f.rangeRound=function(e){return u=Array.from(e),s=ou,l()},f.clamp=function(e){return arguments.length?(c=!!e||cu,l()):c!==cu},f.interpolate=function(e){return arguments.length?(s=e,l()):s},f.unknown=function(e){return arguments.length?(n=e,f):n},function(n,r){return e=n,t=r,l()}}var pu,vu=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function mu(e){if(!(t=vu.exec(e)))throw new Error("invalid format: "+e);var t;return new yu({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function yu(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function gu(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function ku(e){return(e=gu(Math.abs(e)))?e[1]:NaN}function bu(e,t){var n=gu(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}mu.prototype=yu.prototype,yu.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var wu={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return bu(100*e,t)},r:bu,s:function(e,t){var n=gu(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(pu=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+gu(e,Math.max(0,t+a-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function _u(e){return e}var xu,Eu,Su,Iu=Array.prototype.map,Tu=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function Cu(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?_u:(t=Iu.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,a=[],o=0,u=t[0],s=0;i>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),a.push(e.substring(i-=u,i+u)),!((s+=u+1)>r));)u=t[o=(o+1)%t.length];return a.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",u=void 0===e.numerals?_u:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Iu.call(e.numerals,String)),s=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",l=void 0===e.nan?"NaN":e.nan+"";function f(e){var t=(e=mu(e)).fill,n=e.align,f=e.sign,h=e.symbol,d=e.zero,p=e.width,v=e.comma,m=e.precision,y=e.trim,g=e.type;"n"===g?(v=!0,g="g"):wu[g]||(void 0===m&&(m=12),y=!0,g="g"),(d||"0"===t&&"="===n)&&(d=!0,t="0",n="=");var k="$"===h?i:"#"===h&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",b="$"===h?a:/[%p]/.test(g)?s:"",w=wu[g],_=/[defgprs%]/.test(g);function x(e){var i,a,s,h=k,x=b;if("c"===g)x=w(e)+x,e="";else{var E=(e=+e)<0||1/e<0;if(e=isNaN(e)?l:w(Math.abs(e),m),y&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),E&&0===+e&&"+"!==f&&(E=!1),h=(E?"("===f?f:c:"-"===f||"("===f?"":f)+h,x=("s"===g?Tu[8+pu/3]:"")+x+(E&&"("===f?")":""),_)for(i=-1,a=e.length;++i<a;)if(48>(s=e.charCodeAt(i))||s>57){x=(46===s?o+e.slice(i+1):e.slice(i))+x,e=e.slice(0,i);break}}v&&!d&&(e=r(e,1/0));var S=h.length+e.length+x.length,I=S<p?new Array(p-S+1).join(t):"";switch(v&&d&&(e=r(I+e,I.length?p-x.length:1/0),I=""),n){case"<":e=h+e+x+I;break;case"=":e=h+I+e+x;break;case"^":e=I.slice(0,S=I.length>>1)+h+e+x+I.slice(S);break;default:e=I+h+e+x}return u(e)}return m=void 0===m?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),x.toString=function(){return e+""},x}return{format:f,formatPrefix:function(e,t){var n=f(((e=mu(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(ku(t)/3))),i=Math.pow(10,-r),a=Tu[8+r/3];return function(e){return n(i*e)+a}}}}function Nu(e,t,n,r){var i,a=function(e,t,n){n=+n;var r=(t=+t)<(e=+e),i=r?Go(t,e,n):Go(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}(e,t,n);switch((r=mu(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ku(t)/3)))-ku(Math.abs(e)))}(a,o))||(r.precision=i),Su(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ku(t)-ku(e))+1}(a,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-ku(Math.abs(e)))}(a))||(r.precision=i-2*("%"===r.type))}return Eu(r)}function Au(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];var r=t<e,i=S(r?Wo(t,e,n):Wo(e,t,n),3),a=i[0],o=i[1],u=i[2];if(!(o>=a))return[];var s=o-a+1,c=new Array(s);if(r)if(u<0)for(var l=0;l<s;++l)c[l]=(o-l)/-u;else for(var f=0;f<s;++f)c[f]=(o-f)*u;else if(u<0)for(var h=0;h<s;++h)c[h]=(a+h)/-u;else for(var d=0;d<s;++d)c[d]=(a+d)*u;return c}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return Nu(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,a=t(),o=0,u=a.length-1,s=a[o],c=a[u],l=10;for(c<s&&(i=s,s=c,c=i,i=o,o=u,u=i);l-- >0;){if((i=Go(s,c,n))===r)return a[o]=s,a[u]=c,t(a);if(i>0)s=Math.floor(s/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;s=Math.ceil(s*i)/i,c=Math.floor(c*i)/i}r=i}return e},e}function Ru(){var e=du()(cu,cu);return e.copy=function(){return t=e,Ru().domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown());var t},Uo.apply(e,arguments),Au(e)}function Pu(e,t,n){this.k=e,this.x=t,this.y=n}xu=Cu({thousands:",",grouping:[3],currency:["$",""]}),Eu=xu.format,Su=xu.formatPrefix,Pu.prototype={constructor:Pu,scale:function(e){return 1===e?this:new Pu(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Pu(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new Pu(1,0,0);Pu.prototype;var Du=function(){var e=S((0,r.useState)([]),2),t=e[0],n=e[1],i=S((0,r.useState)(""),2),a=i[0],o=i[1];(0,r.useEffect)((function(){Cn.get("http://localhost:".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.PORT,"/todos")).then((function(e){var t=e.data;console.log(t),n(t)}))}),[]);var u=a?t.filter((function(e){return e.status===a})):t;function s(e){var t=e.data,n=e.index,r=t._id,i=t.title,a=t.dueDate,o=t.description,u=t.status,s=t.user,l=n+1;return(0,Vn.jsxs)("tr",{children:[(0,Vn.jsx)("th",{children:l}),(0,Vn.jsx)("td",{children:i}),(0,Vn.jsx)("td",{children:o}),(0,Vn.jsx)("td",{children:u}),(0,Vn.jsx)("td",{children:a}),(0,Vn.jsx)("td",{children:s}),(0,Vn.jsx)("td",{children:(0,Vn.jsx)(Fn,{to:"/admin/".concat(r),children:(0,Vn.jsx)("buton",{type:"button",className:"btn btn-primary",children:"Edit"})})}),(0,Vn.jsx)("td",{children:(0,Vn.jsx)("buton",{type:"button",className:"btn btn-danger",name:r,onClick:function(){c(r)},children:"Delete"})})]},r)}var c=function(e){Cn.delete("http://localhost:".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.PORT,"/todos/").concat(e)).then((function(){Cn.get("http://localhost:".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.PORT,"/todos")).then((function(e){return n(e.data)})).catch((function(e){return console.error(e)}))})).catch((function(e){return console.error(e)}))};(0,r.useEffect)((function(){l()}),[]);var l=function(){Cn.get("http://localhost:".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.PORT,"/todos")).then((function(e){n(e.data)})).catch((function(e){console.error("Error fetching data:",e)}))};(0,r.useEffect)((function(){t.length>0&&f()}),[t,a,u]);var f=function(){var e=$n(u,(function(e){return e.length}),(function(e){return e.status})),t=400,n=20,r=20,i=50,a=50,o=function(e){return"string"===typeof e?new Ii([[document.querySelector(e)]],[document.documentElement]):new Ii([[e]],Si)}("#bar-chart").attr("width",600).attr("height",t),s=zo().domain(e.map((function(e){return e[0]}))).range([a,600-r]).padding(.1),c=Ru().domain([0,Zn(e,(function(e){return e[1]}))]).range([t-i,n]);o.selectAll("rect").data(e).enter().append("rect").attr("x",(function(e){return s(e[0])})).attr("y",(function(e){return c(e[1])})).attr("width",s.bandwidth()).attr("height",(function(e){return t-i-c(e[1])})).attr("fill","steelblue"),o.append("g").attr("transform","translate(0,".concat(t-i,")")).call(fr(rr,s)),o.append("g").attr("transform","translate(".concat(a,",0)")).call(function(e){return fr(ir,e)}(c)),o.append("text").attr("x",300).attr("y",390).attr("text-anchor","middle").text("Status"),o.append("text").attr("x",-200).attr("y",10).attr("text-anchor","middle").attr("transform","rotate(-90)").text("Number of Tasks")};return(0,Vn.jsxs)("div",{children:[(0,Vn.jsx)(Bn,{}),(0,Vn.jsx)("svg",{id:"bar-chart"}),(0,Vn.jsxs)("div",{className:"col-8 table-responsive showData",children:[(0,Vn.jsx)("div",{children:(0,Vn.jsxs)("label",{children:["Filter by Status:",(0,Vn.jsxs)("select",{value:a,onChange:function(e){o(e.target.value)},children:[(0,Vn.jsx)("option",{value:"",children:"All"}),(0,Vn.jsx)("option",{value:"Pending",children:"Pending"}),(0,Vn.jsx)("option",{value:"In Progress",children:"In Progress"}),(0,Vn.jsx)("option",{value:"Completed",children:"Completed"})]})]})}),(0,Vn.jsxs)("table",{className:"table",children:[(0,Vn.jsx)("thead",{children:(0,Vn.jsxs)("tr",{children:[(0,Vn.jsx)("th",{scope:"col",children:"#"}),(0,Vn.jsx)("th",{scope:"col",children:"Title"}),(0,Vn.jsx)("th",{scope:"col",children:"Description"}),(0,Vn.jsx)("th",{scope:"col",children:"Status"}),(0,Vn.jsx)("th",{scope:"col",children:"Due-Date"}),(0,Vn.jsx)("th",{scope:"col",children:"User"})]})}),(0,Vn.jsx)("tbody",{className:"table-group-divider",id:"tableBody",children:u.map((function(e,t){return(0,Vn.jsx)(s,{data:e,index:t})}))})]})]}),(0,Vn.jsx)(zn,{})]})},Ou=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Lu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ou(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new Mu;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Mu=function(e){m(n,e);var t=b(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return p(n)}(_(Error)),Fu=function(e){return function(e){var t=Ou(e);return Lu.encodeByteArray(t,!0)}(e).replace(/\./g,"")},ju=function(e){try{return Lu.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Uu(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Uu(e[n],t[n]));return e}var Vu=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},Bu=function(){try{return Vu()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&ju(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},zu=function(){var e;return null===(e=Bu())||void 0===e?void 0:e.config},qu=function(){function e(){var t=this;l(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return p(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Ku(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Hu(){var e,t=null===(e=Bu())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function Wu(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Gu(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Qu(){var e=Ku();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Yu(){try{return"object"===typeof indexedDB}catch(e){return!1}}var Ju=function(e){m(n,e);var t=b(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(k(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(k(a),$u.prototype.create),a}return p(n)}(_(Error)),$u=function(){function e(t,n,r){l(this,e),this.service=t,this.serviceName=n,this.errors=r}return p(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Xu,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Ju(n,a,t)}}]),e}();var Xu=/\{\$([^}]+)}/g;function Zu(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function es(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ts(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(ns(u)&&ns(s)){if(!ts(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function ns(e){return null!==e&&"object"===typeof e}function rs(e){for(var t=[],n=function(){var e=S(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function is(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=S(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function as(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function os(e,t){var n=new us(e,t);return n.subscribe.bind(n)}var us=function(){function e(t,n){var r=this;l(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return p(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=T(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ss),void 0===r.error&&(r.error=ss),void 0===r.complete&&(r.complete=ss);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function ss(){}function cs(e){return e&&e._delegate?e._delegate:e}function ls(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function fs(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){ls(a,r,i,o,u,"next",e)}function u(e){ls(a,r,i,o,u,"throw",e)}o(void 0)}))}}var hs=function(){function e(t,n,r){l(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return p(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),ds="[DEFAULT]",ps=function(){function e(t,n){l(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return p(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new qu;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ds})}catch(s){}var t,n=T(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=S(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ds;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=fs(_i().mark((function e(){var t;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(c(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),c(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ds;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ds;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=T(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=S(i.value,2),s=u[0],c=u[1];r===this.normalizeInstanceIdentifier(s)&&c.resolve(a)}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===ds?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ds;return this.component?this.component.multipleInstances?e:ds:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var vs,ms,ys=function(){function e(t){l(this,e),this.name=t,this.providers=new Map}return p(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ps(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),gs=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ms||(ms={}));var ks={debug:ms.DEBUG,verbose:ms.VERBOSE,info:ms.INFO,warn:ms.WARN,error:ms.ERROR,silent:ms.SILENT},bs=ms.INFO,ws=(hr(vs={},ms.DEBUG,"log"),hr(vs,ms.VERBOSE,"log"),hr(vs,ms.INFO,"info"),hr(vs,ms.WARN,"warn"),hr(vs,ms.ERROR,"error"),vs),_s=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=ws[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},xs=function(){function e(t){l(this,e),this.name=t,this._logLevel=bs,this._logHandler=_s,this._userLogHandler=null,gs.push(this)}return p(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in ms))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?ks[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ms.DEBUG].concat(t)),this._logHandler.apply(this,[this,ms.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ms.VERBOSE].concat(t)),this._logHandler.apply(this,[this,ms.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ms.INFO].concat(t)),this._logHandler.apply(this,[this,ms.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ms.WARN].concat(t)),this._logHandler.apply(this,[this,ms.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ms.ERROR].concat(t)),this._logHandler.apply(this,[this,ms.ERROR].concat(t))}}]),e}();function Es(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ss(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Es(Object(n),!0).forEach((function(t){hr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Es(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Is,Ts,Cs=function(e,t){return t.some((function(t){return e instanceof t}))};var Ns=new WeakMap,As=new WeakMap,Rs=new WeakMap,Ps=new WeakMap,Ds=new WeakMap;var Os={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return As.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Rs.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fs(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Ls(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ts||(Ts=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(js(this),n),Fs(Ns.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Fs(e.apply(js(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[js(this),t].concat(r));return Rs.set(a,t.sort?t.sort():[t]),Fs(a)}}function Ms(e){return"function"===typeof e?Ls(e):(e instanceof IDBTransaction&&function(e){if(!As.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));As.set(e,t)}}(e),Cs(e,Is||(Is=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Os):e)}function Fs(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Fs(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Ns.set(t,e)})).catch((function(){})),Ds.set(t,e),t}(e);if(Ps.has(e))return Ps.get(e);var t=Ms(e);return t!==e&&(Ps.set(e,t),Ds.set(t,e)),t}var js=function(e){return Ds.get(e)};var Us,Vs,Bs=["get","getKey","getAll","getAllKeys","count"],zs=["put","add","delete","clear"],qs=new Map;function Ks(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(qs.get(t))return qs.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=zs.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Bs.includes(n))){var a=function(){var e=fs(_i().mark((function e(t){var a,o,u,s,c,l,f=arguments;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return qs.set(t,a),a}}}Os=function(e){return Ss(Ss({},e),{},{get:function(t,n,r){return Ks(t,n)||e.get(t,n,r)},has:function(t,n){return!!Ks(t,n)||e.has(t,n)}})}(Os);var Hs=function(){function e(t){l(this,e),this.container=t}return p(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Ws="@firebase/app",Gs="0.9.14",Qs=new xs("@firebase/app"),Ys="[DEFAULT]",Js=(hr(Us={},Ws,"fire-core"),hr(Us,"@firebase/app-compat","fire-core-compat"),hr(Us,"@firebase/analytics","fire-analytics"),hr(Us,"@firebase/analytics-compat","fire-analytics-compat"),hr(Us,"@firebase/app-check","fire-app-check"),hr(Us,"@firebase/app-check-compat","fire-app-check-compat"),hr(Us,"@firebase/auth","fire-auth"),hr(Us,"@firebase/auth-compat","fire-auth-compat"),hr(Us,"@firebase/database","fire-rtdb"),hr(Us,"@firebase/database-compat","fire-rtdb-compat"),hr(Us,"@firebase/functions","fire-fn"),hr(Us,"@firebase/functions-compat","fire-fn-compat"),hr(Us,"@firebase/installations","fire-iid"),hr(Us,"@firebase/installations-compat","fire-iid-compat"),hr(Us,"@firebase/messaging","fire-fcm"),hr(Us,"@firebase/messaging-compat","fire-fcm-compat"),hr(Us,"@firebase/performance","fire-perf"),hr(Us,"@firebase/performance-compat","fire-perf-compat"),hr(Us,"@firebase/remote-config","fire-rc"),hr(Us,"@firebase/remote-config-compat","fire-rc-compat"),hr(Us,"@firebase/storage","fire-gcs"),hr(Us,"@firebase/storage-compat","fire-gcs-compat"),hr(Us,"@firebase/firestore","fire-fst"),hr(Us,"@firebase/firestore-compat","fire-fst-compat"),hr(Us,"fire-js","fire-js"),hr(Us,"firebase","fire-js-all"),Us),$s=new Map,Xs=new Map;function Zs(e,t){try{e.container.addComponent(t)}catch(n){Qs.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function ec(e,t){e.container.addOrOverwriteComponent(t)}function tc(e){var t=e.name;if(Xs.has(t))return Qs.debug("There were multiple attempts to register component ".concat(t,".")),!1;Xs.set(t,e);var n,r=T($s.values());try{for(r.s();!(n=r.n()).done;){Zs(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function nc(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function rc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ys;nc(e,t).clearInstance(n)}function ic(){Xs.clear()}var ac=(hr(Vs={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),hr(Vs,"bad-app-name","Illegal App name: '{$appName}"),hr(Vs,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),hr(Vs,"app-deleted","Firebase App named '{$appName}' already deleted"),hr(Vs,"no-options","Need to provide options, when not being deployed to hosting via source."),hr(Vs,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),hr(Vs,"invalid-log-argument","First argument to `onLog` must be null or a function."),hr(Vs,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),hr(Vs,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),hr(Vs,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),hr(Vs,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Vs),oc=new $u("app","Firebase",ac),uc=function(){function e(t,n,r){var i=this;l(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hs("app",(function(){return i}),"PUBLIC"))}return p(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw oc.create("app-deleted",{appName:this._name})}}]),e}(),sc="10.0.0";function cc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:Ys,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw oc.create("bad-app-name",{appName:String(i)});if(n||(n=zu()),!n)throw oc.create("no-options");var a=$s.get(i);if(a){if(ts(n,a.options)&&ts(r,a.config))return a;throw oc.create("duplicate-app",{appName:i})}var o,u=new ys(i),s=T(Xs.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new uc(n,r,u);return $s.set(i,l),l}function lc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ys,t=$s.get(e);if(!t&&e===Ys&&zu())return cc();if(!t)throw oc.create("no-app",{appName:e});return t}function fc(){return Array.from($s.values())}function hc(e){return dc.apply(this,arguments)}function dc(){return(dc=fs(_i().mark((function e(t){var n;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!$s.has(n)){e.next=6;break}return $s.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pc(e,t,n){var r,i=null!==(r=Js[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Qs.warn(u.join(" "))}tc(new hs("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function vc(e,t){if(null!==e&&"function"!==typeof e)throw oc.create("invalid-log-argument");!function(e,t){var n,r=T(gs);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=ks[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:ms[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function mc(e){var t;t=e,gs.forEach((function(e){e.setLogLevel(t)}))}var yc="firebase-heartbeat-database",gc=1,kc="firebase-heartbeat-store",bc=null;function wc(){return bc||(bc=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Fs(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Fs(u.result),e.oldVersion,e.newVersion,Fs(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(yc,gc,{upgrade:function(e,t){if(0===t)e.createObjectStore(kc)}}).catch((function(e){throw oc.create("idb-open",{originalErrorMessage:e.message})}))),bc}function _c(e){return xc.apply(this,arguments)}function xc(){return xc=fs(_i().mark((function e(t){var n,r,i;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wc();case 3:return n=e.sent,e.next=6,n.transaction(kc).objectStore(kc).get(Ic(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof Ju?Qs.warn(e.t0.message):(i=oc.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Qs.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),xc.apply(this,arguments)}function Ec(e,t){return Sc.apply(this,arguments)}function Sc(){return Sc=fs(_i().mark((function e(t,n){var r,i,a,o;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wc();case 3:return r=e.sent,i=r.transaction(kc,"readwrite"),a=i.objectStore(kc),e.next=8,a.put(n,Ic(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof Ju?Qs.warn(e.t0.message):(o=oc.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Qs.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),Sc.apply(this,arguments)}function Ic(e){return"".concat(e.name,"!").concat(e.options.appId)}var Tc=function(){function e(t){var n=this;l(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Pc(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return p(e,[{key:"triggerHeartbeat",value:function(){var e=fs(_i().mark((function e(){var t,n,r;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Cc(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=fs(_i().mark((function e(){var t,n,r,i,a;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Cc(),n=Nc(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Fu(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Cc(){return(new Date).toISOString().substring(0,10)}function Nc(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=T(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Dc(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Dc(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Ac,Rc,Pc=function(){function e(t){l(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return p(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=fs(_i().mark((function e(){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Yu()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=fs(_i().mark((function e(){var t;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,_c(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=fs(_i().mark((function e(t){var n,r;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Ec(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=fs(_i().mark((function e(t){var n,r;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Ec(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(c(r.heartbeats),c(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Dc(e){return Fu(JSON.stringify({version:2,heartbeats:e})).length}Ac="",tc(new hs("platform-logger",(function(e){return new Hs(e)}),"PRIVATE")),tc(new hs("heartbeat",(function(e){return new Tc(e)}),"PRIVATE")),pc(Ws,Gs,Ac),pc(Ws,Gs,"esm2017"),pc("fire-js","");var Oc=function(){function e(t,n){var r=this;l(this,e),this._delegate=t,this.firebase=n,Zs(t,new hs("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return p(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),hc(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ys;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ys;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Zs(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){ec(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Lc=(hr(Rc={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),hr(Rc,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Rc),Mc=new $u("app-compat","Firebase",Lc);var Fc=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=cc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Zu(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:pc,setLogLevel:mc,onLog:vc,apps:null,SDK_VERSION:sc,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(tc(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Mc.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Uu(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Zu(n,e=e||Ys))throw Mc.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Oc);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Uu(n,e)},createSubscribe:os,ErrorFactory:$u,deepExtend:Uu}),n}(),jc=new xs("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){jc.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Uc=self.firebase.SDK_VERSION;Uc&&Uc.indexOf("LITE")>=0&&jc.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Vc=Fc;!function(e){pc("@firebase/app-compat","0.2.14",e)}();Vc.registerVersion("firebase","10.0.0","app-compat");function Bc(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var zc,qc={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Kc="EMAIL_SIGNIN",Hc="PASSWORD_RESET",Wc="RECOVER_EMAIL",Gc="REVERT_SECOND_FACTOR_ADDITION",Qc="VERIFY_AND_CHANGE_EMAIL",Yc="VERIFY_EMAIL";function Jc(){return hr({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var $c=function(){var e;return hr(e={},"admin-restricted-operation","This operation is restricted to administrators only."),hr(e,"argument-error",""),hr(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),hr(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),hr(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),hr(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),hr(e,"cordova-not-ready","Cordova framework is not ready."),hr(e,"cors-unsupported","This browser is not supported."),hr(e,"credential-already-in-use","This credential is already associated with a different user account."),hr(e,"custom-token-mismatch","The custom token corresponds to a different audience."),hr(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),hr(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),hr(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),hr(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),hr(e,"email-already-in-use","The email address is already in use by another account."),hr(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),hr(e,"expired-action-code","The action code has expired."),hr(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),hr(e,"internal-error","An internal AuthError has occurred."),hr(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),hr(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),hr(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),hr(e,"invalid-auth-event","An internal AuthError has occurred."),hr(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),hr(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),hr(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),hr(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),hr(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),hr(e,"invalid-email","The email address is badly formatted."),hr(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),hr(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),hr(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),hr(e,"invalid-credential","The supplied auth credential is malformed or has expired."),hr(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),hr(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),hr(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),hr(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),hr(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),hr(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),hr(e,"wrong-password","The password is invalid or the user does not have a password."),hr(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),hr(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),hr(e,"invalid-provider-id","The specified provider ID is invalid."),hr(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),hr(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),hr(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),hr(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),hr(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),hr(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),hr(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),hr(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),hr(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),hr(e,"missing-continue-uri","A continue URL must be provided in the request."),hr(e,"missing-iframe-start","An internal AuthError has occurred."),hr(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),hr(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),hr(e,"missing-password","A non-empty password must be provided"),hr(e,"missing-multi-factor-info","No second factor identifier is provided."),hr(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),hr(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),hr(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),hr(e,"app-deleted","This instance of FirebaseApp has been deleted."),hr(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),hr(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),hr(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),hr(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),hr(e,"no-auth-event","An internal AuthError has occurred."),hr(e,"no-such-provider","User was not linked to an account with the given provider."),hr(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),hr(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),hr(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),hr(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),hr(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),hr(e,"provider-already-linked","User can only be linked to one identity for the given provider."),hr(e,"quota-exceeded","The project's quota for this operation has been exceeded."),hr(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),hr(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),hr(e,"rejected-credential","The request contains malformed or mismatching credentials."),hr(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),hr(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),hr(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),hr(e,"timeout","The operation has timed out."),hr(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),hr(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),hr(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),hr(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),hr(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),hr(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),hr(e,"unverified-email","The operation requires a verified email."),hr(e,"user-cancelled","The user did not grant your application the permissions it requested."),hr(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),hr(e,"user-disabled","The user account has been disabled by an administrator."),hr(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),hr(e,"user-signed-out",""),hr(e,"weak-password","The password must be 6 characters long or more."),hr(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),hr(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),hr(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),hr(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),hr(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),hr(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),hr(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),hr(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),hr(e,"invalid-req-type","Invalid request parameters."),hr(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),e},Xc=Jc,Zc=new $u("auth","Firebase",Jc()),el=new xs("@firebase/auth");function tl(e){if(el.logLevel<=ms.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];el.warn.apply(el,["Auth (".concat(sc,"): ").concat(e)].concat(n))}}function nl(e){if(el.logLevel<=ms.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];el.error.apply(el,["Auth (".concat(sc,"): ").concat(e)].concat(n))}}function rl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ul.apply(void 0,[e].concat(n))}function il(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ul.apply(void 0,[e].concat(n))}function al(e,t,n){var r=Object.assign(Object.assign({},Xc()),hr({},t,n));return new $u("auth","Firebase",r).create(t,{appName:e.name})}function ol(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&rl(e,"argument-error"),al(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function ul(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=c(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(c(o)))}return Zc.create.apply(Zc,[e].concat(n))}function sl(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw ul.apply(void 0,[t].concat(r))}}function cl(e){var t="INTERNAL ASSERTION FAILED: "+e;throw nl(t),new Error(t)}function ll(e,t){e||cl(t)}function fl(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function hl(){return"http:"===dl()||"https:"===dl()}function dl(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var pl=function(){function e(t,n){l(this,e),this.shortDelay=t,this.longDelay=n,ll(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ku())||Gu()}return p(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(hl()||Wu()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function vl(e,t){ll(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var ml=function(){function e(){l(this,e)}return p(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void cl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void cl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void cl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),yl=(hr(zc={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),hr(zc,"MISSING_CUSTOM_TOKEN","internal-error"),hr(zc,"INVALID_IDENTIFIER","invalid-email"),hr(zc,"MISSING_CONTINUE_URI","internal-error"),hr(zc,"INVALID_PASSWORD","wrong-password"),hr(zc,"MISSING_PASSWORD","missing-password"),hr(zc,"EMAIL_EXISTS","email-already-in-use"),hr(zc,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),hr(zc,"INVALID_IDP_RESPONSE","invalid-credential"),hr(zc,"INVALID_PENDING_TOKEN","invalid-credential"),hr(zc,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),hr(zc,"MISSING_REQ_TYPE","internal-error"),hr(zc,"EMAIL_NOT_FOUND","user-not-found"),hr(zc,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),hr(zc,"EXPIRED_OOB_CODE","expired-action-code"),hr(zc,"INVALID_OOB_CODE","invalid-action-code"),hr(zc,"MISSING_OOB_CODE","internal-error"),hr(zc,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),hr(zc,"INVALID_ID_TOKEN","invalid-user-token"),hr(zc,"TOKEN_EXPIRED","user-token-expired"),hr(zc,"USER_NOT_FOUND","user-token-expired"),hr(zc,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),hr(zc,"INVALID_CODE","invalid-verification-code"),hr(zc,"INVALID_SESSION_INFO","invalid-verification-id"),hr(zc,"INVALID_TEMPORARY_PROOF","invalid-credential"),hr(zc,"MISSING_SESSION_INFO","missing-verification-id"),hr(zc,"SESSION_EXPIRED","code-expired"),hr(zc,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),hr(zc,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),hr(zc,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),hr(zc,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),hr(zc,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),hr(zc,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),hr(zc,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),hr(zc,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),hr(zc,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),hr(zc,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),hr(zc,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),hr(zc,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),hr(zc,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),hr(zc,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),hr(zc,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),hr(zc,"MISSING_CLIENT_TYPE","missing-client-type"),hr(zc,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),hr(zc,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),hr(zc,"INVALID_REQ_TYPE","invalid-req-type"),zc),gl=new pl(3e4,6e4);function kl(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function bl(e,t,n,r){return wl.apply(this,arguments)}function wl(){return wl=fs(_i().mark((function e(t,n,r,i){var a,o=arguments;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",_l(t,a,fs(_i().mark((function e(){var a,o,u,s;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=rs(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",ml.fetch()(Il(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),wl.apply(this,arguments)}function _l(e,t,n){return xl.apply(this,arguments)}function xl(){return xl=fs(_i().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},yl),n),e.prev=2,a=new Tl(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Cl(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=S(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw Cl(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw Cl(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw Cl(t,"user-disabled",u);case 29:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=34;break}throw al(t,d,h);case 34:rl(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Ju)){e.next=41;break}throw e.t0;case 41:rl(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),xl.apply(this,arguments)}function El(e,t,n,r){return Sl.apply(this,arguments)}function Sl(){return Sl=fs(_i().mark((function e(t,n,r,i){var a,o,u=arguments;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,bl(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&rl(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Sl.apply(this,arguments)}function Il(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?vl(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Tl=function(){function e(t){var n=this;l(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(il(n.auth,"network-request-failed"))}),gl.get())}))}return p(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Cl(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=il(e,t,r);return i.customData._tokenResponse=n,i}function Nl(e,t){return Al.apply(this,arguments)}function Al(){return Al=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bl(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Al.apply(this,arguments)}function Rl(e,t){return Pl.apply(this,arguments)}function Pl(){return Pl=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bl(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Pl.apply(this,arguments)}function Dl(e,t){return Ol.apply(this,arguments)}function Ol(){return Ol=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bl(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Ol.apply(this,arguments)}function Ll(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Ml(){return Ml=fs(_i().mark((function e(t){var n,r,i,a,o,u,s=arguments;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=cs(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,sl((a=jl(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Ll(Fl(a.auth_time)),issuedAtTime:Ll(Fl(a.iat)),expirationTime:Ll(Fl(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Ml.apply(this,arguments)}function Fl(e){return 1e3*Number(e)}function jl(e){var t=S(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return nl("JWT malformed, contained fewer than 3 sections"),null;try{var a=ju(r);return a?JSON.parse(a):(nl("Failed to decode base64 JWT payload"),null)}catch(o){return nl("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function Ul(e,t){return Vl.apply(this,arguments)}function Vl(){return Vl=fs(_i().mark((function e(t,n){var r=arguments;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Ju&&Bl(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Vl.apply(this,arguments)}function Bl(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var zl=function(){function e(t){l(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return p(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(fs(_i().mark((function t(){return _i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=fs(_i().mark((function e(){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),ql=function(){function e(t,n){l(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return p(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Ll(this.lastLoginAt),this.creationTime=Ll(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Kl(e){return Hl.apply(this,arguments)}function Hl(){return Hl=fs(_i().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Ul(t,Dl(r,{idToken:i}));case 6:sl(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=Bc(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],s=Gl(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new ql(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Hl.apply(this,arguments)}function Wl(){return(Wl=fs(_i().mark((function e(t){var n;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=cs(t),e.next=3,Kl(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gl(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(c(n),c(t))}function Ql(e,t){return Yl.apply(this,arguments)}function Yl(){return Yl=fs(_i().mark((function e(t,n){var r;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_l(t,{},fs(_i().mark((function e(){var r,i,a,o,u,s;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=rs({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Il(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",ml.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Yl.apply(this,arguments)}var Jl=function(){function e(){l(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return p(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){sl(e.idToken,"internal-error"),sl("undefined"!==typeof e.idToken,"internal-error"),sl("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=jl(e);return sl(t,"internal-error"),sl("undefined"!==typeof t.exp,"internal-error"),sl("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=fs(_i().mark((function e(t){var n,r=arguments;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],sl(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=fs(_i().mark((function e(t,n){var r,i,a,o;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ql(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return cl("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(sl("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(sl("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(sl("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function $l(e,t){sl("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Xl=function(){function e(t){l(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Bc(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zl(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?c(a.providerData):[],this.metadata=new ql(a.createdAt||void 0,a.lastLoginAt||void 0)}return p(e,[{key:"getIdToken",value:function(){var e=fs(_i().mark((function e(t){var n;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ul(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(sl(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Ml.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Wl.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(sl(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){sl(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=fs(_i().mark((function e(t){var n,r,i=arguments;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Kl(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=fs(_i().mark((function e(){var t;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Ul(this,Nl(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;sl(k&&x,t,"internal-error");var E=Jl.fromJSON(this.name,x);sl("string"===typeof k,t,"internal-error"),$l(f,t.name),$l(h,t.name),sl("boolean"===typeof b,t,"internal-error"),sl("boolean"===typeof w,t,"internal-error"),$l(d,t.name),$l(p,t.name),$l(v,t.name),$l(m,t.name),$l(y,t.name),$l(g,t.name);var S=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:E,createdAt:y,lastLoginAt:g});return _&&Array.isArray(_)&&(S.providerData=_.map((function(e){return Object.assign({},e)}))),m&&(S._redirectEventId=m),S}},{key:"_fromIdTokenResponse",value:function(){var t=fs(_i().mark((function t(n,r){var i,a,o,u=arguments;return _i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Jl).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Kl(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Zl=new Map;function ef(e){ll(e instanceof Function,"Expected a class definition");var t=Zl.get(e);return t?(ll(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Zl.set(e,t),t)}var tf=function(){function e(){l(this,e),this.type="NONE",this.storage={}}return p(e,[{key:"_isAvailable",value:function(){var e=fs(_i().mark((function e(){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=fs(_i().mark((function e(t){var n;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();tf.type="NONE";var nf=tf;function rf(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var af=function(){function e(t,n,r){l(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=rf(this.userKey,a.apiKey,o),this.fullPersistenceKey=rf("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return p(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=fs(_i().mark((function e(){var t;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Xl._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=fs(_i().mark((function e(t){var n;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=fs(_i().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return _i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(ef(nf),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||ef(nf),u=rf(i,n.config.apiKey,n.name),s=null,c=T(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=Xl._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function of(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(lf(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(uf(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(hf(t))return"Blackberry";if(df(t))return"Webos";if(sf(t))return"Safari";if((t.includes("chrome/")||cf(t))&&!t.includes("edge/"))return"Chrome";if(ff(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function uf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ku();return/firefox\//i.test(e)}function sf(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ku()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ku();return/crios\//i.test(e)}function lf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ku();return/iemobile/i.test(e)}function ff(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ku();return/android/i.test(e)}function hf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ku();return/blackberry/i.test(e)}function df(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ku();return/webos/i.test(e)}function pf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ku();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function vf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ku();return pf(e)||ff(e)||df(e)||hf(e)||/windows phone/i.test(e)||lf(e)}function mf(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=of(Ku());break;case"Worker":t="".concat(of(Ku()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(sc,"/").concat(r)}function yf(e){return gf.apply(this,arguments)}function gf(){return gf=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bl(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),gf.apply(this,arguments)}function kf(e,t){return bf.apply(this,arguments)}function bf(){return bf=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bl(t,"GET","/v2/recaptchaConfig",kl(t,n)));case 1:case"end":return e.stop()}}),e)}))),bf.apply(this,arguments)}function wf(e){return void 0!==e&&void 0!==e.getResponse}function _f(e){return void 0!==e&&void 0!==e.enterprise}var xf=p((function e(t){if(l(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function Ef(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=il("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Sf(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var If=function(){function e(t){l(this,e),this.type="recaptcha-enterprise",this.auth=Rf(t)}return p(e,[{key:"verify",value:function(){var e=fs(_i().mark((function e(){var t,n,r,i,a,o=this,u=arguments;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;_f(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=fs(_i().mark((function e(n,r){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:kf(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new xf(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=u.length>0&&void 0!==u[0]?u[0]:"verify",n=u.length>1&&void 0!==u[1]&&u[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&_f(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));Ef("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Tf(e,t,n){return Cf.apply(this,arguments)}function Cf(){return Cf=fs(_i().mark((function e(t,n,r){var i,a,o,u,s=arguments;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>3&&void 0!==s[3]&&s[3],a=new If(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return u=Object.assign({},n),i?Object.assign(u,{captchaResp:o}):Object.assign(u,{captchaResponse:o}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",u);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),Cf.apply(this,arguments)}var Nf=function(){function e(t){l(this,e),this.auth=t,this.queue=[]}return p(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=fs(_i().mark((function e(t){var n,r,i,a,o,u,s;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=T(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=T(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Af=function(){function e(t,n,r,i){l(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pf(this),this.idTokenSubscription=new Pf(this),this.beforeStateQueue=new Nf(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zc,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return p(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=ef(t)),this._initializationPromise=this.queue(fs(_i().mark((function r(){var i,a;return _i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,af.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=fs(_i().mark((function e(){var t;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=fs(_i().mark((function e(t){var n,r,i,a,o,u,s;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return sl(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=fs(_i().mark((function e(t){var n;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Kl(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=fs(_i().mark((function e(){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=fs(_i().mark((function e(t){var n;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?cs(t):null)&&sl(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=fs(_i().mark((function e(t){var n,r=this,i=arguments;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&sl(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(fs(_i().mark((function e(){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=fs(_i().mark((function e(){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(fs(_i().mark((function n(){return _i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(ef(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"initializeRecaptchaConfig",value:function(){var e=fs(_i().mark((function e(){var t,n;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kf(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"});case 2:t=e.sent,n=new xf(t),null==this.tenantId?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new If(this).verify();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new $u("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=fs(_i().mark((function e(t,n){var r;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=fs(_i().mark((function e(t){var n;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return sl(n=t&&ef(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,af.create(this,[ef(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=fs(_i().mark((function e(t){var n,r;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(fs(_i().mark((function e(){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=fs(_i().mark((function e(t){var n=this;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(fs(_i().mark((function e(){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return sl(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return sl(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mf(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=fs(_i().mark((function e(){var t,n,r,i;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=hr({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=fs(_i().mark((function e(){var t,n;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&tl("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Rf(e){return cs(e)}var Pf=function(){function e(t){var n=this;l(this,e),this.auth=t,this.observer=null,this.addObserver=os((function(e){return n.observer=e}))}return p(e,[{key:"next",get:function(){return sl(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Df(e,t,n){var r=Rf(e);sl(r._canInitEmulator,r,"emulator-config-failed"),sl(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Of(t),o=function(e){var t=Of(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Lf(r.substr(a.length+1))}}var o=S(r.split(":"),2);return{host:o[0],port:Lf(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Of(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Lf(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Mf=function(){function e(t,n){l(this,e),this.providerId=t,this.signInMethod=n}return p(e,[{key:"toJSON",value:function(){return cl("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return cl("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return cl("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return cl("not implemented")}}]),e}();function Ff(e,t){return jf.apply(this,arguments)}function jf(){return jf=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bl(t,"POST","/v1/accounts:resetPassword",kl(t,n)));case 1:case"end":return e.stop()}}),e)}))),jf.apply(this,arguments)}function Uf(e,t){return Vf.apply(this,arguments)}function Vf(){return Vf=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bl(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Vf.apply(this,arguments)}function Bf(e,t){return zf.apply(this,arguments)}function zf(){return zf=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bl(t,"POST","/v1/accounts:update",kl(t,n)));case 1:case"end":return e.stop()}}),e)}))),zf.apply(this,arguments)}function qf(e,t){return Kf.apply(this,arguments)}function Kf(){return Kf=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",El(t,"POST","/v1/accounts:signInWithPassword",kl(t,n)));case 1:case"end":return e.stop()}}),e)}))),Kf.apply(this,arguments)}function Hf(e,t){return Wf.apply(this,arguments)}function Wf(){return Wf=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bl(t,"POST","/v1/accounts:sendOobCode",kl(t,n)));case 1:case"end":return e.stop()}}),e)}))),Wf.apply(this,arguments)}function Gf(e,t){return Qf.apply(this,arguments)}function Qf(){return Qf=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hf(t,n));case 1:case"end":return e.stop()}}),e)}))),Qf.apply(this,arguments)}function Yf(e,t){return Jf.apply(this,arguments)}function Jf(){return Jf=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hf(t,n));case 1:case"end":return e.stop()}}),e)}))),Jf.apply(this,arguments)}function $f(e,t){return Xf.apply(this,arguments)}function Xf(){return Xf=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hf(t,n));case 1:case"end":return e.stop()}}),e)}))),Xf.apply(this,arguments)}function Zf(e,t){return eh.apply(this,arguments)}function eh(){return eh=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hf(t,n));case 1:case"end":return e.stop()}}),e)}))),eh.apply(this,arguments)}function th(e,t){return nh.apply(this,arguments)}function nh(){return nh=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",El(t,"POST","/v1/accounts:signInWithEmailLink",kl(t,n)));case 1:case"end":return e.stop()}}),e)}))),nh.apply(this,arguments)}function rh(e,t){return ih.apply(this,arguments)}function ih(){return ih=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",El(t,"POST","/v1/accounts:signInWithEmailLink",kl(t,n)));case 1:case"end":return e.stop()}}),e)}))),ih.apply(this,arguments)}var ah=function(e){m(n,e);var t=b(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return l(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return p(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=fs(_i().mark((function e(t){var n,r,i;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,Tf(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",qf(t,i));case 11:return e.abrupt("return",qf(t,r).catch(function(){var e=fs(_i().mark((function e(n){var i;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Tf(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",qf(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",th(t,{email:this._email,oobCode:this._password}));case 13:rl(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Uf(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",rh(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:rl(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Mf);function oh(e,t){return uh.apply(this,arguments)}function uh(){return uh=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",El(t,"POST","/v1/accounts:signInWithIdp",kl(t,n)));case 1:case"end":return e.stop()}}),e)}))),uh.apply(this,arguments)}var sh=function(e){m(n,e);var t=b(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return p(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return oh(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,oh(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,oh(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=rs(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):rl("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Bc(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Mf);function ch(e,t){return lh.apply(this,arguments)}function lh(){return lh=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bl(t,"POST","/v1/accounts:sendVerificationCode",kl(t,n)));case 1:case"end":return e.stop()}}),e)}))),lh.apply(this,arguments)}function fh(){return fh=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",El(t,"POST","/v1/accounts:signInWithPhoneNumber",kl(t,n)));case 1:case"end":return e.stop()}}),e)}))),fh.apply(this,arguments)}function hh(){return hh=fs(_i().mark((function e(t,n){var r;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,El(t,"POST","/v1/accounts:signInWithPhoneNumber",kl(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Cl(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),hh.apply(this,arguments)}var dh=hr({},"USER_NOT_FOUND","user-not-found");function ph(){return ph=fs(_i().mark((function e(t,n){var r;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",El(t,"POST","/v1/accounts:signInWithPhoneNumber",kl(t,r),dh));case 2:case"end":return e.stop()}}),e)}))),ph.apply(this,arguments)}var vh=function(e){m(n,e);var t=b(n);function n(e){var r;return l(this,n),(r=t.call(this,"phone","phone")).params=e,r}return p(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return fh.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return hh.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return ph.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Mf);var mh=function(){function e(t){var n,r,i,a,o,u;l(this,e);var s=is(as(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,f=null!==(r=s.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);sl(c&&f&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=f,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return p(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=is(as(e)).link,n=t?is(as(t)).deep_link_id:null,r=is(as(e)).deep_link_id;return(r?is(as(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var yh=function(){function e(){l(this,e),this.providerId=e.PROVIDER_ID}return p(e,null,[{key:"credential",value:function(e,t){return ah._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=mh.parseLink(t);return sl(n,"argument-error"),ah._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();yh.PROVIDER_ID="password",yh.EMAIL_PASSWORD_SIGN_IN_METHOD="password",yh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var gh=function(){function e(t){l(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return p(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),kh=function(e){m(n,e);var t=b(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).scopes=[],e}return p(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return c(this.scopes)}}]),n}(gh),bh=function(e){m(n,e);var t=b(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return sl(e.idToken||e.accessToken,"argument-error"),sh._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return sl("providerId"in t&&"signInMethod"in t,"argument-error"),sh._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(kh),wh=function(e){m(n,e);var t=b(n);function n(){return l(this,n),t.call(this,"facebook.com")}return p(n,null,[{key:"credential",value:function(e){return sh._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(kh);wh.FACEBOOK_SIGN_IN_METHOD="facebook.com",wh.PROVIDER_ID="facebook.com";var _h=function(e){m(n,e);var t=b(n);function n(){var e;return l(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return p(n,null,[{key:"credential",value:function(e,t){return sh._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(kh);_h.GOOGLE_SIGN_IN_METHOD="google.com",_h.PROVIDER_ID="google.com";var xh=function(e){m(n,e);var t=b(n);function n(){return l(this,n),t.call(this,"github.com")}return p(n,null,[{key:"credential",value:function(e){return sh._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(kh);xh.GITHUB_SIGN_IN_METHOD="github.com",xh.PROVIDER_ID="github.com";var Eh=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return p(n,[{key:"_getIdTokenResponse",value:function(e){return oh(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,oh(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,oh(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Mf),Sh=function(e){m(n,e);var t=b(n);function n(e){return l(this,n),sl(e.startsWith("saml."),"argument-error"),t.call(this,e)}return p(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Eh.fromJSON(e);return sl(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Eh._create(r,n)}catch(i){return null}}}]),n}(gh),Ih=function(e){m(n,e);var t=b(n);function n(){return l(this,n),t.call(this,"twitter.com")}return p(n,null,[{key:"credential",value:function(e,t){return sh._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(kh);function Th(e,t){return Ch.apply(this,arguments)}function Ch(){return Ch=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",El(t,"POST","/v1/accounts:signUp",kl(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ch.apply(this,arguments)}Ih.TWITTER_SIGN_IN_METHOD="twitter.com",Ih.PROVIDER_ID="twitter.com";var Nh=function(){function e(t){l(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return p(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=fs(_i().mark((function t(n,r,i){var a,o,u,s,c=arguments;return _i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Xl._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Ah(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=fs(_i().mark((function t(n,r,i){var a;return _i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Ah(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Ah(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Rh(){return Rh=fs(_i().mark((function e(t){var n,r,i,a;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Rf(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Nh({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Th(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Nh._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Rh.apply(this,arguments)}var Ph=function(e){m(n,e);var t=b(n);function n(e,r,i,a){var o,u;return l(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(k(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return p(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Ju);function Dh(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ph._fromErrorAndOperation(e,n,t,r);throw n}))}function Oh(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Lh(e,t){return Mh.apply(this,arguments)}function Mh(){return Mh=fs(_i().mark((function e(t,n){var r,i,a,o;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cs(t),e.next=3,Uh(!0,r,n);case 3:return e.t0=Rl,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Oh(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Mh.apply(this,arguments)}function Fh(e,t){return jh.apply(this,arguments)}function jh(){return jh=fs(_i().mark((function e(t,n){var r,i,a=arguments;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Ul,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Nh._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),jh.apply(this,arguments)}function Uh(e,t,n){return Vh.apply(this,arguments)}function Vh(){return(Vh=fs(_i().mark((function e(t,n,r){var i,a;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kl(n);case 2:i=Oh(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",sl(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bh(e,t){return zh.apply(this,arguments)}function zh(){return zh=fs(_i().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Ul(t,Dh(i,a,n,t),r);case 6:return sl((o=e.sent).idToken,i,"internal-error"),sl(u=jl(o.idToken),i,"internal-error"),s=u.sub,sl(t.uid===s,i,"user-mismatch"),e.abrupt("return",Nh._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&rl(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),zh.apply(this,arguments)}function qh(e,t){return Kh.apply(this,arguments)}function Kh(){return Kh=fs(_i().mark((function e(t,n){var r,i,a,o,u=arguments;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Dh(t,i,n);case 4:return a=e.sent,e.next=7,Nh._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Kh.apply(this,arguments)}function Hh(e,t){return Wh.apply(this,arguments)}function Wh(){return Wh=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qh(Rf(t),n));case 1:case"end":return e.stop()}}),e)}))),Wh.apply(this,arguments)}function Gh(e,t){return Qh.apply(this,arguments)}function Qh(){return(Qh=fs(_i().mark((function e(t,n){var r;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cs(t),e.next=3,Uh(!1,r,n.providerId);case 3:return e.abrupt("return",Fh(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yh(e,t){return Jh.apply(this,arguments)}function Jh(){return(Jh=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Bh(cs(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $h(e,t){return Xh.apply(this,arguments)}function Xh(){return Xh=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",El(t,"POST","/v1/accounts:signInWithCustomToken",kl(t,n)));case 1:case"end":return e.stop()}}),e)}))),Xh.apply(this,arguments)}function Zh(){return Zh=fs(_i().mark((function e(t,n){var r,i,a;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Rf(t),e.next=3,$h(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Nh._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),Zh.apply(this,arguments)}var ed=function(){function e(t,n){l(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return p(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?td._fromServerResponse(e,t):"totpInfo"in t?nd._fromServerResponse(e,t):rl(e,"internal-error")}}]),e}(),td=function(e){m(n,e);var t=b(n);function n(e){var r;return l(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return p(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(ed),nd=function(e){m(n,e);var t=b(n);function n(e){return l(this,n),t.call(this,"totp",e)}return p(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(ed);function rd(e,t,n){var r;sl((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),sl("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(sl(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(sl(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function id(){return id=fs(_i().mark((function e(t,n,r){var i,a,o,u;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Rf(t),o={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=11;break}return e.next=5,Tf(a,o,"getOobCode",!0);case 5:return u=e.sent,r&&rd(a,u,r),e.next=9,Yf(a,u);case 9:e.next=14;break;case 11:return r&&rd(a,o,r),e.next=14,Yf(a,o).catch(function(){var e=fs(_i().mark((function e(t){var n;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,Tf(a,o,"getOobCode",!0);case 4:return n=e.sent,r&&rd(a,n,r),e.next=8,Yf(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),id.apply(this,arguments)}function ad(){return ad=fs(_i().mark((function e(t,n,r){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ff(cs(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),ad.apply(this,arguments)}function od(){return od=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bf(cs(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),od.apply(this,arguments)}function ud(e,t){return sd.apply(this,arguments)}function sd(){return sd=fs(_i().mark((function e(t,n){var r,i,a,o;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cs(t),e.next=3,Ff(r,{oobCode:n});case 3:i=e.sent,sl(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return sl(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:sl(i.mfaInfo,r,"internal-error");case 13:sl(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=ed._fromServerResponse(Rf(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),sd.apply(this,arguments)}function cd(){return cd=fs(_i().mark((function e(t,n){var r,i;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ud(cs(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),cd.apply(this,arguments)}function ld(e,t,n){return fd.apply(this,arguments)}function fd(){return fd=fs(_i().mark((function e(t,n,r){var i,a,o,u,s,c,l;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Rf(t),o={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,Tf(a,o,"signUpPassword");case 5:s=e.sent,u=Th(a,s),e.next=10;break;case 9:u=Th(a,o).catch(function(){var e=fs(_i().mark((function e(t){var n;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,Tf(a,o,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",Th(a,n));case 8:return e.abrupt("return",Promise.reject(t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,u.catch((function(e){return Promise.reject(e)}));case 12:return c=e.sent,e.next=15,Nh._fromIdTokenResponse(a,"signIn",c);case 15:return l=e.sent,e.next=18,a._updateCurrentUser(l.user);case 18:return e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)}))),fd.apply(this,arguments)}function hd(){return hd=fs(_i().mark((function e(t,n,r){var i,a,o,u,s;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(e,t){sl(t.handleCodeInApp,a,"argument-error"),t&&rd(a,e,t)},a=Rf(t),o={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=12;break}return e.next=6,Tf(a,o,"getOobCode",!0);case 6:return s=e.sent,u(s,r),e.next=10,$f(a,s);case 10:e.next=15;break;case 12:return u(o,r),e.next=15,$f(a,o).catch(function(){var e=fs(_i().mark((function e(t){var n;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Tf(a,o,"getOobCode",!0);case 4:return n=e.sent,u(n,r),e.next=8,$f(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)}))),hd.apply(this,arguments)}function dd(){return dd=fs(_i().mark((function e(t,n,r){var i,a;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cs(t),sl((a=yh.credentialWithLink(n,r||fl()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Hh(i,a));case 4:case"end":return e.stop()}}),e)}))),dd.apply(this,arguments)}function pd(e,t){return vd.apply(this,arguments)}function vd(){return vd=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bl(t,"POST","/v1/accounts:createAuthUri",kl(t,n)));case 1:case"end":return e.stop()}}),e)}))),vd.apply(this,arguments)}function md(){return md=fs(_i().mark((function e(t,n){var r,i,a,o;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=hl()?fl():"http://localhost",i={identifier:n,continueUri:r},e.next=4,pd(cs(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),md.apply(this,arguments)}function yd(){return(yd=fs(_i().mark((function e(t,n){var r,i,a,o;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cs(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&rd(r.auth,a,n),e.next=8,Gf(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gd(){return(gd=fs(_i().mark((function e(t,n,r){var i,a,o,u;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cs(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&rd(i.auth,o,r),e.next=8,Zf(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kd(e,t){return bd.apply(this,arguments)}function bd(){return bd=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bl(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),bd.apply(this,arguments)}function wd(){return(wd=fs(_i().mark((function e(t,n){var r,i,a,o,u,s,c;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=cs(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Ul(a,kd(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _d(e,t,n){return xd.apply(this,arguments)}function xd(){return xd=fs(_i().mark((function e(t,n,r){var i,a,o,u;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Ul(t,Uf(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),xd.apply(this,arguments)}var Ed=p((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};l(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Sd=function(e){m(n,e);var t=b(n);function n(e,r,i,a){var o;return l(this,n),(o=t.call(this,e,r,i)).username=a,o}return p(n)}(Ed),Id=function(e){m(n,e);var t=b(n);function n(e,r){return l(this,n),t.call(this,e,"facebook.com",r)}return p(n)}(Ed),Td=function(e){m(n,e);var t=b(n);function n(e,r){return l(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return p(n)}(Sd),Cd=function(e){m(n,e);var t=b(n);function n(e,r){return l(this,n),t.call(this,e,"google.com",r)}return p(n)}(Ed),Nd=function(e){m(n,e);var t=b(n);function n(e,r,i){return l(this,n),t.call(this,e,"twitter.com",r,i)}return p(n)}(Sd);function Ad(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=jl(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Ed(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Id(a,i);case"github.com":return new Td(a,i);case"google.com":return new Cd(a,i);case"twitter.com":return new Nd(a,i,e.screenName||null);case"custom":case"anonymous":return new Ed(a,null);default:return new Ed(a,r,i)}}(n)}var Rd=function(){function e(t,n,r){l(this,e),this.type=t,this.credential=n,this.user=r}return p(e,[{key:"toJSON",value:function(){return{multiFactorSession:hr({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Pd=function(){function e(t,n,r){l(this,e),this.session=t,this.hints=n,this.signInResolver=r}return p(e,[{key:"resolveSignIn",value:function(){var e=fs(_i().mark((function e(t){var n;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Rf(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return ed._fromServerResponse(r,e)}));sl(i.mfaPendingCredential,r,"internal-error");var o=Rd._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=fs(_i().mark((function e(t){var a,u,s;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Nh._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return sl(n.user,r,"internal-error"),e.abrupt("return",Nh._forOperation(n.user,n.operationType,u));case 17:rl(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Dd(e,t){return bl(e,"POST","/v2/accounts/mfaEnrollment:start",kl(e,t))}function Od(e,t){return bl(e,"POST","/v2/accounts/mfaEnrollment:start",kl(e,t))}function Ld(e,t){return bl(e,"POST","/v2/accounts/mfaEnrollment:finalize",kl(e,t))}function Md(e,t){return bl(e,"POST","/v2/accounts/mfaEnrollment:withdraw",kl(e,t))}var Fd=function(){function e(t){var n=this;l(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return ed._fromServerResponse(t.auth,e)})))}))}return p(e,[{key:"getSession",value:function(){var e=fs(_i().mark((function e(){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Rd,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=fs(_i().mark((function e(t,n){var r,i,a;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Ul(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=fs(_i().mark((function e(t){var n,r,i;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,Ul(this.user,Md(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),jd=new WeakMap;var Ud="__sak",Vd=function(){function e(t,n){l(this,e),this.storageRetriever=t,this.type=n}return p(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Ud,"1"),this.storage.removeItem(Ud),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Bd=function(e){m(n,e);var t=b(n);function n(){var e;return l(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Ku();return sf(e)||pf(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=vf(),e._shouldAllowMigration=!0,e}return p(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Qu()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=fs(_i().mark((function e(t,r){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hn(y(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=fs(_i().mark((function e(t){var r;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hn(y(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hn(y(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Vd);Bd.type="LOCAL";var zd=Bd,qd=function(e){m(n,e);var t=b(n);function n(){return l(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return p(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Vd);qd.type="SESSION";var Kd=qd;function Hd(e){return Promise.all(e.map(function(){var e=fs(_i().mark((function e(t){var n;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Wd=function(){function e(t){l(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return p(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=fs(_i().mark((function e(t){var n,r,i,a,o,u,s,c;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Hd(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Gd(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Wd.receivers=[];var Qd=function(){function e(t){l(this,e),this.target=t,this.handlers=new Set}return p(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=fs(_i().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Gd("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Yd(){return window}function Jd(e){Yd().location.href=e}function $d(){return"undefined"!==typeof Yd().WorkerGlobalScope&&"function"===typeof Yd().importScripts}function Xd(){return Zd.apply(this,arguments)}function Zd(){return(Zd=fs(_i().mark((function e(){var t;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function ep(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var tp="firebaseLocalStorageDb",np="firebaseLocalStorage",rp="fbase_key",ip=function(){function e(t){l(this,e),this.request=t}return p(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function ap(e,t){return e.transaction([np],t?"readwrite":"readonly").objectStore(np)}function op(){var e=indexedDB.deleteDatabase(tp);return new ip(e).toPromise()}function up(){var e=indexedDB.open(tp,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(np,{keyPath:rp})}catch(r){n(r)}})),e.addEventListener("success",fs(_i().mark((function n(){var r;return _i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(np)){n.next=12;break}return r.close(),n.next=5,op();case 5:return n.t0=t,n.next=8,up();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function sp(e,t,n){return cp.apply(this,arguments)}function cp(){return cp=fs(_i().mark((function e(t,n,r){var i,a;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ap(t,!0).put((hr(i={},rp,n),hr(i,"value",r),i)),e.abrupt("return",new ip(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),cp.apply(this,arguments)}function lp(e,t){return fp.apply(this,arguments)}function fp(){return fp=fs(_i().mark((function e(t,n){var r,i;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ap(t,!1).get(n),e.next=3,new ip(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),fp.apply(this,arguments)}function hp(e,t){var n=ap(e,!0).delete(t);return new ip(n).toPromise()}var dp=function(){function e(){l(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return p(e,[{key:"_openDb",value:function(){var e=fs(_i().mark((function e(){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,up();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=fs(_i().mark((function e(t){var n,r;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=fs(_i().mark((function e(){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$d()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=fs(_i().mark((function e(){var t=this;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Wd._getInstance($d()?self:null),this.receiver._subscribe("keyChanged",function(){var e=fs(_i().mark((function e(n,r){var i;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=fs(_i().mark((function e(){var t,n,r;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xd();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Qd(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&ep()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=fs(_i().mark((function e(){var t;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,up();case 5:return t=e.sent,e.next=8,sp(t,Ud,"1");case 8:return e.next=10,hp(t,Ud);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=fs(_i().mark((function e(t,n){var r=this;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(fs(_i().mark((function e(){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return sp(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=fs(_i().mark((function e(t){var n;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return lp(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=fs(_i().mark((function e(t){var n=this;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(fs(_i().mark((function e(){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return hp(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=fs(_i().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=ap(e,!1).getAll();return new ip(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=T(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(fs(_i().mark((function t(){return _i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();dp.type="LOCAL";var pp=dp;function vp(e,t){return bl(e,"POST","/v2/accounts/mfaSignIn:start",kl(e,t))}function mp(e,t){return bl(e,"POST","/v2/accounts/mfaSignIn:finalize",kl(e,t))}var yp=1e12,gp=function(){function e(t){l(this,e),this.auth=t,this.counter=yp,this._widgets=new Map}return p(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new kp(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||yp;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||yp;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=fs(_i().mark((function e(t){var n,r;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||yp,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),kp=function(){function e(t,n,r){var i=this;l(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;sl(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return p(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var bp=Sf("rcb"),wp=new pl(3e4,6e4),_p=function(){function e(){var t;l(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=Yd().grecaptcha)||void 0===t?void 0:t.render)}return p(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return sl(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&wf(Yd().grecaptcha)?Promise.resolve(Yd().grecaptcha):new Promise((function(r,i){var a=Yd().setTimeout((function(){i(il(e,"network-request-failed"))}),wp.get());Yd()[bp]=function(){Yd().clearTimeout(a),delete Yd()[bp];var o=Yd().grecaptcha;if(o&&wf(o)){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(il(e,"internal-error"))},Ef("".concat("https://www.google.com/recaptcha/api.js?","?").concat(rs({onload:bp,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(il(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=Yd().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var xp=function(){function e(){l(this,e)}return p(e,[{key:"load",value:function(){var e=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new gp(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Ep="recaptcha",Sp={theme:"light",type:"image"},Ip=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},Sp);l(this,e),this.parameters=r,this.type=Ep,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Rf(t),this.isInvisible="invisible"===this.parameters.size,sl("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof n?document.getElementById(n):n;sl(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new xp:new _p,this.validateStartingState()}return p(e,[{key:"verify",value:function(){var e=fs(_i().mark((function e(){var t,n,r,i=this;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){sl(!this.parameters.sitekey,this.auth,"argument-error"),sl(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),sl("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Yd()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){sl(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=fs(_i().mark((function e(){var t,n;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=fs(_i().mark((function e(){var t;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sl(hl()&&!$d(),this.auth,"internal-error"),e.next=3,Tp();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,yf(this.auth);case 8:sl(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return sl(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Tp(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Cp=function(){function e(t,n){l(this,e),this.verificationId=t,this.onConfirmation=n}return p(e,[{key:"confirm",value:function(e){var t=vh._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Np(){return Np=fs(_i().mark((function e(t,n,r){var i,a;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Rf(t),e.next=3,Dp(i,n,cs(r));case 3:return a=e.sent,e.abrupt("return",new Cp(a,(function(e){return Hh(i,e)})));case 5:case"end":return e.stop()}}),e)}))),Np.apply(this,arguments)}function Ap(e,t,n){return Rp.apply(this,arguments)}function Rp(){return(Rp=fs(_i().mark((function e(t,n,r){var i,a;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cs(t),e.next=3,Uh(!1,i,"phone");case 3:return e.next=5,Dp(i.auth,n,cs(r));case 5:return a=e.sent,e.abrupt("return",new Cp(a,(function(e){return Gh(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pp(){return(Pp=fs(_i().mark((function e(t,n,r){var i,a;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cs(t),e.next=3,Dp(i.auth,n,cs(r));case 3:return a=e.sent,e.abrupt("return",new Cp(a,(function(e){return Yh(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dp(e,t,n){return Op.apply(this,arguments)}function Op(){return Op=fs(_i().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,sl("string"===typeof a,t,"argument-error"),sl(r.type===Ep,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return sl("enroll"===u.type,t,"internal-error"),e.next=13,Dd(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return sl("signin"===u.type,t,"internal-error"),sl(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,vp(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,ch(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Op.apply(this,arguments)}function Lp(){return(Lp=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fh(cs(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Mp=function(){function e(t){l(this,e),this.providerId=e.PROVIDER_ID,this.auth=Rf(t)}return p(e,[{key:"verifyPhoneNumber",value:function(e,t){return Dp(this.auth,e,cs(t))}}],[{key:"credential",value:function(e,t){return vh._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?vh._fromTokenResponse(n,r):null}}]),e}();function Fp(e,t){return t?ef(t):(sl(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Mp.PROVIDER_ID="phone",Mp.PHONE_SIGN_IN_METHOD="phone";var jp=function(e){m(n,e);var t=b(n);function n(e){var r;return l(this,n),(r=t.call(this,"custom","custom")).params=e,r}return p(n,[{key:"_getIdTokenResponse",value:function(e){return oh(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return oh(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return oh(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Mf);function Up(e){return qh(e.auth,new jp(e),e.bypassAuthState)}function Vp(e){var t=e.auth,n=e.user;return sl(n,t,"internal-error"),Bh(n,new jp(e),e.bypassAuthState)}function Bp(e){return zp.apply(this,arguments)}function zp(){return zp=fs(_i().mark((function e(t){var n,r;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,sl(r=t.user,n,"internal-error"),e.abrupt("return",Fh(r,new jp(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),zp.apply(this,arguments)}var qp=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];l(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return p(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=fs(_i().mark((function t(n,r){return _i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=fs(_i().mark((function e(t){var n,r,i,a,o,u,s;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Up;case"linkViaPopup":case"linkViaRedirect":return Bp;case"reauthViaPopup":case"reauthViaRedirect":return Vp;default:rl(this.auth,"internal-error")}}},{key:"resolve",value:function(e){ll(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){ll(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Kp=new pl(2e3,1e4);function Hp(e,t,n){return Wp.apply(this,arguments)}function Wp(){return Wp=fs(_i().mark((function e(t,n,r){var i,a,o;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Rf(t),ol(t,n,gh),a=Fp(i,r),o=new Jp(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Wp.apply(this,arguments)}function Gp(){return(Gp=fs(_i().mark((function e(t,n,r){var i,a,o;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ol((i=cs(t)).auth,n,gh),a=Fp(i.auth,r),o=new Jp(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qp(e,t,n){return Yp.apply(this,arguments)}function Yp(){return(Yp=fs(_i().mark((function e(t,n,r){var i,a,o;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ol((i=cs(t)).auth,n,gh),a=Fp(i.auth,r),o=new Jp(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Jp=function(e){m(n,e);var t=b(n);function n(e,r,i,a,o){var u;return l(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=k(u),u}return p(n,[{key:"executeNotNull",value:function(){var e=fs(_i().mark((function e(){var t;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return sl(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=fs(_i().mark((function e(){var t,n=this;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ll(1===this.filter.length,"Popup operations only handle one event"),t=Gd(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(il(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(il(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(il(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,Kp.get())}()}}]),n}(qp);Jp.currentPopupAction=null;var $p="pendingRedirect",Xp=new Map,Zp=function(e){m(n,e);var t=b(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return l(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return p(n,[{key:"execute",value:function(){var e=fs(_i().mark((function e(){var t,r;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Xp.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,ev(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Hn(y(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Xp.set(this.auth._key(),t);case 21:return this.bypassAuthState||Xp.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=fs(_i().mark((function e(t){var r;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Hn(y(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Hn(y(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=fs(_i().mark((function e(){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(qp);function ev(e,t){return tv.apply(this,arguments)}function tv(){return tv=fs(_i().mark((function e(t,n){var r,i,a;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ov(n),i=av(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),tv.apply(this,arguments)}function nv(e,t){return rv.apply(this,arguments)}function rv(){return rv=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",av(t)._set(ov(n),"true"));case 1:case"end":return e.stop()}}),e)}))),rv.apply(this,arguments)}function iv(e,t){Xp.set(e._key(),t)}function av(e){return ef(e._redirectPersistence)}function ov(e){return rf($p,e.config.apiKey,e.name)}function uv(e,t,n){return function(e,t,n){return sv.apply(this,arguments)}(e,t,n)}function sv(){return sv=fs(_i().mark((function e(t,n,r){var i,a;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Rf(t),ol(t,n,gh),e.next=4,i._initializationPromise;case 4:return a=Fp(i,r),e.next=7,nv(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)}))),sv.apply(this,arguments)}function cv(e,t,n){return function(e,t,n){return lv.apply(this,arguments)}(e,t,n)}function lv(){return(lv=fs(_i().mark((function e(t,n,r){var i,a,o;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ol((i=cs(t)).auth,n,gh),e.next=4,i.auth._initializationPromise;case 4:return a=Fp(i.auth,r),e.next=7,nv(a,i.auth);case 7:return e.next=9,yv(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fv(e,t,n){return function(e,t,n){return hv.apply(this,arguments)}(e,t,n)}function hv(){return(hv=fs(_i().mark((function e(t,n,r){var i,a,o;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ol((i=cs(t)).auth,n,gh),e.next=4,i.auth._initializationPromise;case 4:return a=Fp(i.auth,r),e.next=7,Uh(!1,i,n.providerId);case 7:return e.next=9,nv(a,i.auth);case 9:return e.next=11,yv(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dv(e,t){return pv.apply(this,arguments)}function pv(){return pv=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rf(t)._initializationPromise;case 2:return e.abrupt("return",vv(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),pv.apply(this,arguments)}function vv(e,t){return mv.apply(this,arguments)}function mv(){return mv=fs(_i().mark((function e(t,n){var r,i,a,o,u,s=arguments;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Rf(t),a=Fp(i,n),o=new Zp(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),mv.apply(this,arguments)}function yv(e){return gv.apply(this,arguments)}function gv(){return(gv=fs(_i().mark((function e(t){var n;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Gd("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var kv=function(){function e(t){l(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return p(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wv(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!wv(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(il(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(bv(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(bv(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function bv(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function wv(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function _v(e){return xv.apply(this,arguments)}function xv(){return xv=fs(_i().mark((function e(t){var n,r=arguments;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",bl(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),xv.apply(this,arguments)}var Ev=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sv=/^https?/;function Iv(){return Iv=fs(_i().mark((function e(t){var n,r,i,a,o;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,_v(t);case 4:n=e.sent,r=n.authorizedDomains,i=T(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Tv(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:rl(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Iv.apply(this,arguments)}function Tv(e){var t=fl(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Sv.test(r))return!1;if(Ev.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Cv=new pl(3e4,6e4);function Nv(){var e=Yd().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=c(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Av=null;function Rv(e){return Av=Av||function(e){return new Promise((function(t,n){var r,i,a;function o(){Nv(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Nv(),n(il(e,"network-request-failed"))},timeout:Cv.get()})}if(null===(i=null===(r=Yd().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Yd().gapi)||void 0===a?void 0:a.load)){var u=Sf("iframefcb");return Yd()[u]=function(){gapi.load?o():n(il(e,"network-request-failed"))},Ef("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Av=null,e}))}(e),Av}var Pv=new pl(5e3,15e3),Dv="__/auth/iframe",Ov="emulator/auth/iframe",Lv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Mv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Fv(e){var t=e.config;sl(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?vl(t,Ov):"https://".concat(e.config.authDomain,"/").concat(Dv),r={apiKey:t.apiKey,appName:e.name,v:sc},i=Mv.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(rs(r).slice(1))}function jv(e){return Uv.apply(this,arguments)}function Uv(){return Uv=fs(_i().mark((function e(t){var n,r;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rv(t);case 2:return n=e.sent,sl(r=Yd().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Fv(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Lv,dontclear:!0},(function(e){return new Promise(function(){var n=fs(_i().mark((function n(r,i){var a,o,u;return _i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Yd().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=il(t,"network-request-failed"),o=Yd().setTimeout((function(){i(a)}),Pv.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Uv.apply(this,arguments)}var Vv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Bv=function(){function e(t){l(this,e),this.window=t,this.associatedEvent=null}return p(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function zv(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},Vv),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Ku().toLowerCase();n&&(u=cf(c)?"_blank":n),uf(c)&&(t=t||"http://localhost",s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=S(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return pf(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ku())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new Bv(null);var f=window.open(t||"",u,l);sl(f,e,"popup-blocked");try{f.focus()}catch(h){}return new Bv(f)}var qv="__/auth/handler",Kv="emulator/auth/handler",Hv=encodeURIComponent("fac");function Wv(e,t,n,r,i,a){return Gv.apply(this,arguments)}function Gv(){return Gv=fs(_i().mark((function e(t,n,r,i,a,o){var u,s,c,l,f,h,d,p,v,m,y,g,k;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(sl(t.config.authDomain,t,"auth-domain-config-required"),sl(t.config.apiKey,t,"invalid-api-key"),u={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:sc,eventId:a},n instanceof gh)for(n.setDefaultLanguage(t.languageCode),u.providerId=n.providerId||"",es(n.getCustomParameters())||(u.customParameters=JSON.stringify(n.getCustomParameters())),s=0,c=Object.entries(o||{});s<c.length;s++)l=S(c[s],2),f=l[0],h=l[1],u[f]=h;for(n instanceof kh&&(d=n.getScopes().filter((function(e){return""!==e}))).length>0&&(u.scopes=d.join(",")),t.tenantId&&(u.tid=t.tenantId),p=u,v=0,m=Object.keys(p);v<m.length;v++)y=m[v],void 0===p[y]&&delete p[y];return e.next=10,t._getAppCheckToken();case 10:return g=e.sent,k=g?"#".concat(Hv,"=").concat(encodeURIComponent(g)):"",e.abrupt("return","".concat(Qv(t),"?").concat(rs(p).slice(1)).concat(k));case 13:case"end":return e.stop()}}),e)}))),Gv.apply(this,arguments)}function Qv(e){var t=e.config;return t.emulator?vl(t,Kv):"https://".concat(t.authDomain,"/").concat(qv)}var Yv="webStorageSupport",Jv=function(){function e(){l(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Kd,this._completeRedirectFn=vv,this._overrideRedirectResult=iv}return p(e,[{key:"_openPopup",value:function(){var e=fs(_i().mark((function e(t,n,r,i){var a,o;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ll(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,Wv(t,n,r,fl(),i);case 3:return o=e.sent,e.abrupt("return",zv(t,o,Gd()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=fs(_i().mark((function e(t,n,r,i){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,Wv(t,n,r,fl(),i);case 4:return Jd(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(ll(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=fs(_i().mark((function e(t){var n,r;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jv(t);case 2:return n=e.sent,r=new kv(t),n.register("authEvent",(function(e){return sl(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Yv,{type:Yv},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Yv];void 0!==i&&t(!!i),rl(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Iv.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return vf()||sf()||pf()}}]),e}(),$v=Jv,Xv=function(){function e(t){l(this,e),this.factorId=t}return p(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return cl("unexpected MultiFactorSessionType")}}}]),e}(),Zv=function(e){m(n,e);var t=b(n);function n(e){var r;return l(this,n),(r=t.call(this,"phone")).credential=e,r}return p(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return bl(e,"POST","/v2/accounts/mfaEnrollment:finalize",kl(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return bl(e,"POST","/v2/accounts/mfaSignIn:finalize",kl(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(Xv),em=function(){function e(){l(this,e)}return p(e,null,[{key:"assertion",value:function(e){return Zv._fromCredential(e)}}]),e}();em.FACTOR_ID="phone";var tm=function(){function e(){l(this,e)}return p(e,null,[{key:"assertionForEnrollment",value:function(e,t){return nm._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return nm._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=fs(_i().mark((function e(t){var n,r,i;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sl("undefined"!==typeof(null===(n=(r=t).user)||void 0===n?void 0:n.auth),"internal-error"),e.next=4,Od(r.user.auth,{idToken:r.credential,totpEnrollmentInfo:{}});case 4:return i=e.sent,e.abrupt("return",rm._fromStartTotpMfaEnrollmentResponse(i,r.user.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();tm.FACTOR_ID="totp";var nm=function(e){m(n,e);var t=b(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return p(n,[{key:"_finalizeEnroll",value:function(){var e=fs(_i().mark((function e(t,n,r){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sl("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",Ld(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=fs(_i().mark((function e(t,n){var r;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sl(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",mp(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(Xv),rm=function(){function e(t,n,r,i,a,o,u){l(this,e),this.sessionInfo=o,this.auth=u,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return p(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(im(e)||im(t))&&(r=!0),r&&(im(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),im(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function im(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var am="@firebase/auth",om="1.0.0",um=function(){function e(t){l(this,e),this.auth=t,this.internalListeners=new Map}return p(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=fs(_i().mark((function e(t){var n;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){sl(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var sm;!function(e){var t;null===(t=Bu())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function cm(){return window}sm="Browser",tc(new hs("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,u=o.apiKey,s=o.authDomain;sl(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:u,authDomain:s,clientPlatform:sm,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mf(sm)},l=new Af(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ef);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),tc(new hs("auth-internal",(function(e){return function(e){return new um(e)}(Rf(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),pc(am,om,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(sm)),pc(am,om,"esm2017");var lm=2e3;function fm(e,t,n){return hm.apply(this,arguments)}function hm(){return hm=fs(_i().mark((function e(t,n,r){var i,a,o,u,s;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=cm(),o=a.BuildInfo,ll(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,gm(n.sessionId);case 4:return u=e.sent,s={},pf()?s.ibi=o.packageName:ff()?s.apn=o.packageName:rl(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Wv(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),hm.apply(this,arguments)}function dm(){return dm=fs(_i().mark((function e(t){var n,r,i;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=cm(),r=n.BuildInfo,i={},pf()?i.iosBundleId=r.packageName:ff()?i.androidPackageName=r.packageName:rl(t,"operation-not-supported-in-this-environment"),e.next=5,_v(t,i);case 5:case"end":return e.stop()}}),e)}))),dm.apply(this,arguments)}function pm(e){var t=cm().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ku();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function vm(e,t,n){return mm.apply(this,arguments)}function mm(){return mm=fs(_i().mark((function e(t,n,r){var i,a,o;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cm(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(il(t,"redirect-cancelled-by-user"))}),lm))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),ff()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),mm.apply(this,arguments)}function ym(e){var t,n,r,i,a,o,u,s,c,l,f=cm();sl("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),sl("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),sl("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),sl("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),sl("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function gm(e){return km.apply(this,arguments)}function km(){return(km=fs(_i().mark((function e(t){var n,r,i;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=bm(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bm(e){if(ll(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var wm=20,_m=function(e){m(n,e);var t=b(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return p(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Hn(y(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=fs(_i().mark((function e(){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(kv);function xm(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Cm(),postBody:null,tenantId:e.tenantId,error:il(e,"no-auth-event")}}function Em(e,t){return Nm()._set(Am(e),t)}function Sm(e){return Im.apply(this,arguments)}function Im(){return Im=fs(_i().mark((function e(t){var n;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nm()._get(Am(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Nm()._remove(Am(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),Im.apply(this,arguments)}function Tm(e,t){var n,r,i=function(e){var t=Rm(e),n=t.link?decodeURIComponent(t.link):void 0,r=Rm(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Rm(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Rm(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?il(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Cm(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<wm;n++){var r=Math.floor(62*Math.random());e.push(t.charAt(r))}return e.join("")}function Nm(){return ef(zd)}function Am(e){return rf("authEvent",e.config.apiKey,e.name)}function Rm(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=I(e.split("?"));t[0];return is(t.slice(1).join("?"))}var Pm=function(){function e(){l(this,e),this._redirectPersistence=Kd,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=vv,this._overrideRedirectResult=iv}return p(e,[{key:"_initialize",value:function(){var e=fs(_i().mark((function e(t){var n,r;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new _m(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){rl(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=fs(_i().mark((function e(t,n,r,i){var a,o,u,s;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ym(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Xp.clear(),e.next=10,this._originValidation(t);case 10:return o=xm(t,r,i),e.next=13,Em(t,o);case 13:return e.next=15,fm(t,o,n);case 15:return u=e.sent,e.next=18,pm(u);case 18:return s=e.sent,e.abrupt("return",vm(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return dm.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=cm(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(fs(_i().mark((function n(){return _i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Sm(e);case 2:t.onEvent(Om());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=fs(_i().mark((function n(r){var i,a;return _i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Sm(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Tm(i,r.url)),t.onEvent(a||Om());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");cm().handleOpenURL=function(){var e=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Dm=Pm;function Om(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:il("no-auth-event")}}var Lm=1e3;function Mm(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Fm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ku();return!("file:"!==Mm()&&"ionic:"!==Mm()&&"capacitor:"!==Mm()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function jm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ku();return Qu()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ku();return/Edge\/\d+/.test(e)}(e)}function Um(){try{var e=self.localStorage,t=Gd();if(e)return e.setItem(t,"1"),e.removeItem(t),!jm()||Yu()}catch(n){return Vm()&&Yu()}return!1}function Vm(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Bm(){return("http:"===Mm()||"https:"===Mm()||Wu()||Fm())&&!(Gu()||Hu())&&Um()&&!Vm()}function zm(){return Fm()&&"undefined"!==typeof document}function qm(){return Km.apply(this,arguments)}function Km(){return(Km=fs(_i().mark((function e(){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(zm()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),Lm);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Hm={LOCAL:"local",NONE:"none",SESSION:"session"},Wm=sl,Gm="persistence";function Qm(e,t){Wm(Object.values(Hm).includes(t),e,"invalid-persistence-type"),Gu()?Wm(t!==Hm.SESSION,e,"unsupported-persistence-type"):Hu()?Wm(t===Hm.NONE,e,"unsupported-persistence-type"):Vm()?Wm(t===Hm.NONE||t===Hm.LOCAL&&Yu(),e,"unsupported-persistence-type"):Wm(t===Hm.NONE||Um(),e,"unsupported-persistence-type")}function Ym(e){return Jm.apply(this,arguments)}function Jm(){return Jm=fs(_i().mark((function e(t){var n,r;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=$m(),r=rf(Gm,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),Jm.apply(this,arguments)}function $m(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Xm=sl,Zm=function(){function e(){l(this,e),this.browserResolver=ef($v),this.cordovaResolver=ef(Dm),this.underlyingResolver=null,this._redirectPersistence=Kd,this._completeRedirectFn=vv,this._overrideRedirectResult=iv}return p(e,[{key:"_initialize",value:function(){var e=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=fs(_i().mark((function e(t,n,r,i){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=fs(_i().mark((function e(t,n,r,i){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return zm()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Xm(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=fs(_i().mark((function e(){var t;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,qm();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ey(e){return e.unwrap()}function ty(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new oy(e,function(e,t){var n,r=cs(e),i=t;return sl(t.customData.operationType,r,"argument-error"),sl(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Pd._fromError(r,i)}(e,t));else if(r){var i=ny(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function ny(e){var t=(e instanceof Ju?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Ju)&&"temporaryProof"in t&&"phoneNumber"in t)return Mp.credentialFromResult(e);var n,r=t.providerId;if(!r||r===qc.PASSWORD)return null;switch(r){case qc.GOOGLE:n=_h;break;case qc.FACEBOOK:n=wh;break;case qc.GITHUB:n=xh;break;case qc.TWITTER:n=Ih;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Eh._create(r,u):sh._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new bh(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Ju?n.credentialFromError(e):n.credentialFromResult(e)}function ry(e,t){return t.catch((function(t){throw t instanceof Ju&&ty(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,ny(t)),additionalUserInfo:Ad(e),user:uy.getOrCreate(r)}}))}function iy(e,t){return ay.apply(this,arguments)}function ay(){return ay=fs(_i().mark((function e(t,n){var r;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return ry(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),ay.apply(this,arguments)}var oy=function(){function e(t,n){l(this,e),this.resolver=n,this.auth=function(e){return e.wrapped()}(t)}return p(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return ry(ey(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),uy=function(){function e(t){l(this,e),this._delegate=t,this.multiFactor=function(e){var t=cs(e);return jd.has(t)||jd.set(t,Fd._fromUser(t)),jd.get(t)}(t)}return p(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ry(this.auth,Gh(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",iy(this.auth,Ap(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ry(this.auth,Qp(this._delegate,t,Zm)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ym(Rf(this.auth));case 2:return e.abrupt("return",fv(this._delegate,t,Zm));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ry(this.auth,Yh(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return iy(this.auth,function(e,t,n){return Pp.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return ry(this.auth,function(e,t,n){return Gp.apply(this,arguments)}(this._delegate,e,Zm))}},{key:"reauthenticateWithRedirect",value:function(){var e=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ym(Rf(this.auth));case 2:return e.abrupt("return",cv(this._delegate,t,Zm));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return yd.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lh(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return _d(cs(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return _d(cs(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Lp.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return wd.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return gd.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();uy.USER_MAP=new WeakMap;var sy=sl,cy=function(){function e(t,n){if(l(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;sy(r,"invalid-api-key",{appName:t.name}),sy(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Zm:void 0;this._delegate=n.initialize({options:{persistence:fy(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap($c),this.linkUnderlyingAuth()}return p(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?uy.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Df(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return od.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return ud(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return ad.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ry(this._delegate,ld(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return md.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=mh.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=fs(_i().mark((function e(){var t;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sy(Bm(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,dv(this._delegate,Zm);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",ry(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Rf(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=ly(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=ly(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return hd.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return id.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=fs(_i().mark((function e(t){var n,r;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Qm(this._delegate,t),e.t0=t,e.next=e.t0===Hm.SESSION?4:e.t0===Hm.LOCAL?6:e.t0===Hm.NONE?11:13;break;case 4:return n=Kd,e.abrupt("break",14);case 6:return e.next=8,ef(pp)._isAvailable();case 8:return r=e.sent,n=r?pp:zd,e.abrupt("break",14);case 11:return n=nf,e.abrupt("break",14);case 13:return e.abrupt("return",rl("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return ry(this._delegate,function(e){return Rh.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return ry(this._delegate,Hh(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return ry(this._delegate,function(e,t){return Zh.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return ry(this._delegate,function(e,t,n){return Hh(cs(e),yh.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return ry(this._delegate,function(e,t,n){return dd.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return iy(this._delegate,function(e,t,n){return Np.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sy(Bm(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",ry(this._delegate,Hp(this._delegate,t,Zm)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sy(Bm(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Ym(this._delegate);case 3:return e.abrupt("return",uv(this._delegate,t,Zm));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return cd.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function ly(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&uy.getOrCreate(e))},error:t,complete:n}}function fy(e,t){var n=function(e,t){var n=$m();if(!n)return[];var r=rf(Gm,e,t);switch(n.getItem(r)){case Hm.NONE:return[nf];case Hm.LOCAL:return[pp,Kd];case Hm.SESSION:return[Kd];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(pp)||n.push(pp),"undefined"!==typeof window)for(var r=0,i=[zd,Kd];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(nf)||n.push(nf),n}cy.Persistence=Hm;var hy=function(){function e(){l(this,e),this.providerId="phone",this._delegate=new Mp(ey(Vc.auth()))}return p(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Mp.credential(e,t)}}]),e}();hy.PHONE_SIGN_IN_METHOD=Mp.PHONE_SIGN_IN_METHOD,hy.PROVIDER_ID=Mp.PROVIDER_ID;var dy,py=sl,vy=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vc.app();l(this,e),py(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Ip(i.auth(),t,n),this.type=this._delegate.type}return p(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(dy=Vc).INTERNAL.registerComponent(new hs("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new cy(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Kc,PASSWORD_RESET:Hc,RECOVER_EMAIL:Wc,REVERT_SECOND_FACTOR_ADDITION:Gc,VERIFY_AND_CHANGE_EMAIL:Qc,VERIFY_EMAIL:Yc}},EmailAuthProvider:yh,FacebookAuthProvider:wh,GithubAuthProvider:xh,GoogleAuthProvider:_h,OAuthProvider:bh,SAMLAuthProvider:Sh,PhoneAuthProvider:hy,PhoneMultiFactorGenerator:em,RecaptchaVerifier:vy,TwitterAuthProvider:Ih,Auth:cy,AuthCredential:Mf,Error:Ju}).setInstantiationMode("LAZY").setMultipleInstances(!1)),dy.registerVersion("@firebase/auth-compat","0.4.3");var my,yy="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},gy={},ky=ky||{},by=yy||self;function wy(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function _y(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var xy="closure_uid_"+(1e9*Math.random()>>>0),Ey=0;function Sy(e,t,n){return e.call.apply(e.bind,arguments)}function Iy(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Ty(e,t,n){return(Ty=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Sy:Iy).apply(null,arguments)}function Cy(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ny(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Ay(){this.s=this.s,this.o=this.o}Ay.prototype.s=!1,Ay.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,xy)&&e[xy]||(e[xy]=++Ey))},Ay.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Ry=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Py(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Dy(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(wy(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Oy(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Oy.prototype.h=function(){this.defaultPrevented=!0};var Ly=function(){if(!by.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{by.addEventListener("test",(function(){}),t),by.removeEventListener("test",(function(){}),t)}catch(n){}return e}();function My(e){return/^[\s\xa0]*$/.test(e)}function Fy(){var e=by.navigator;return e&&(e=e.userAgent)?e:""}function jy(e){return-1!=Fy().indexOf(e)}function Uy(e){return Uy[" "](e),e}Uy[" "]=function(){};var Vy,By,zy=jy("Opera"),qy=jy("Trident")||jy("MSIE"),Ky=jy("Edge"),Hy=Ky||qy,Wy=jy("Gecko")&&!(-1!=Fy().toLowerCase().indexOf("webkit")&&!jy("Edge"))&&!(jy("Trident")||jy("MSIE"))&&!jy("Edge"),Gy=-1!=Fy().toLowerCase().indexOf("webkit")&&!jy("Edge");function Qy(){var e=by.document;return e?e.documentMode:void 0}e:{var Yy="",Jy=function(){var e=Fy();return Wy?/rv:([^\);]+)(\)|;)/.exec(e):Ky?/Edge\/([\d\.]+)/.exec(e):qy?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Gy?/WebKit\/(\S+)/.exec(e):zy?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Jy&&(Yy=Jy?Jy[1]:""),qy){var $y=Qy();if(null!=$y&&$y>parseFloat(Yy)){Vy=String($y);break e}}Vy=Yy}if(by.document&&qy){var Xy=Qy();By=Xy||(parseInt(Vy,10)||void 0)}else By=void 0;var Zy=By;function eg(e,t){if(Oy.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Wy){e:{try{Uy(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:tg[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&eg.$.h.call(this)}}Ny(eg,Oy);var tg={2:"touch",3:"pen",4:"mouse"};eg.prototype.h=function(){eg.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ng="closure_listenable_"+(1e6*Math.random()|0),rg=0;function ig(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++rg,this.fa=this.ia=!1}function ag(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function og(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function ug(e){var t={};for(var n in e)t[n]=e[n];return t}var sg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function cg(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<sg.length;a++)n=sg[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function lg(e){this.src=e,this.g={},this.h=0}function fg(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Ry(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(ag(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function hg(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}lg.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=hg(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new ig(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var dg="closure_lm_"+(1e6*Math.random()|0),pg={};function vg(e,t,n,r,i){if(r&&r.once)return yg(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)vg(e,t[a],n,r,i);return null}return n=Eg(n),e&&e[ng]?e.O(t,n,_y(r)?!!r.capture:!!r,i):mg(e,t,n,!1,r,i)}function mg(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=_y(i)?!!i.capture:!!i,u=_g(e);if(u||(e[dg]=u=new lg(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=wg;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ly||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(bg(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function yg(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)yg(e,t[a],n,r,i);return null}return n=Eg(n),e&&e[ng]?e.P(t,n,_y(r)?!!r.capture:!!r,i):mg(e,t,n,!0,r,i)}function gg(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)gg(e,t[a],n,r,i);else r=_y(r)?!!r.capture:!!r,n=Eg(n),e&&e[ng]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=hg(a=e.g[t],n,r,i))&&(ag(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=_g(e))&&(t=e.g[t.toString()],e=-1,t&&(e=hg(t,n,r,i)),(n=-1<e?t[e]:null)&&kg(n))}function kg(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[ng])fg(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(bg(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=_g(t))?(fg(n,e),0==n.h&&(n.src=null,t[dg]=null)):ag(e)}}}function bg(e){return e in pg?pg[e]:pg[e]="on"+e}function wg(e,t){if(e.fa)e=!0;else{t=new eg(t,this);var n=e.listener,r=e.la||e.src;e.ia&&kg(e),e=n.call(r,t)}return e}function _g(e){return(e=e[dg])instanceof lg?e:null}var xg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Eg(e){return"function"===typeof e?e:(e[xg]||(e[xg]=function(t){return e.handleEvent(t)}),e[xg])}function Sg(){Ay.call(this),this.i=new lg(this),this.S=this,this.J=null}function Ig(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Oy(t,e);else if(t instanceof Oy)t.target=t.target||e;else{var i=t;cg(t=new Oy(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Tg(o,r,!0,t)&&i}if(i=Tg(o=t.g=e,r,!0,t)&&i,i=Tg(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Tg(o=t.g=n[a],r,!1,t)&&i}function Tg(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&fg(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Ny(Sg,Ay),Sg.prototype[ng]=!0,Sg.prototype.removeEventListener=function(e,t,n,r){gg(this,e,t,n,r)},Sg.prototype.N=function(){if(Sg.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ag(n[r]);delete t.g[e],t.h--}}this.J=null},Sg.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Sg.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Cg=by.JSON.stringify,Ng=function(){function e(t,n){l(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return p(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function Ag(){var e=jg,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Rg=function(){function e(){l(this,e),this.h=this.g=null}return p(e,[{key:"add",value:function(e,t){var n=Pg.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Pg=new Ng((function(){return new Dg}),(function(e){return e.reset()})),Dg=function(){function e(){l(this,e),this.next=this.g=this.h=null}return p(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Og(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Lg(e){by.setTimeout((function(){throw e}),0)}var Mg,Fg=!1,jg=new Rg,Ug=function(){var e=by.Promise.resolve(void 0);Mg=function(){e.then(Vg)}},Vg=function(){for(var e;e=Ag();){try{e.h.call(e.g)}catch(n){Lg(n)}var t=Pg;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Fg=!1};function Bg(e,t){Sg.call(this),this.h=e||1,this.g=t||by,this.j=Ty(this.qb,this),this.l=Date.now()}function zg(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function qg(e,t,n){if("function"===typeof e)n&&(e=Ty(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Ty(e.handleEvent,e)}return 2147483647<Number(t)?-1:by.setTimeout(e,t||0)}function Kg(e){e.g=qg((function(){e.g=null,e.i&&(e.i=!1,Kg(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Ny(Bg,Sg),(my=Bg.prototype).ga=!1,my.T=null,my.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ig(this,"tick"),this.ga&&(zg(this),this.start()))}},my.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},my.N=function(){Bg.$.N.call(this),zg(this),delete this.g};var Hg=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return p(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Kg(this)}},{key:"N",value:function(){Hn(y(n.prototype),"N",this).call(this),this.g&&(by.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Ay);function Wg(e){Ay.call(this),this.h=e,this.g={}}Ny(Wg,Ay);var Gg=[];function Qg(e,t,n,r){Array.isArray(n)||(n&&(Gg[0]=n.toString()),n=Gg);for(var i=0;i<n.length;i++){var a=vg(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Yg(e){og(e.g,(function(e,t){this.g.hasOwnProperty(t)&&kg(e)}),e),e.g={}}function Jg(){this.g=!0}function $g(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Cg(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Wg.prototype.N=function(){Wg.$.N.call(this),Yg(this)},Wg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Jg.prototype.Ea=function(){this.g=!1},Jg.prototype.info=function(){};var Xg={},Zg=null;function ek(){return Zg=Zg||new Sg}function tk(e){Oy.call(this,Xg.Ta,e)}function nk(e){var t=ek();Ig(t,new tk(t))}function rk(e,t){Oy.call(this,Xg.STAT_EVENT,e),this.stat=t}function ik(e){var t=ek();Ig(t,new rk(t,e))}function ak(e,t){Oy.call(this,Xg.Ua,e),this.size=t}function ok(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return by.setTimeout((function(){e()}),t)}Xg.Ta="serverreachability",Ny(tk,Oy),Xg.STAT_EVENT="statevent",Ny(rk,Oy),Xg.Ua="timingevent",Ny(ak,Oy);var uk={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},sk={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ck(){}function lk(e){return e.h||(e.h=e.i())}function fk(){}ck.prototype.h=null;var hk,dk={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function pk(){Oy.call(this,"d")}function vk(){Oy.call(this,"c")}function mk(){}function yk(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Wg(this),this.P=kk,e=Hy?125:void 0,this.V=new Bg(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new gk}function gk(){this.i=null,this.g="",this.h=!1}Ny(pk,Oy),Ny(vk,Oy),Ny(mk,ck),mk.prototype.g=function(){return new XMLHttpRequest},mk.prototype.i=function(){return{}},hk=new mk;var kk=45e3,bk={},wk={};function _k(e,t,n){e.L=1,e.v=Bk(Mk(t)),e.s=n,e.S=!0,xk(e,null)}function xk(e,t){e.G=Date.now(),Tk(e),e.A=Mk(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),eb(n.i,"t",r),e.C=0,n=e.l.J,e.h=new gk,e.g=tw(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Hg(Ty(e.Pa,e,e.g),e.O)),Qg(e.U,e.g,"readystatechange",e.nb),t=e.I?ug(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),nk(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function Ek(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Sk(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=Ik(e,n))==wk){4==t&&(e.o=4,ik(14),i=!1),$g(e.j,e.m,null,"[Incomplete Response]");break}if(r==bk){e.o=4,ik(15),$g(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}$g(e.j,e.m,r,null),Pk(e,r)}Ek(e)&&r!=wk&&r!=bk&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,ik(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Gb(t),t.M=!0,ik(11))):($g(e.j,e.m,n,"[Invalid Chunked Response]"),Rk(e),Ak(e))}function Ik(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?wk:(n=Number(t.substring(n,r)),isNaN(n)?bk:(r+=1)+n>t.length?wk:(t=t.slice(r,r+n),e.C=r+n,t))}function Tk(e){e.Y=Date.now()+e.P,Ck(e,e.P)}function Ck(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ok(Ty(e.lb,e),t)}function Nk(e){e.B&&(by.clearTimeout(e.B),e.B=null)}function Ak(e){0==e.l.H||e.J||Jb(e.l,e)}function Rk(e){Nk(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,zg(e.V),Yg(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Pk(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||ub(n.i,e)))if(!e.K&&ub(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Yb(n),Ub(n)}Wb(n),ik(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=ok(Ty(n.ib,n),6e3));if(1>=ob(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else Xb(n,11)}else if((e.K||n.g==e)&&Yb(n),!My(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var u=a[4];null!=u&&(n.Ga=u,n.l.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(sb(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,Vk(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=ew(r,r.J?r.pa:null,r.Y),d.K){cb(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&(Nk(p),Tk(p)),r.g=d}else Hb(r);0<n.j.length&&Bb(n)}else"stop"!=a[0]&&"close"!=a[0]||Xb(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Xb(n,7):jb(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}nk()}catch(a){}}function Dk(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(wy(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(wy(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(wy(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(my=yk.prototype).setTimeout=function(e){this.P=e},my.nb=function(e){e=e.target;var t=this.M;t&&3==Pb(e)?t.l():this.Pa(e)},my.Pa=function(e){try{if(e==this.g)e:{var t=Pb(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||Hy||this.g&&(this.h.h||this.g.ja()||Db(this.g)))){this.J||4!=t||7==n||nk(),Nk(this);var r=this.g.da();this.ca=r;t:if(Ek(this)){var i=Db(this.g);e="";var a=i.length,o=4==Pb(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Rk(this),Ak(this);var u="";break t}this.h.i=new by.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!My(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,ik(12),Rk(this),Ak(this);break e}$g(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pk(this,r)}this.S?(Sk(this,t,u),Hy&&this.i&&3==t&&(Qg(this.U,this.V,"tick",this.mb),this.V.start())):($g(this.j,this.m,u,null),Pk(this,u)),4==t&&Rk(this),this.i&&!this.J&&(4==t?Jb(this.l,this):(this.i=!1,Tk(this)))}else(function(e){var t={};e=(e.g&&2<=Pb(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!My(e[n])){var r=Og(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<u.indexOf("Unknown SID")?(this.o=3,ik(12)):(this.o=0,ik(13)),Rk(this),Ak(this)}}}catch(t){}},my.mb=function(){if(this.g){var e=Pb(this.g),t=this.g.ja();this.C<t.length&&(Nk(this),Sk(this,e,t),this.i&&4!=e&&Tk(this))}},my.cancel=function(){this.J=!0,Rk(this)},my.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(nk(),ik(17)),Rk(this),this.o=2,Ak(this)):Ck(this,this.Y-e)};var Ok=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lk(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Lk){this.h=e.h,Fk(this,e.j),this.s=e.s,this.g=e.g,jk(this,e.m),this.l=e.l;var t=e.i,n=new Jk;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Uk(this,n),this.o=e.o}else e&&(t=String(e).match(Ok))?(this.h=!1,Fk(this,t[1]||"",!0),this.s=zk(t[2]||""),this.g=zk(t[3]||"",!0),jk(this,t[4]),this.l=zk(t[5]||"",!0),Uk(this,t[6]||"",!0),this.o=zk(t[7]||"")):(this.h=!1,this.i=new Jk(null,this.h))}function Mk(e){return new Lk(e)}function Fk(e,t,n){e.j=n?zk(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function jk(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Uk(e,t,n){t instanceof Jk?(e.i=t,function(e,t){t&&!e.j&&($k(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Xk(this,t),eb(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=qk(t,Qk)),e.i=new Jk(t,e.h))}function Vk(e,t,n){e.i.set(t,n)}function Bk(e){return Vk(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function zk(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function qk(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Kk),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Kk(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Lk.prototype.toString=function(){var e=[],t=this.j;t&&e.push(qk(t,Hk,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(qk(t,Hk,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(qk(n,"/"==n.charAt(0)?Gk:Wk,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",qk(n,Yk)),e.join("")};var Hk=/[#\/\?@]/g,Wk=/[#\?:]/g,Gk=/[#\?]/g,Qk=/[#\?@]/g,Yk=/#/g;function Jk(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function $k(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Xk(e,t){$k(e),t=tb(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Zk(e,t){return $k(e),t=tb(e,t),e.g.has(t)}function eb(e,t,n){Xk(e,t),0<n.length&&(e.i=null,e.g.set(tb(e,t),Py(n)),e.h+=n.length)}function tb(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(my=Jk.prototype).add=function(e,t){$k(this),this.i=null,e=tb(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},my.forEach=function(e,t){$k(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},my.ta=function(){$k(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},my.Z=function(e){$k(this);var t=[];if("string"===typeof e)Zk(this,e)&&(t=t.concat(this.g.get(tb(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},my.set=function(e,t){return $k(this),this.i=null,Zk(this,e=tb(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},my.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},my.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var nb=p((function e(t,n){l(this,e),this.g=t,this.map=n}));function rb(e){this.l=e||ib,by.PerformanceNavigationTiming?e=0<(e=by.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(by.g&&by.g.Ka&&by.g.Ka()&&by.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ib=10;function ab(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ob(e){return e.h?1:e.g?e.g.size:0}function ub(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function sb(e,t){e.g?e.g.add(t):e.h=t}function cb(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function lb(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=T(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return Py(e.i)}rb.prototype.cancel=function(){if(this.i=lb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=T(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var fb,hb=function(){function e(){l(this,e)}return p(e,[{key:"stringify",value:function(e){return by.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return by.JSON.parse(e,void 0)}}]),e}();function db(){this.g=new hb}function pb(e,t,n){var r=n||"";try{Dk(e,(function(e,n){var i=e;_y(e)&&(i=Cg(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function vb(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function mb(e){this.l=e.fc||null,this.j=e.ob||!1}function yb(e,t){Sg.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=gb,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ny(mb,ck),mb.prototype.g=function(){return new yb(this.l,this.j)},mb.prototype.i=(fb={},function(){return fb}),Ny(yb,Sg);var gb=0;function kb(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function bb(e){e.readyState=4,e.l=null,e.j=null,e.A=null,wb(e)}function wb(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(my=yb.prototype).open=function(e,t){if(this.readyState!=gb)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,wb(this)},my.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||by).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},my.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,bb(this)),this.readyState=gb},my.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,wb(this)),this.g&&(this.readyState=3,wb(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof by.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;kb(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},my.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?bb(this):wb(this),3==this.readyState&&kb(this)}},my.Za=function(e){this.g&&(this.response=this.responseText=e,bb(this))},my.Ya=function(e){this.g&&(this.response=e,bb(this))},my.ka=function(){this.g&&bb(this)},my.setRequestHeader=function(e,t){this.v.append(e,t)},my.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},my.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(yb.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var _b=by.JSON.parse;function xb(e){Sg.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Eb,this.L=this.M=!1}Ny(xb,Sg);var Eb="",Sb=/^https?$/i,Ib=["POST","PUT"];function Tb(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Cb(e),Ab(e)}function Cb(e){e.F||(e.F=!0,Ig(e,"complete"),Ig(e,"error"))}function Nb(e){if(e.h&&"undefined"!=typeof ky&&(!e.C[1]||4!=Pb(e)||2!=e.da()))if(e.v&&4==Pb(e))qg(e.La,0,e);else if(Ig(e,"readystatechange"),4==Pb(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(Ok)[1]||null;!a&&by.self&&by.self.location&&(a=by.self.location.protocol.slice(0,-1)),i=!Sb.test(a?a.toLowerCase():"")}t=i}if(t)Ig(e,"complete"),Ig(e,"success");else{e.m=6;try{var o=2<Pb(e)?e.g.statusText:""}catch(u){o=""}e.j=o+" ["+e.da()+"]",Cb(e)}}finally{Ab(e)}}}function Ab(e,t){if(e.g){Rb(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||Ig(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Rb(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(by.clearTimeout(e.A),e.A=null)}function Pb(e){return e.g?e.g.readyState:0}function Db(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Eb:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Vw){return null}}function Ob(e){var t="";return og(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Lb(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ob(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Vk(e,t,n))}function Mb(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Fb(e){this.Ga=0,this.j=[],this.l=new Jg,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Mb("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Mb("baseRetryDelayMs",5e3,e),this.hb=Mb("retryDelaySeedMs",1e4,e),this.eb=Mb("forwardChannelMaxRetries",2,e),this.xa=Mb("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new rb(e&&e.concurrentRequestLimit),this.Ja=new db,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function jb(e){if(Vb(e),3==e.H){var t=e.W++,n=Mk(e.I);if(Vk(n,"SID",e.K),Vk(n,"RID",t),Vk(n,"TYPE","terminate"),qb(e,n),(t=new yk(e,e.l,t)).L=2,t.v=Bk(Mk(n)),n=!1,by.navigator&&by.navigator.sendBeacon)try{n=by.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&by.Image&&((new Image).src=t.v,n=!0),n||(t.g=tw(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Tk(t)}Zb(e)}function Ub(e){e.g&&(Gb(e),e.g.cancel(),e.g=null)}function Vb(e){Ub(e),e.u&&(by.clearTimeout(e.u),e.u=null),Yb(e),e.i.cancel(),e.m&&("number"===typeof e.m&&by.clearTimeout(e.m),e.m=null)}function Bb(e){if(!ab(e.i)&&!e.m){e.m=!0;var t=e.Na;Mg||Ug(),Fg||(Mg(),Fg=!0),jg.add(t,e),e.C=0}}function zb(e,t){var n;n=t?t.m:e.W++;var r=Mk(e.I);Vk(r,"SID",e.K),Vk(r,"RID",n),Vk(r,"AID",e.V),qb(e,r),e.o&&e.s&&Lb(r,e.o,e.s),n=new yk(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Kb(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),sb(e.i,n),_k(n,r,t)}function qb(e,t){e.na&&og(e.na,(function(e,n){Vk(t,n,e)})),e.h&&Dk({},(function(e,n){Vk(t,n,e)}))}function Kb(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Ty(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].g,l=i[s].map;if(0>(c-=a))a=Math.max(0,i[s].g-100),u=!1;else try{pb(l,o,"req"+c+"_")}catch(ix){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function Hb(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Mg||Ug(),Fg||(Mg(),Fg=!0),jg.add(t,e),e.A=0}}function Wb(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=ok(Ty(e.Ma,e),$b(e,e.A)),e.A++,!0)}function Gb(e){null!=e.B&&(by.clearTimeout(e.B),e.B=null)}function Qb(e){e.g=new yk(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Mk(e.wa);Vk(t,"RID","rpc"),Vk(t,"SID",e.K),Vk(t,"AID",e.V),Vk(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Vk(t,"TO",e.qa),Vk(t,"TYPE","xmlhttp"),qb(e,t),e.o&&e.s&&Lb(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Bk(Mk(t)),n.s=null,n.S=!0,xk(n,e)}function Yb(e){null!=e.v&&(by.clearTimeout(e.v),e.v=null)}function Jb(e,t){var n=null;if(e.g==t){Yb(e),Gb(e),e.g=null;var r=2}else{if(!ub(e.i,t))return;n=t.F,cb(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Ig(r=ek(),new ak(r,n)),Bb(e)}else Hb(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(ob(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=ok(Ty(e.Na,e,t),$b(e,e.C)),e.C++,!0))}(e,t)||2==r&&Wb(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Xb(e,5);break;case 4:Xb(e,10);break;case 3:Xb(e,6);break;default:Xb(e,2)}}function $b(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Xb(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Ty(e.pb,e);n||(n=new Lk("//www.google.com/images/cleardot.gif"),by.location&&"http"==by.location.protocol||Fk(n,"https"),Bk(n)),function(e,t){var n=new Jg;if(by.Image){var r=new Image;r.onload=Cy(vb,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Cy(vb,n,r,"TestLoadImage: error",!1,t),r.onabort=Cy(vb,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Cy(vb,n,r,"TestLoadImage: timeout",!1,t),by.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else ik(2);e.H=0,e.h&&e.h.za(t),Zb(e),Vb(e)}function Zb(e){if(e.H=0,e.ma=[],e.h){var t=lb(e.i);0==t.length&&0==e.j.length||(Dy(e.ma,t),Dy(e.ma,e.j),e.i.i.length=0,Py(e.j),e.j.length=0),e.h.ya()}}function ew(e,t,n){var r=n instanceof Lk?Mk(n):new Lk(n);if(""!=r.g)t&&(r.g=t+"."+r.g),jk(r,r.m);else{var i=by.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Lk(null);r&&Fk(a,r),t&&(a.g=t),i&&jk(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&Vk(r,n,t),Vk(r,"VER",e.ra),qb(e,r),r}function tw(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new xb(new mb({ob:!0})):new xb(e.va)).Oa(e.J),t}function nw(){}function rw(){if(qy&&!(10<=Number(Zy)))throw Error("Environmental error: no available transport.")}function iw(e,t){Sg.call(this),this.g=new Fb(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!My(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!My(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new uw(this)}function aw(e){pk.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ow(){vk.call(this),this.status=1}function uw(e){this.g=e}function sw(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function cw(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function lw(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(my=xb.prototype).Oa=function(e){this.M=e},my.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():hk.g(),this.C=this.u?lk(this.u):lk(hk),this.g.onreadystatechange=Ty(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(u){return void Tb(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=T(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(d){o.e(d)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=by.FormData&&e instanceof by.FormData,!(0<=Ry(Ib,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=T(n);try{for(c.s();!(s=c.n()).done;){var l=S(s.value,2),f=l[0],h=l[1];this.g.setRequestHeader(f,h)}}catch(d){c.e(d)}finally{c.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Rb(this),0<this.B&&((this.L=function(e){return qy&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ty(this.ua,this)):this.A=qg(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Tb(this,u)}},my.ua=function(){"undefined"!=typeof ky&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ig(this,"timeout"),this.abort(8))},my.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ig(this,"complete"),Ig(this,"abort"),Ab(this))},my.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ab(this,!0)),xb.$.N.call(this)},my.La=function(){this.s||(this.G||this.v||this.l?Nb(this):this.kb())},my.kb=function(){Nb(this)},my.isActive=function(){return!!this.g},my.da=function(){try{return 2<Pb(this)?this.g.status:-1}catch(fb){return-1}},my.ja=function(){try{return this.g?this.g.responseText:""}catch(fb){return""}},my.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),_b(t)}},my.Ia=function(){return this.m},my.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(my=Fb.prototype).ra=8,my.H=1,my.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new yk(this,this.l,e),n=this.s;if(this.U&&(n?cg(n=ug(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Kb(this,t,r),Vk(i=Mk(this.I),"RID",e),Vk(i,"CVER",22),this.F&&Vk(i,"X-HTTP-Session-Id",this.F),qb(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Ob(n)))+"&"+r:this.o&&Lb(i,this.o,n)),sb(this.i,t),this.bb&&Vk(i,"TYPE","init"),this.P?(Vk(i,"$req",r),Vk(i,"SID","null"),t.aa=!0,_k(t,i,null)):_k(t,i,r),this.H=2}}else 3==this.H&&(e?zb(this,e):0==this.j.length||ab(this.i)||zb(this))},my.Ma=function(){if(this.u=null,Qb(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=ok(Ty(this.jb,this),e)}},my.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ik(10),Ub(this),Qb(this))},my.ib=function(){null!=this.v&&(this.v=null,Ub(this),Wb(this),ik(19))},my.pb=function(e){e?(this.l.info("Successfully pinged google.com"),ik(2)):(this.l.info("Failed to ping google.com"),ik(1))},my.isActive=function(){return!!this.h&&this.h.isActive(this)},(my=nw.prototype).Ba=function(){},my.Aa=function(){},my.za=function(){},my.ya=function(){},my.isActive=function(){return!0},my.Va=function(){},rw.prototype.g=function(e,t){return new iw(e,t)},Ny(iw,Sg),iw.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;ik(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=ew(e,null,e.Y),Bb(e)},iw.prototype.close=function(){jb(this.g)},iw.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Cg(e),e=n);t.j.push(new nb(t.fb++,e)),3==t.H&&Bb(t)},iw.prototype.N=function(){this.g.h=null,delete this.j,jb(this.g),delete this.g,iw.$.N.call(this)},Ny(aw,pk),Ny(ow,vk),Ny(uw,nw),uw.prototype.Ba=function(){Ig(this.g,"a")},uw.prototype.Aa=function(e){Ig(this.g,new aw(e))},uw.prototype.za=function(e){Ig(this.g,new ow)},uw.prototype.ya=function(){Ig(this.g,"b")},Ny(sw,(function(){this.blockSize=-1})),sw.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},sw.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)cw(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){cw(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){cw(this,r),i=0;break}}this.h=i,this.i+=t},sw.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var fw={};function hw(e){return-128<=e&&128>e?function(e,t){var n=fw;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new lw([0|e],0>e?-1:0)})):new lw([0|e],0>e?-1:0)}function dw(e){if(isNaN(e)||!isFinite(e))return vw;if(0>e)return bw(dw(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=pw;return new lw(t,0)}var pw=4294967296,vw=hw(0),mw=hw(1),yw=hw(16777216);function gw(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function kw(e){return-1==e.h}function bw(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new lw(n,~e.h).add(mw)}function ww(e,t){return e.add(bw(t))}function _w(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function xw(e,t){this.g=e,this.h=t}function Ew(e,t){if(gw(t))throw Error("division by zero");if(gw(e))return new xw(vw,vw);if(kw(e))return t=Ew(bw(e),t),new xw(bw(t.g),bw(t.h));if(kw(t))return t=Ew(e,bw(t)),new xw(bw(t.g),t.h);if(30<e.g.length){if(kw(e)||kw(t))throw Error("slowDivide_ only works with positive integers.");for(var n=mw,r=t;0>=r.X(e);)n=Sw(n),r=Sw(r);var i=Iw(n,1),a=Iw(r,1);for(r=Iw(r,2),n=Iw(n,2);!gw(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=Iw(r,1),n=Iw(n,1)}return t=ww(e,i.R(t)),new xw(i,t)}for(i=vw;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=dw(n)).R(t);kw(o)||0<o.X(e);)o=(a=dw(n-=r)).R(t);gw(a)&&(a=mw),i=i.add(a),e=ww(e,o)}return new xw(i,e)}function Sw(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new lw(n,e.h)}function Iw(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new lw(i,e.h)}(my=lw.prototype).ea=function(){if(kw(this))return-bw(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:pw+r)*t,t*=pw}return e},my.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(gw(this))return"0";if(kw(this))return"-"+bw(this).toString(e);for(var t=dw(Math.pow(e,6)),n=this,r="";;){var i=Ew(n,t).g,a=((0<(n=ww(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(gw(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},my.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},my.X=function(e){return kw(e=ww(this,e))?-1:gw(e)?0:1},my.abs=function(){return kw(this)?bw(this):this},my.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new lw(n,-2147483648&n[n.length-1]?-1:0)},my.R=function(e){if(gw(this)||gw(e))return vw;if(kw(this))return kw(e)?bw(this).R(bw(e)):bw(bw(this).R(e));if(kw(e))return bw(this.R(bw(e)));if(0>this.X(yw)&&0>e.X(yw))return dw(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,_w(n,2*r+2*i),n[2*r+2*i+1]+=a*s,_w(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,_w(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,_w(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new lw(n,0)},my.gb=function(e){return Ew(this,e).h},my.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new lw(n,this.h&e.h)},my.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new lw(n,this.h|e.h)},my.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new lw(n,this.h^e.h)},rw.prototype.createWebChannel=rw.prototype.g,iw.prototype.send=iw.prototype.u,iw.prototype.open=iw.prototype.m,iw.prototype.close=iw.prototype.close,uk.NO_ERROR=0,uk.TIMEOUT=8,uk.HTTP_ERROR=6,sk.COMPLETE="complete",fk.EventType=dk,dk.OPEN="a",dk.CLOSE="b",dk.ERROR="c",dk.MESSAGE="d",Sg.prototype.listen=Sg.prototype.O,xb.prototype.listenOnce=xb.prototype.P,xb.prototype.getLastError=xb.prototype.Sa,xb.prototype.getLastErrorCode=xb.prototype.Ia,xb.prototype.getStatus=xb.prototype.da,xb.prototype.getResponseJson=xb.prototype.Wa,xb.prototype.getResponseText=xb.prototype.ja,xb.prototype.send=xb.prototype.ha,xb.prototype.setWithCredentials=xb.prototype.Oa,sw.prototype.digest=sw.prototype.l,sw.prototype.reset=sw.prototype.reset,sw.prototype.update=sw.prototype.j,lw.prototype.add=lw.prototype.add,lw.prototype.multiply=lw.prototype.R,lw.prototype.modulo=lw.prototype.gb,lw.prototype.compare=lw.prototype.X,lw.prototype.toNumber=lw.prototype.ea,lw.prototype.toString=lw.prototype.toString,lw.prototype.getBits=lw.prototype.D,lw.fromNumber=dw,lw.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return bw(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=dw(Math.pow(n,8)),i=vw,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=dw(Math.pow(n,o)),i=i.R(o).add(dw(u))):i=(i=i.R(r)).add(dw(u))}return i};var Tw=gy.createWebChannelTransport=function(){return new rw},Cw=gy.getStatEventTarget=function(){return ek()},Nw=gy.ErrorCode=uk,Aw=gy.EventType=sk,Rw=gy.Event=Xg,Pw=gy.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Dw=gy.FetchXmlHttpFactory=mb,Ow=gy.WebChannel=fk,Lw=gy.XhrIo=xb,Mw=gy.Md5=sw,Fw=gy.Integer=lw,jw="@firebase/firestore",Uw=function(){function e(t){l(this,e),this.uid=t}return p(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Uw.UNAUTHENTICATED=new Uw(null),Uw.GOOGLE_CREDENTIALS=new Uw("google-credentials-uid"),Uw.FIRST_PARTY=new Uw("first-party-uid"),Uw.MOCK_USER=new Uw("mock-user");var Vw="10.0.0",Bw=new xs("@firebase/firestore");function zw(){return Bw.logLevel}function qw(e){if(Bw.logLevel<=ms.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ww);Bw.debug.apply(Bw,["Firestore (".concat(Vw,"): ").concat(e)].concat(c(i)))}}function Kw(e){if(Bw.logLevel<=ms.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ww);Bw.error.apply(Bw,["Firestore (".concat(Vw,"): ").concat(e)].concat(c(i)))}}function Hw(e){if(Bw.logLevel<=ms.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ww);Bw.warn.apply(Bw,["Firestore (".concat(Vw,"): ").concat(e)].concat(c(i)))}}function Ww(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Gw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Vw,") INTERNAL ASSERTION FAILED: ")+e;throw Kw(t),new Error(t)}function Qw(e,t){e||Gw()}function Yw(e,t){return e}var Jw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$w=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return p(n)}(Ju),Xw=p((function e(){var t=this;l(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Zw=p((function e(t,n){l(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),e_=function(){function e(){l(this,e)}return p(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Uw.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),t_=function(){function e(t){l(this,e),this.token=t,this.changeListener=null}return p(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),n_=function(){function e(t){l(this,e),this.t=t,this.currentUser=Uw.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return p(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Xw;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Xw,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(fs(_i().mark((function e(){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){qw("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(qw("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Xw)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(qw("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Qw("string"==typeof n.accessToken),new Zw(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Qw(null===e||"string"==typeof e),new Uw(e)}}]),e}(),r_=function(){function e(t,n,r){l(this,e),this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Uw.FIRST_PARTY,this.I=new Map}return p(e,[{key:"T",value:function(){return this.P?this.P():null}},{key:"headers",get:function(){this.I.set("X-Goog-AuthUser",this.l);var e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}]),e}(),i_=function(){function e(t,n,r){l(this,e),this.l=t,this.h=n,this.P=r}return p(e,[{key:"getToken",value:function(){return Promise.resolve(new r_(this.l,this.h,this.P))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Uw.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),a_=p((function e(t){l(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),o_=function(){function e(t){l(this,e),this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}return p(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&qw("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.R;return n.R=e.token,qw("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){qw("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.A.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.A.getImmediate({optional:!0});e?i(e):qw("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Qw("string"==typeof t.token),e.R=t.token,new a_(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function u_(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var s_=function(){function e(){l(this,e)}return p(e,null,[{key:"V",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=u_(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function c_(e,t){return e<t?-1:e>t?1:0}function l_(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function f_(e){return e+"\0"}var h_=function(){function e(t,n){if(l(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new $w(Jw.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $w(Jw.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new $w(Jw.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new $w(Jw.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return p(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?c_(this.nanoseconds,e.nanoseconds):c_(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),d_=function(){function e(t){l(this,e),this.timestamp=t}return p(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new h_(0,0))}},{key:"max",value:function(){return new e(new h_(253402300799,999999999))}}]),e}(),p_=function(){function e(t,n,r){l(this,e),void 0===n?n=0:n>t.length&&Gw(),void 0===r?r=t.length-n:r>t.length-n&&Gw(),this.segments=t,this.offset=n,this.len=r}return p(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),v_=function(e){m(n,e);var t=b(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new $w(Jw.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,c(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(p_),m_=/^[_a-zA-Z][_a-zA-Z0-9]*$/,y_=function(e){m(n,e);var t=b(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return m_.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new $w(Jw.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new $w(Jw.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new $w(Jw.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new $w(Jw.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(p_),g_=function(){function e(t){l(this,e),this.path=t}return p(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===v_.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(v_.fromString(t))}},{key:"fromName",value:function(t){return new e(v_.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(v_.emptyPath())}},{key:"comparator",value:function(e,t){return v_.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new v_(t.slice()))}}]),e}(),k_=p((function e(t,n,r,i){l(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function b_(e){return e.fields.find((function(e){return 2===e.kind}))}function w_(e){return e.fields.filter((function(e){return 2!==e.kind}))}k_.UNKNOWN_ID=-1;var __=p((function e(t,n){l(this,e),this.fieldPath=t,this.kind=n}));var x_=function(){function e(t,n){l(this,e),this.sequenceNumber=t,this.offset=n}return p(e,null,[{key:"empty",value:function(){return new e(0,I_.min())}}]),e}();function E_(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=d_.fromTimestamp(1e9===r?new h_(n+1,0):new h_(n,r));return new I_(i,g_.empty(),t)}function S_(e){return new I_(e.readTime,e.key,-1)}var I_=function(){function e(t,n,r){l(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return p(e,null,[{key:"min",value:function(){return new e(d_.min(),g_.empty(),-1)}},{key:"max",value:function(){return new e(d_.max(),g_.empty(),-1)}}]),e}();function T_(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=g_.comparator(e.documentKey,t.documentKey))?n:c_(e.largestBatchId,t.largestBatchId)}var C_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",N_=function(){function e(){l(this,e),this.onCommittedListeners=[]}return p(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function A_(e){return R_.apply(this,arguments)}function R_(){return(R_=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Jw.FAILED_PRECONDITION&&t.message===C_){e.next=2;break}throw t;case 2:qw("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P_=function(){function e(t){var n=this;l(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return p(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Gw(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=T(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),D_=function(){function e(t,n){var r=this;l(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.m=new Xw,this.transaction.oncomplete=function(){r.m.resolve()},this.transaction.onabort=function(){n.error?r.m.reject(new M_(t,n.error)):r.m.resolve()},this.transaction.onerror=function(e){var n=B_(e.target.error);r.m.reject(new M_(t,n))}}return p(e,[{key:"g",get:function(){return this.m.promise}},{key:"abort",value:function(e){e&&this.m.reject(e),this.aborted||(qw("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"p",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new j_(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new M_(n,t)}}}]),e}(),O_=function(){function e(t,n,r){l(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(Ku())&&Kw("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return p(e,[{key:"N",value:function(){var e=fs(_i().mark((function e(t){var n=this;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return qw("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new M_(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new $w(Jw.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new $w(Jw.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new M_(t,n))},i.onupgradeneeded=function(e){qw("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.B(t,i.transaction,e.oldVersion,n.version).next((function(){qw("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.L&&(this.db.onversionchange=function(e){return n.L(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"k",value:function(e){this.L=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=fs(_i().mark((function e(t,n,r,i){var a,o,u,s,c=this;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=_i().mark((function e(){var n,u,s,l;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.N(t);case 4:return c.db=e.sent,n=D_.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.p(),e})).catch((function(e){return n.abort(e),P_.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.g;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,qw("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return qw("SimpleDb","Removing database:",e),U_(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"v",value:function(){if(!Yu())return!1;if(e.C())return!0;var t=Ku(),n=e.D(t),r=0<n&&n<10,i=e.F(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.M)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"F",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),L_=function(){function e(t){l(this,e),this.q=t,this.K=!1,this.$=null}return p(e,[{key:"isDone",get:function(){return this.K}},{key:"U",get:function(){return this.$}},{key:"cursor",set:function(e){this.q=e}},{key:"done",value:function(){this.K=!0}},{key:"W",value:function(e){this.$=e}},{key:"delete",value:function(){return U_(this.q.delete())}}]),e}(),M_=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this,Jw.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return p(n)}($w);function F_(e){return"IndexedDbTransactionError"===e.name}var j_=function(){function e(t){l(this,e),this.store=t}return p(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(qw("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(qw("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),U_(n)}},{key:"add",value:function(e){return qw("SimpleDb","ADD",this.store.name,e,e),U_(this.store.add(e))}},{key:"get",value:function(e){var t=this;return U_(this.store.get(e)).next((function(n){return void 0===n&&(n=null),qw("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return qw("SimpleDb","DELETE",this.store.name,e),U_(this.store.delete(e))}},{key:"count",value:function(){return qw("SimpleDb","COUNT",this.store.name),U_(this.store.count())}},{key:"G",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.j(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new P_((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new P_((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){qw("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.j(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.j(r,t)}},{key:"X",value:function(e){var t=this.cursor({});return new P_((function(n,r){t.onerror=function(e){var t=B_(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"j",value:function(e,t){var n=[];return new P_((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new L_(i),o=t(i.primaryKey,i.value,a);if(o instanceof P_){var u=o.catch((function(e){return a.done(),P_.reject(e)}));n.push(u)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return P_.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function U_(e){return new P_((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=B_(e.target.error);n(t)}}))}var V_=!1;function B_(e){var t=O_.D(Ku());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new $w("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return V_||(V_=!0,setTimeout((function(){throw r}),0)),r}}return e}var z_=function(){function e(t,n){l(this,e),this.asyncQueue=t,this.ee=n,this.task=null}return p(e,[{key:"start",value:function(){this.te(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"te",value:function(e){var t=this;qw("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,fs(_i().mark((function e(){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=qw,e.t1="Documents written: ",e.next=6,t.ee.ne();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!F_(e.t4)){e.next=17;break}qw("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,A_(e.t4);case 19:return e.next=21,t.te(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),q_=function(){function e(t,n){l(this,e),this.localStore=t,this.persistence=n}return p(e,[{key:"ne",value:function(){var e=fs(_i().mark((function e(){var t,n=this,r=arguments;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.re(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"re",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return P_.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return qw("IndexBackiller","Processing collection: ".concat(t)),n.ie(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"ie",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.se(i,n)})).next((function(n){return qw("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"se",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=S_(t);T_(r,n)>0&&(n=r)})),new I_(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),K_=function(){function e(t,n){var r=this;l(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.oe(e)},this._e=function(e){return n.writeSequenceNumber(e)})}return p(e,[{key:"oe",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this._e&&this._e(e),e}}]),e}();function H_(e){return null==e}function W_(e){return 0===e&&1/e==-1/0}function G_(e){return"number"==typeof e&&Number.isInteger(e)&&!W_(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Q_(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=J_(t)),t=Y_(e.get(n),t);return J_(t)}function Y_(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function J_(e){return e+"\x01\x01"}function $_(e){var t=e.length;if(Qw(t>=2),2===t)return Qw("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),v_.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Gw(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Gw()}a=o+2}return new v_(r)}K_.ae=-1;var X_=["userId","batchId"];function Z_(e,t){return[e,Q_(t)]}function ex(e,t,n){return[e,Q_(t),n]}var tx={},nx=["prefixPath","collectionGroup","readTime","documentId"],rx=["prefixPath","collectionGroup","documentId"],ix=["collectionGroup","readTime","prefixPath","documentId"],ax=["canonicalId","targetId"],ox=["targetId","path"],ux=["path","targetId"],sx=["collectionId","parent"],cx=["indexId","uid"],lx=["uid","sequenceNumber"],fx=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],hx=["indexId","uid","orderedDocumentKey"],dx=["userId","collectionPath","documentId"],px=["userId","collectionPath","largestBatchId"],vx=["userId","collectionGroup","largestBatchId"],mx=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),yx=[].concat(c(mx),["documentOverlays"]),gx=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],kx=gx,bx=[].concat(kx,["indexConfiguration","indexState","indexEntries"]),wx=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).ue=e,i.currentSequenceNumber=r,i}return p(n)}(N_);function _x(e,t){var n=Yw(e);return O_.O(n.ue,t)}function xx(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ex(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Sx(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Ix=function(){function e(t,n){l(this,e),this.comparator=t,this.root=n||Cx.EMPTY}return p(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Cx.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Cx.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Tx(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Tx(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Tx(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Tx(this.root,e,this.comparator,!0)}}]),e}(),Tx=function(){function e(t,n,r,i){l(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return p(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Cx=function(){function e(t,n,r,i,a){l(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return p(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Gw();if(this.right.isRed())throw Gw();var e=this.left.check();if(e!==this.right.check())throw Gw();return e+(this.isRed()?0:1)}}]),e}();Cx.EMPTY=null,Cx.RED=!0,Cx.BLACK=!1,Cx.EMPTY=new(function(){function e(){l(this,e),this.size=0}return p(e,[{key:"key",get:function(){throw Gw()}},{key:"value",get:function(){throw Gw()}},{key:"color",get:function(){throw Gw()}},{key:"left",get:function(){throw Gw()}},{key:"right",get:function(){throw Gw()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Cx(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Nx=function(){function e(t){l(this,e),this.comparator=t,this.data=new Ix(this.comparator)}return p(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Ax(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Ax(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Ax=function(){function e(t){l(this,e),this.iter=t}return p(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Rx(e){return e.hasNext()?e.getNext():void 0}var Px=function(){function e(t){l(this,e),this.fields=t,t.sort(y_.comparator)}return p(e,[{key:"unionWith",value:function(t){var n,r=new Nx(y_.comparator),i=T(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=T(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=T(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return l_(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Dx=function(e){m(n,e);var t=b(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return p(n)}(_(Error));var Ox=function(e){function t(e){l(this,t),this.binaryString=e}return p(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return c_(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Dx("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Ox.EMPTY_BYTE_STRING=new Ox("");var Lx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mx(e){if(Qw(!!e),"string"==typeof e){var t=0,n=Lx.exec(e);if(Qw(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Fx(e.seconds),nanos:Fx(e.nanos)}}function Fx(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function jx(e){return"string"==typeof e?Ox.fromBase64String(e):Ox.fromUint8Array(e)}function Ux(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Vx(e){var t=e.mapValue.fields.__previous_value__;return Ux(t)?Vx(t):t}function Bx(e){var t=Mx(e.mapValue.fields.__local_write_time__.timestampValue);return new h_(t.seconds,t.nanos)}var zx=p((function e(t,n,r,i,a,o,u,s,c){l(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=s,this.useFetchStreams=c})),qx=function(){function e(t,n){l(this,e),this.projectId=t,this.database=n||"(default)"}return p(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),Kx={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Hx={nullValue:"NULL_VALUE"};function Wx(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ux(e)?4:oE(e)?9007199254740991:10:Gw()}function Gx(e,t){if(e===t)return!0;var n=Wx(e);if(n!==Wx(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Bx(e).isEqual(Bx(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Mx(e.timestampValue),r=Mx(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return jx(e.bytesValue).isEqual(jx(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Fx(e.geoPointValue.latitude)===Fx(t.geoPointValue.latitude)&&Fx(e.geoPointValue.longitude)===Fx(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Fx(e.integerValue)===Fx(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Fx(e.doubleValue),r=Fx(t.doubleValue);return n===r?W_(n)===W_(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return l_(e.arrayValue.values||[],t.arrayValue.values||[],Gx);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(xx(n)!==xx(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Gx(n[i],r[i])))return!1;return!0}(e,t);default:return Gw()}}function Qx(e,t){return void 0!==(e.values||[]).find((function(e){return Gx(e,t)}))}function Yx(e,t){if(e===t)return 0;var n=Wx(e),r=Wx(t);if(n!==r)return c_(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return c_(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Fx(e.integerValue||e.doubleValue),r=Fx(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Jx(e.timestampValue,t.timestampValue);case 4:return Jx(Bx(e),Bx(t));case 5:return c_(e.stringValue,t.stringValue);case 6:return function(e,t){var n=jx(e),r=jx(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=c_(n[i],r[i]);if(0!==a)return a}return c_(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=c_(Fx(e.latitude),Fx(t.latitude));return 0!==n?n:c_(Fx(e.longitude),Fx(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Yx(n[i],r[i]);if(a)return a}return c_(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Kx.mapValue&&t===Kx.mapValue)return 0;if(e===Kx.mapValue)return 1;if(t===Kx.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=c_(r[o],a[o]);if(0!==u)return u;var s=Yx(n[r[o]],i[a[o]]);if(0!==s)return s}return c_(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Gw()}}function Jx(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return c_(e,t);var n=Mx(e),r=Mx(t),i=c_(n.seconds,r.seconds);return 0!==i?i:c_(n.nanos,r.nanos)}function $x(e){return Xx(e)}function Xx(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Mx(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return jx(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return g_.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){var t,n="[",r=!0,i=T(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Xx(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=T(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Xx(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Gw()}function Zx(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function eE(e){return!!e&&"integerValue"in e}function tE(e){return!!e&&"arrayValue"in e}function nE(e){return!!e&&"nullValue"in e}function rE(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function iE(e){return!!e&&"mapValue"in e}function aE(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Ex(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=aE(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=aE(e.arrayValue.values[r]);return n}return Object.assign({},e)}function oE(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function uE(e){return"nullValue"in e?Hx:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Zx(qx.empty(),g_.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Gw()}function sE(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Zx(qx.empty(),g_.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Kx:Gw()}function cE(e,t){var n=Yx(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function lE(e,t){var n=Yx(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var fE=function(){function e(t){l(this,e),this.value=t}return p(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!iE(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=aE(t)}},{key:"setAll",value:function(e){var t=this,n=y_.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=aE(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());iE(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Gx(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];iE(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Ex(t,(function(t,n){return e[t]=n}));var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(aE(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function hE(e){var t=[];return Ex(e.fields,(function(e,n){var r=new y_([e]);if(iE(n)){var i=hE(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=T(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Px(t)}var dE=function(){function e(t,n,r,i,a,o,u){l(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return p(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(d_.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=fE.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=fE.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=d_.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,d_.min(),d_.min(),d_.min(),fE.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,d_.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,d_.min(),d_.min(),fE.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,d_.min(),d_.min(),fE.empty(),2)}}]),e}(),pE=p((function e(t,n){l(this,e),this.position=t,this.inclusive=n}));function vE(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?g_.comparator(g_.fromName(o.referenceValue),n.key):Yx(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function mE(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Gx(e.position[n],t.position[n]))return!1;return!0}var yE=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";l(this,e),this.field=t,this.dir=n}));function gE(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var kE=p((function e(){l(this,e)})),bE=function(e){m(n,e);var t=b(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return p(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Yx(t,this.value)):null!==t&&Wx(this.value)===Wx(t)&&this.matchesComparison(Yx(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Gw()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new AE(e,t,r):"array-contains"===t?new OE(e,r):"in"===t?new LE(e,r):"not-in"===t?new ME(e,r):"array-contains-any"===t?new FE(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new RE(e,n):new PE(e,n)}}]),n}(kE),wE=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).filters=e,i.op=r,i.ce=null,i}return p(n,[{key:"matches",value:function(e){return _E(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ce||(this.ce=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ce}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.le((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"le",value:function(e){var t,n=T(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(kE);function _E(e){return"and"===e.op}function xE(e){return"or"===e.op}function EE(e){return SE(e)&&_E(e)}function SE(e){var t,n=T(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof wE)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function IE(e){if(e instanceof bE)return e.field.canonicalString()+e.op.toString()+$x(e.value);if(EE(e))return e.filters.map((function(e){return IE(e)})).join(",");var t=e.filters.map((function(e){return IE(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function TE(e,t){return e instanceof bE?function(e,t){return t instanceof bE&&e.op===t.op&&e.field.isEqual(t.field)&&Gx(e.value,t.value)}(e,t):e instanceof wE?function(e,t){return t instanceof wE&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&TE(n,t.filters[r])}),!0)}(e,t):void Gw()}function CE(e,t){var n=e.filters.concat(t);return wE.create(n,e.op)}function NE(e){return e instanceof bE?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat($x(e.value))}(e):e instanceof wE?function(e){return e.op.toString()+" {"+e.getFilters().map(NE).join(" ,")+"}"}(e):"Filter"}var AE=function(e){m(n,e);var t=b(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this,e,r,i)).key=g_.fromName(i.referenceValue),a}return p(n,[{key:"matches",value:function(e){var t=g_.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(bE),RE=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,"in",r)).keys=DE("in",r),i}return p(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(bE),PE=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,"not-in",r)).keys=DE("not-in",r),i}return p(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(bE);function DE(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return g_.fromName(e.referenceValue)}))}var OE=function(e){m(n,e);var t=b(n);function n(e,r){return l(this,n),t.call(this,e,"array-contains",r)}return p(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return tE(t)&&Qx(t.arrayValue,this.value)}}]),n}(bE),LE=function(e){m(n,e);var t=b(n);function n(e,r){return l(this,n),t.call(this,e,"in",r)}return p(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Qx(this.value.arrayValue,t)}}]),n}(bE),ME=function(e){m(n,e);var t=b(n);function n(e,r){return l(this,n),t.call(this,e,"not-in",r)}return p(n,[{key:"matches",value:function(e){if(Qx(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Qx(this.value.arrayValue,t)}}]),n}(bE),FE=function(e){m(n,e);var t=b(n);function n(e,r){return l(this,n),t.call(this,e,"array-contains-any",r)}return p(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!tE(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Qx(t.value.arrayValue,e)}))}}]),n}(bE),jE=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;l(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.he=null}));function UE(e){return new jE(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function VE(e){var t=Yw(e);if(null===t.he){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return IE(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),H_(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return $x(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return $x(e)})).join(",")),t.he=n}return t.he}function BE(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!gE(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!TE(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!mE(e.startAt,t.startAt)&&mE(e.endAt,t.endAt)}function zE(e){return g_.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function qE(e,t){return e.filters.filter((function(e){return e instanceof bE&&e.field.isEqual(t)}))}function KE(e,t,n){var r,i=Hx,a=!0,o=T(qE(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Hx,c=!0;switch(u.op){case"<":case"<=":s=uE(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Hx}cE({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];cE({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function HE(e,t,n){var r,i=Kx,a=!0,o=T(qE(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Kx,c=!0;switch(u.op){case">=":case">":s=sE(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Kx}lE({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];lE({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var WE=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;l(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.Pe=null,this.Ie=null,this.startAt,this.endAt}));function GE(e,t,n,r,i,a,o,u){return new WE(e,t,n,r,i,a,o,u)}function QE(e){return new WE(e)}function YE(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function JE(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function $E(e){var t,n=T(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function XE(e){return null!==e.collectionGroup}function ZE(e){var t=Yw(e);if(null===t.Pe){t.Pe=[];var n=$E(t),r=JE(t);if(null!==n&&null===r)n.isKeyField()||t.Pe.push(new yE(n)),t.Pe.push(new yE(y_.keyField(),"asc"));else{var i,a=!1,o=T(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.Pe.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.Pe.push(new yE(y_.keyField(),s))}}}return t.Pe}function eS(e){var t=Yw(e);if(!t.Ie)if("F"===t.limitType)t.Ie=UE(t.path,t.collectionGroup,ZE(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=T(ZE(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new yE(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new pE(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new pE(t.startAt.position,t.startAt.inclusive):null;t.Ie=UE(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.Ie}function tS(e,t){t.getFirstInequalityField(),$E(e);var n=e.filters.concat([t]);return new WE(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function nS(e,t,n){return new WE(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function rS(e,t){return BE(eS(e),eS(t))&&e.limitType===t.limitType}function iS(e){return"".concat(VE(eS(e)),"|lt:").concat(e.limitType)}function aS(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return NE(e)})).join(", "),"]")),H_(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return $x(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return $x(e)})).join(",")),"Target(".concat(t,")")}(eS(e)),"; limitType=").concat(e.limitType,")")}function oS(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):g_.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=T(ZE(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=T(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=vE(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,ZE(e),t))&&!(e.endAt&&!function(e,t,n){var r=vE(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,ZE(e),t))}(e,t)}function uS(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function sS(e){return function(t,n){var r,i=!1,a=T(ZE(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=cS(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function cS(e,t,n){var r=e.field.isKeyField()?g_.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Yx(r,i):Gw()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Gw()}}var lS=function(){function e(t,n){l(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return p(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=S(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Ex(this.inner,(function(t,n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=S(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Sx(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),fS=new Ix(g_.comparator);function hS(){return fS}var dS=new Ix(g_.comparator);function pS(){for(var e=dS,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function vS(e){var t=dS;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function mS(){return gS()}function yS(){return gS()}function gS(){return new lS((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var kS=new Ix(g_.comparator),bS=new Nx(g_.comparator);function wS(){for(var e=bS,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var _S=new Nx(c_);function xS(){return _S}function ES(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:W_(t)?"-0":t}}function SS(e){return{integerValue:""+e}}function IS(e,t){return G_(t)?SS(t):ES(e,t)}var TS=p((function e(){l(this,e),this._=void 0}));function CS(e,t,n){return e instanceof RS?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ux(t)&&(t=Vx(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof PS?DS(e,t):e instanceof OS?LS(e,t):function(e,t){var n=AS(e,t),r=FS(n)+FS(e.Te);return eE(n)&&eE(e.Te)?SS(r):ES(e.serializer,r)}(e,t)}function NS(e,t,n){return e instanceof PS?DS(e,t):e instanceof OS?LS(e,t):n}function AS(e,t){return e instanceof MS?function(e){return eE(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}var RS=function(e){m(n,e);var t=b(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n)}(TS),PS=function(e){m(n,e);var t=b(n);function n(e){var r;return l(this,n),(r=t.call(this)).elements=e,r}return p(n)}(TS);function DS(e,t){var n,r=jS(t),i=T(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Gx(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var OS=function(e){m(n,e);var t=b(n);function n(e){var r;return l(this,n),(r=t.call(this)).elements=e,r}return p(n)}(TS);function LS(e,t){var n,r=jS(t),i=T(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Gx(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var MS=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).serializer=e,i.Te=r,i}return p(n)}(TS);function FS(e){return Fx(e.integerValue||e.doubleValue)}function jS(e){return tE(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var US=p((function e(t,n){l(this,e),this.field=t,this.transform=n}));var VS=p((function e(t,n){l(this,e),this.version=t,this.transformResults=n})),BS=function(){function e(t,n){l(this,e),this.updateTime=t,this.exists=n}return p(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function zS(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var qS=p((function e(){l(this,e)}));function KS(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new nI(e.key,BS.none()):new YS(e.key,e.data,BS.none());var n,r=e.data,i=fE.empty(),a=new Nx(y_.comparator),o=T(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new JS(e.key,i,new Px(a.toArray()),BS.none())}function HS(e,t,n){e instanceof YS?function(e,t,n){var r=e.value.clone(),i=XS(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof JS?function(e,t,n){if(zS(e.precondition,t)){var r=XS(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll($S(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function WS(e,t,n,r){return e instanceof YS?function(e,t,n,r){if(!zS(e.precondition,t))return n;var i=e.value.clone(),a=ZS(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof JS?function(e,t,n,r){if(!zS(e.precondition,t))return n;var i=ZS(e.fieldTransforms,r,t),a=t.data;return a.setAll($S(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return zS(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function GS(e,t){var n,r=null,i=T(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=AS(a.transform,o||null);null!=u&&(null===r&&(r=fE.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function QS(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&l_(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof PS&&t instanceof PS||e instanceof OS&&t instanceof OS?l_(e.elements,t.elements,Gx):e instanceof MS&&t instanceof MS?Gx(e.Te,t.Te):e instanceof RS&&t instanceof RS}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var YS=function(e){m(n,e);var t=b(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return l(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return p(n,[{key:"getFieldMask",value:function(){return null}}]),n}(qS),JS=function(e){m(n,e);var t=b(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return l(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return p(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(qS);function $S(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function XS(e,t,n){var r=new Map;Qw(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,NS(o,u,n[i]))}return r}function ZS(e,t,n){var r,i=new Map,a=T(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,CS(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var eI,tI,nI=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return p(n,[{key:"getFieldMask",value:function(){return null}}]),n}(qS),rI=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return p(n,[{key:"getFieldMask",value:function(){return null}}]),n}(qS),iI=function(){function e(t,n,r,i){l(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return p(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&HS(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=T(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=WS(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=T(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=WS(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=yS();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=KS(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(d_.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),wS())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&l_(this.mutations,e.mutations,(function(e,t){return QS(e,t)}))&&l_(this.baseMutations,e.baseMutations,(function(e,t){return QS(e,t)}))}}]),e}(),aI=function(){function e(t,n,r,i){l(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return p(e,null,[{key:"from",value:function(t,n,r){Qw(t.mutations.length===r.length);for(var i=kS,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),oI=function(){function e(t,n){l(this,e),this.largestBatchId=t,this.mutation=n}return p(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),uI=p((function e(t,n){l(this,e),this.count=t,this.unchangedNames=n}));function sI(e){switch(e){default:return Gw();case Jw.CANCELLED:case Jw.UNKNOWN:case Jw.DEADLINE_EXCEEDED:case Jw.RESOURCE_EXHAUSTED:case Jw.INTERNAL:case Jw.UNAVAILABLE:case Jw.UNAUTHENTICATED:return!1;case Jw.INVALID_ARGUMENT:case Jw.NOT_FOUND:case Jw.ALREADY_EXISTS:case Jw.PERMISSION_DENIED:case Jw.FAILED_PRECONDITION:case Jw.ABORTED:case Jw.OUT_OF_RANGE:case Jw.UNIMPLEMENTED:case Jw.DATA_LOSS:return!0}}function cI(e){if(void 0===e)return Kw("GRPC error has no .code"),Jw.UNKNOWN;switch(e){case eI.OK:return Jw.OK;case eI.CANCELLED:return Jw.CANCELLED;case eI.UNKNOWN:return Jw.UNKNOWN;case eI.DEADLINE_EXCEEDED:return Jw.DEADLINE_EXCEEDED;case eI.RESOURCE_EXHAUSTED:return Jw.RESOURCE_EXHAUSTED;case eI.INTERNAL:return Jw.INTERNAL;case eI.UNAVAILABLE:return Jw.UNAVAILABLE;case eI.UNAUTHENTICATED:return Jw.UNAUTHENTICATED;case eI.INVALID_ARGUMENT:return Jw.INVALID_ARGUMENT;case eI.NOT_FOUND:return Jw.NOT_FOUND;case eI.ALREADY_EXISTS:return Jw.ALREADY_EXISTS;case eI.PERMISSION_DENIED:return Jw.PERMISSION_DENIED;case eI.FAILED_PRECONDITION:return Jw.FAILED_PRECONDITION;case eI.ABORTED:return Jw.ABORTED;case eI.OUT_OF_RANGE:return Jw.OUT_OF_RANGE;case eI.UNIMPLEMENTED:return Jw.UNIMPLEMENTED;case eI.DATA_LOSS:return Jw.DATA_LOSS;default:return Gw()}}(tI=eI||(eI={}))[tI.OK=0]="OK",tI[tI.CANCELLED=1]="CANCELLED",tI[tI.UNKNOWN=2]="UNKNOWN",tI[tI.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tI[tI.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tI[tI.NOT_FOUND=5]="NOT_FOUND",tI[tI.ALREADY_EXISTS=6]="ALREADY_EXISTS",tI[tI.PERMISSION_DENIED=7]="PERMISSION_DENIED",tI[tI.UNAUTHENTICATED=16]="UNAUTHENTICATED",tI[tI.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tI[tI.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tI[tI.ABORTED=10]="ABORTED",tI[tI.OUT_OF_RANGE=11]="OUT_OF_RANGE",tI[tI.UNIMPLEMENTED=12]="UNIMPLEMENTED",tI[tI.INTERNAL=13]="INTERNAL",tI[tI.UNAVAILABLE=14]="UNAVAILABLE",tI[tI.DATA_LOSS=15]="DATA_LOSS";var lI=function(){function e(){l(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return p(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return fI}},{key:"getOrCreateInstance",value:function(){return null===fI&&(fI=new e),fI}}]),e}(),fI=null;function hI(){return new TextEncoder}var dI=new Fw([4294967295,4294967295],0);function pI(e){var t=hI().encode(e),n=new Mw;return n.update(t),new Uint8Array(n.digest())}function vI(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Fw([n,r],0),new Fw([i,a],0)]}var mI=function(){function e(t,n,r){if(l(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new yI("Invalid padding: ".concat(n));if(r<0)throw new yI("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new yI("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new yI("Invalid padding when bitmap length is 0: ".concat(n));this.de=8*t.length-n,this.Ae=Fw.fromNumber(this.de)}return p(e,[{key:"Re",value:function(e,t,n){var r=e.add(t.multiply(Fw.fromNumber(n)));return 1===r.compare(dI)&&(r=new Fw([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ae).toNumber()}},{key:"Ve",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"mightContain",value:function(e){if(0===this.de)return!1;for(var t=S(vI(pI(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Re(n,r,i);if(!this.Ve(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.de)for(var t=S(vI(pI(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Re(n,r,i);this.me(a)}}},{key:"me",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),yI=function(e){m(n,e);var t=b(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return p(n)}(_(Error)),gI=function(){function e(t,n,r,i,a){l(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return p(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,kI.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(d_.min(),i,new Ix(c_),hS(),wS())}}]),e}(),kI=function(){function e(t,n,r,i,a){l(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return p(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,wS(),wS(),wS())}}]),e}(),bI=p((function e(t,n,r,i){l(this,e),this.fe=t,this.removedTargetIds=n,this.key=r,this.ge=i})),wI=p((function e(t,n){l(this,e),this.targetId=t,this.pe=n})),_I=p((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ox.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;l(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),xI=function(){function e(){l(this,e),this.ye=0,this.we=II(),this.Se=Ox.EMPTY_BYTE_STRING,this.be=!1,this.De=!0}return p(e,[{key:"current",get:function(){return this.be}},{key:"resumeToken",get:function(){return this.Se}},{key:"ve",get:function(){return 0!==this.ye}},{key:"Ce",get:function(){return this.De}},{key:"Fe",value:function(e){e.approximateByteSize()>0&&(this.De=!0,this.Se=e)}},{key:"Me",value:function(){var e=wS(),t=wS(),n=wS();return this.we.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Gw()}})),new kI(this.Se,this.be,e,t,n)}},{key:"xe",value:function(){this.De=!1,this.we=II()}},{key:"Oe",value:function(e,t){this.De=!0,this.we=this.we.insert(e,t)}},{key:"Ne",value:function(e){this.De=!0,this.we=this.we.remove(e)}},{key:"Be",value:function(){this.ye+=1}},{key:"Le",value:function(){this.ye-=1}},{key:"ke",value:function(){this.De=!0,this.be=!0}}]),e}(),EI=function(){function e(t){l(this,e),this.qe=t,this.Qe=new Map,this.Ke=hS(),this.$e=SI(),this.Ue=new Ix(c_)}return p(e,[{key:"We",value:function(e){var t,n=T(e.fe);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.ge&&e.ge.isFoundDocument()?this.Ge(r,e.ge):this.ze(r,e.key,e.ge)}}catch(u){n.e(u)}finally{n.f()}var i,a=T(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ze(o,e.key,e.ge)}}catch(u){a.e(u)}finally{a.f()}}},{key:"je",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.He(n);switch(e.state){case 0:t.Je(n)&&r.Fe(e.resumeToken);break;case 1:r.Le(),r.ve||r.xe(),r.Fe(e.resumeToken);break;case 2:r.Le(),r.ve||t.removeTarget(n);break;case 3:t.Je(n)&&(r.ke(),r.Fe(e.resumeToken));break;case 4:t.Je(n)&&(t.Ye(n),r.Fe(e.resumeToken));break;default:Gw()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Qe.forEach((function(e,r){n.Je(r)&&t(r)}))}},{key:"Ze",value:function(e){var t,n,r=e.targetId,i=e.pe.count,a=this.Xe(r);if(a){var o=a.target;if(zE(o))if(0===i){var u=new g_(o.path);this.ze(r,u,dE.newNoDocument(u,d_.min()))}else Qw(1===i);else{var s=this.et(r);if(s!==i){var c=this.tt(e,s);if(0!==c.status){this.Ye(r);var l=2===c.status?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(r,l)}null===(t=lI.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n,r){var i,a,o,u,s,c,l={localCacheCount:n,existenceFilterCount:r.count},f=r.unchangedNames;return f&&(l.bloomFilter={applied:0===e,hashCount:null!==(i=null==f?void 0:f.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(u=null===(o=null===(a=null==f?void 0:f.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==u?u:0,padding:null!==(c=null===(s=null==f?void 0:f.bits)||void 0===s?void 0:s.padding)&&void 0!==c?c:0},t&&(l.bloomFilter.mightContain=t)),l}(c.status,null!==(n=c.nt)&&void 0!==n?n:null,s,e.pe))}}}}},{key:"tt",value:function(e,t){var n=this,r=e.pe,i=r.unchangedNames,a=r.count;if(!i||!i.bits)return{status:1};var o,u,s=i.bits,c=s.bitmap,l=void 0===c?"":c,f=s.padding,h=void 0===f?0:f,d=i.hashCount,p=void 0===d?0:d;try{o=jx(l).toUint8Array()}catch(e){if(e instanceof Dx)return Hw("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),{status:1};throw e}try{u=new mI(o,h,p)}catch(e){return Hw(e instanceof yI?"BloomFilter error: ":"Applying bloom filter failed: ",e),{status:1}}var v=function(e){var t=n.qe.rt();return u.mightContain("projects/".concat(t.projectId,"/databases/").concat(t.database,"/documents/").concat(e))};return 0===u.de?{status:1}:{status:a===t-this.it(e.targetId,v)?0:2,nt:v}}},{key:"it",value:function(e,t){var n=this,r=this.qe.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){t(r.path.canonicalString())||(n.ze(e,r,null),i++)})),i}},{key:"st",value:function(e){var t=this,n=new Map;this.Qe.forEach((function(r,i){var a=t.Xe(i);if(a){if(r.current&&zE(a.target)){var o=new g_(a.target.path);null!==t.Ke.get(o)||t.ot(i,o)||t.ze(i,o,dE.newNoDocument(o,e))}r.Ce&&(n.set(i,r.Me()),r.xe())}}));var r=wS();this.$e.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xe(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Ke.forEach((function(t,n){return n.setReadTime(e)}));var i=new gI(e,n,this.Ue,this.Ke,r);return this.Ke=hS(),this.$e=SI(),this.Ue=new Ix(c_),i}},{key:"Ge",value:function(e,t){if(this.Je(e)){var n=this.ot(e,t.key)?2:0;this.He(e).Oe(t.key,n),this.Ke=this.Ke.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e))}}},{key:"ze",value:function(e,t,n){if(this.Je(e)){var r=this.He(e);this.ot(e,t)?r.Oe(t,1):r.Ne(t),this.$e=this.$e.insert(t,this._t(t).delete(e)),n&&(this.Ke=this.Ke.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Qe.delete(e)}},{key:"et",value:function(e){var t=this.He(e).Me();return this.qe.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Be",value:function(e){this.He(e).Be()}},{key:"He",value:function(e){var t=this.Qe.get(e);return t||(t=new xI,this.Qe.set(e,t)),t}},{key:"_t",value:function(e){var t=this.$e.get(e);return t||(t=new Nx(c_),this.$e=this.$e.insert(e,t)),t}},{key:"Je",value:function(e){var t=null!==this.Xe(e);return t||qw("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xe",value:function(e){var t=this.Qe.get(e);return t&&t.ve?null:this.qe.ut(e)}},{key:"Ye",value:function(e){var t=this;this.Qe.set(e,new xI),this.qe.getRemoteKeysForTarget(e).forEach((function(n){t.ze(e,n,null)}))}},{key:"ot",value:function(e,t){return this.qe.getRemoteKeysForTarget(e).has(t)}}]),e}();function SI(){return new Ix(g_.comparator)}function II(){return new Ix(g_.comparator)}var TI={asc:"ASCENDING",desc:"DESCENDING"},CI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},NI={and:"AND",or:"OR"},AI=p((function e(t,n){l(this,e),this.databaseId=t,this.useProto3Json=n}));function RI(e,t){return e.useProto3Json||H_(t)?t:{value:t}}function PI(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function DI(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function OI(e,t){return PI(e,t.toTimestamp())}function LI(e){return Qw(!!e),d_.fromTimestamp(function(e){var t=Mx(e);return new h_(t.seconds,t.nanos)}(e))}function MI(e,t){return function(e){return new v_(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function FI(e){var t=v_.fromString(e);return Qw(oT(t)),t}function jI(e,t){return MI(e.databaseId,t.path)}function UI(e,t){var n=FI(t);if(n.get(1)!==e.databaseId.projectId)throw new $w(Jw.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new $w(Jw.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new g_(qI(n))}function VI(e,t){return MI(e.databaseId,t)}function BI(e){var t=FI(e);return 4===t.length?v_.emptyPath():qI(t)}function zI(e){return new v_(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function qI(e){return Qw(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function KI(e,t,n){return{name:jI(e,t),fields:n.value.mapValue.fields}}function HI(e,t,n){var r=UI(e,t.name),i=LI(t.updateTime),a=t.createTime?LI(t.createTime):d_.min(),o=new fE({mapValue:{fields:t.fields}}),u=dE.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function WI(e,t){return"found"in t?function(e,t){Qw(!!t.found),t.found.name,t.found.updateTime;var n=UI(e,t.found.name),r=LI(t.found.updateTime),i=t.found.createTime?LI(t.found.createTime):d_.min(),a=new fE({mapValue:{fields:t.found.fields}});return dE.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){Qw(!!t.missing),Qw(!!t.readTime);var n=UI(e,t.missing),r=LI(t.readTime);return dE.newNoDocument(n,r)}(e,t):Gw()}function GI(e,t){var n;if(t instanceof YS)n={update:KI(e,t.key,t.value)};else if(t instanceof nI)n={delete:jI(e,t.key)};else if(t instanceof JS)n={update:KI(e,t.key,t.data),updateMask:aT(t.fieldMask)};else{if(!(t instanceof rI))return Gw();n={verify:jI(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof RS)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof PS)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof OS)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof MS)return{fieldPath:t.field.canonicalString(),increment:n.Te};throw Gw()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:OI(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Gw()}(e,t.precondition)),n}function QI(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?BS.updateTime(LI(e.updateTime)):void 0!==e.exists?BS.exists(e.exists):BS.none()}(t.currentDocument):BS.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Qw("REQUEST_TIME"===t.setToServerValue),n=new RS;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new PS(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new OS(i)}else"increment"in t?n=new MS(e,t.increment):Gw();var a=y_.fromServerFormat(t.fieldPath);return new US(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=UI(e,t.update.name),a=new fE({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Px(t.map((function(e){return y_.fromServerFormat(e)})))}(t.updateMask);return new JS(i,a,o,n,r)}return new YS(i,a,n,r)}if(t.delete){var u=UI(e,t.delete);return new nI(u,n)}if(t.verify){var s=UI(e,t.verify);return new rI(s,n)}return Gw()}function YI(e,t){return{documents:[VI(e,t.path)]}}function JI(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=VI(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=VI(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return iT(wE.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:nT(e.field),direction:ZI(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=RI(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function $I(e){var t=BI(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Qw(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=XI(e);return t instanceof wE&&EE(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=function(e){return e.map((function(e){return function(e){return new yE(rT(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}))}(n.orderBy));var s=null;n.limit&&(s=function(e){var t;return H_(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new pE(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new pE(n,t)}(n.endAt)),GE(t,i,u,o,s,"F",c,l)}function XI(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=rT(e.unaryFilter.field);return bE.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=rT(e.unaryFilter.field);return bE.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=rT(e.unaryFilter.field);return bE.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=rT(e.unaryFilter.field);return bE.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Gw()}}(e):void 0!==e.fieldFilter?function(e){return bE.create(rT(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Gw()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return wE.create(e.compositeFilter.filters.map((function(e){return XI(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Gw()}}(e.compositeFilter.op))}(e):Gw()}function ZI(e){return TI[e]}function eT(e){return CI[e]}function tT(e){return NI[e]}function nT(e){return{fieldPath:e.canonicalString()}}function rT(e){return y_.fromServerFormat(e.fieldPath)}function iT(e){return e instanceof bE?function(e){if("=="===e.op){if(rE(e.value))return{unaryFilter:{field:nT(e.field),op:"IS_NAN"}};if(nE(e.value))return{unaryFilter:{field:nT(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(rE(e.value))return{unaryFilter:{field:nT(e.field),op:"IS_NOT_NAN"}};if(nE(e.value))return{unaryFilter:{field:nT(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nT(e.field),op:eT(e.op),value:e.value}}}(e):e instanceof wE?function(e){var t=e.getFilters().map((function(e){return iT(e)}));return 1===t.length?t[0]:{compositeFilter:{op:tT(e.op),filters:t}}}(e):Gw()}function aT(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function oT(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var uT=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:d_.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:d_.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ox.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;l(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return p(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),sT=p((function e(t){l(this,e),this.ct=t}));function cT(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:lT(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:jI(e,t.key),fields:t.data.value.mapValue.fields,updateTime:PI(e,t.version.toTimestamp()),createTime:PI(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:fT(t.version)};else{if(!t.isUnknownDocument())return Gw();r.unknownDocument={path:n.path.toArray(),version:fT(t.version)}}return r}function lT(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function fT(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function hT(e){var t=new h_(e.seconds,e.nanoseconds);return d_.fromTimestamp(t)}function dT(e,t){for(var n=(t.baseMutations||[]).map((function(t){return QI(e.ct,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return QI(e.ct,t)})),u=h_.fromMillis(t.localWriteTimeMs);return new iI(t.batchId,u,n,o)}function pT(e){var t,n=hT(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?hT(e.lastLimboFreeSnapshotVersion):d_.min();return t=function(e){return void 0!==e.documents}(e.query)?function(e){return Qw(1===e.documents.length),eS(QE(BI(e.documents[0])))}(e.query):function(e){return eS($I(e))}(e.query),new uT(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,n,r,Ox.fromBase64String(e.resumeToken))}function vT(e,t){var n,r=fT(t.snapshotVersion),i=fT(t.lastLimboFreeSnapshotVersion);n=zE(t.target)?YI(e.ct,t.target):JI(e.ct,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:VE(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function mT(e){var t=$I({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?nS(t,t.limit,"L"):t}function yT(e,t){return new oI(t.largestBatchId,QI(e.ct,t.overlayMutation))}function gT(e,t){var n=t.path.lastSegment();return[e,Q_(t.path.popLast()),n]}function kT(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:fT(r.readTime),documentKey:Q_(r.documentKey.path),largestBatchId:r.largestBatchId}}var bT=function(){function e(){l(this,e)}return p(e,[{key:"getBundleMetadata",value:function(e,t){return wT(e).get(t).next((function(e){if(e)return function(e){return{id:e.bundleId,createTime:hT(e.createTime),version:e.version}}(e)}))}},{key:"saveBundleMetadata",value:function(e,t){return wT(e).put(function(e){return{bundleId:e.id,createTime:fT(LI(e.createTime)),version:e.version}}(t))}},{key:"getNamedQuery",value:function(e,t){return _T(e).get(t).next((function(e){if(e)return function(e){return{name:e.name,query:mT(e.bundledQuery),readTime:hT(e.readTime)}}(e)}))}},{key:"saveNamedQuery",value:function(e,t){return _T(e).put(function(e){return{name:e.name,readTime:fT(LI(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function wT(e){return _x(e,"bundles")}function _T(e){return _x(e,"namedQueries")}var xT=function(){function e(t,n){l(this,e),this.serializer=t,this.userId=n}return p(e,[{key:"getOverlay",value:function(e,t){var n=this;return ET(e).get(gT(this.userId,t)).next((function(e){return e?yT(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=mS();return P_.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new oI(t,a);i.push(r.ht(e,o))})),P_.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Q_(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(ET(e).J("collectionPathOverlayIndex",i))})),P_.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=mS(),a=Q_(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return ET(e).G("collectionPathOverlayIndex",o).next((function(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=yT(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=mS(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ET(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=yT(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ht",value:function(e,t){return ET(e).put(function(e,t,n){var r=S(gT(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:GI(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"lt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function ET(e){return _x(e,"documentOverlays")}var ST=function(){function e(){l(this,e)}return p(e,[{key:"Pt",value:function(e,t){this.It(e,t),t.Tt()}},{key:"It",value:function(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Fx(e.integerValue));else if("doubleValue"in e){var n=Fx(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),W_(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){var r=e.timestampValue;this.Et(t,20),"string"==typeof r?t.At(r):(t.At("".concat(r.seconds||"")),t.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(jx(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.Et(t,45),t.dt(i.latitude||0),t.dt(i.longitude||0)}else"mapValue"in e?oE(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Gw()}},{key:"Rt",value:function(e,t){this.Et(t,25),this.St(e,t)}},{key:"St",value:function(e,t){t.At(e)}},{key:"yt",value:function(e,t){var n=e.fields||{};this.Et(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Rt(a,t),this.It(n[a],t)}}},{key:"wt",value:function(e,t){var n=e.values||[];this.Et(t,50);var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.It(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"gt",value:function(e,t){var n=this;this.Et(t,37),g_.fromName(e).path.forEach((function(e){n.Et(t,60),n.St(e,t)}))}},{key:"Et",value:function(e,t){e.dt(t)}},{key:"Vt",value:function(e){e.dt(2)}}]),e}();function IT(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function TT(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=IT(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}ST.bt=new ST;var CT=function(){function e(){l(this,e),this.buffer=new Uint8Array(1024),this.position=0}return p(e,[{key:"Dt",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.vt(n.value),n=t.next();this.Ct()}},{key:"Ft",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Mt(n.value),n=t.next();this.xt()}},{key:"Ot",value:function(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.vt(i);else if(i<2048)this.vt(960|i>>>6),this.vt(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.vt(480|i>>>12),this.vt(128|63&i>>>6),this.vt(128|63&i);else{var a=r.codePointAt(0);this.vt(240|a>>>18),this.vt(128|63&a>>>12),this.vt(128|63&a>>>6),this.vt(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ct()}},{key:"Nt",value:function(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{var a=r.codePointAt(0);this.Mt(240|a>>>18),this.Mt(128|63&a>>>12),this.Mt(128|63&a>>>6),this.Mt(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.xt()}},{key:"Bt",value:function(e){var t=this.Lt(e),n=TT(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"qt",value:function(e){var t=this.Lt(e),n=TT(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Qt",value:function(){this.Kt(255),this.Kt(255)}},{key:"$t",value:function(){this.Ut(255),this.Ut(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Wt",value:function(){return this.buffer.slice(0,this.position)}},{key:"Lt",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"vt",value:function(e){var t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}},{key:"Mt",value:function(e){var t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}},{key:"Ct",value:function(){this.Kt(0),this.Kt(1)}},{key:"xt",value:function(){this.Ut(0),this.Ut(1)}},{key:"Kt",value:function(e){this.kt(1),this.buffer[this.position++]=e}},{key:"Ut",value:function(e){this.kt(1),this.buffer[this.position++]=~e}},{key:"kt",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),NT=function(){function e(t){l(this,e),this.Gt=t}return p(e,[{key:"ft",value:function(e){this.Gt.Dt(e)}},{key:"At",value:function(e){this.Gt.Ot(e)}},{key:"dt",value:function(e){this.Gt.Bt(e)}},{key:"Tt",value:function(){this.Gt.Qt()}}]),e}(),AT=function(){function e(t){l(this,e),this.Gt=t}return p(e,[{key:"ft",value:function(e){this.Gt.Ft(e)}},{key:"At",value:function(e){this.Gt.Nt(e)}},{key:"dt",value:function(e){this.Gt.qt(e)}},{key:"Tt",value:function(){this.Gt.$t()}}]),e}(),RT=function(){function e(){l(this,e),this.Gt=new CT,this.zt=new NT(this.Gt),this.jt=new AT(this.Gt)}return p(e,[{key:"seed",value:function(e){this.Gt.seed(e)}},{key:"Ht",value:function(e){return 0===e?this.zt:this.jt}},{key:"Wt",value:function(){return this.Gt.Wt()}},{key:"reset",value:function(){this.Gt.reset()}}]),e}(),PT=function(){function e(t,n,r,i){l(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return p(e,[{key:"Jt",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function DT(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=OT(e.arrayValue,t.arrayValue))?n:0!==(n=OT(e.directionalValue,t.directionalValue))?n:g_.comparator(e.documentKey,t.documentKey)}function OT(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var LT=function(){function e(t){l(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Yt=t.orderBy,this.Zt=[];var n,r=T(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Xt=i:this.Zt.push(i)}}catch(a){r.e(a)}finally{r.f()}}return p(e,[{key:"en",value:function(e){Qw(e.collectionGroup===this.collectionId);var t=b_(e);if(void 0!==t&&!this.tn(t))return!1;for(var n=w_(e),r=new Set,i=0,a=0;i<n.length&&this.tn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.Xt){if(!r.has(this.Xt.field.canonicalString())){var o=n[i];if(!this.nn(this.Xt,o)||!this.rn(this.Yt[a++],o))return!1}++i}for(;i<n.length;++i){var u=n[i];if(a>=this.Yt.length||!this.rn(this.Yt[a++],u))return!1}return!0}},{key:"tn",value:function(e){var t,n=T(this.Zt);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.nn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"nn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"rn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function MT(e){var t,n;if(Qw(e instanceof bE||e instanceof wE),e instanceof bE){if(e instanceof LE){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return bE.create(e.field,"==",t)})))||[];return wE.create(r,"or")}return e}var i=e.filters.map((function(e){return MT(e)}));return wE.create(i,e.op)}function FT(e){if(0===e.getFilters().length)return[];var t=BT(MT(e));return Qw(VT(t)),jT(t)||UT(t)?[t]:t.getFilters()}function jT(e){return e instanceof bE}function UT(e){return e instanceof wE&&EE(e)}function VT(e){return jT(e)||UT(e)||function(e){if(e instanceof wE&&xE(e)){var t,n=T(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!jT(r)&&!UT(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function BT(e){if(Qw(e instanceof bE||e instanceof wE),e instanceof bE)return e;if(1===e.filters.length)return BT(e.filters[0]);var t=e.filters.map((function(e){return BT(e)})),n=wE.create(t,e.op);return VT(n=KT(n))?n:(Qw(n instanceof wE),Qw(_E(n)),Qw(n.filters.length>1),n.filters.reduce((function(e,t){return zT(e,t)})))}function zT(e,t){var n;return Qw(e instanceof bE||e instanceof wE),Qw(t instanceof bE||t instanceof wE),n=e instanceof bE?t instanceof bE?function(e,t){return wE.create([e,t],"and")}(e,t):qT(e,t):t instanceof bE?qT(t,e):function(e,t){if(Qw(e.filters.length>0&&t.filters.length>0),_E(e)&&_E(t))return CE(e,t.getFilters());var n=xE(e)?e:t,r=xE(e)?t:e,i=n.filters.map((function(e){return zT(e,r)}));return wE.create(i,"or")}(e,t),KT(n)}function qT(e,t){if(_E(t))return CE(t,e.getFilters());var n=t.filters.map((function(t){return zT(e,t)}));return wE.create(n,"or")}function KT(e){if(Qw(e instanceof bE||e instanceof wE),e instanceof bE)return e;var t=e.getFilters();if(1===t.length)return KT(t[0]);if(SE(e))return e;var n=t.map((function(e){return KT(e)})),r=[];return n.forEach((function(t){t instanceof bE?r.push(t):t instanceof wE&&(t.op===e.op?r.push.apply(r,c(t.filters)):r.push(t))})),1===r.length?r[0]:wE.create(r,e.op)}var HT=function(){function e(){l(this,e),this.sn=new WT}return p(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.sn.add(t),P_.resolve()}},{key:"getCollectionParents",value:function(e,t){return P_.resolve(this.sn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return P_.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return P_.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return P_.resolve(null)}},{key:"getIndexType",value:function(e,t){return P_.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return P_.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return P_.resolve(null)}},{key:"getMinOffset",value:function(e,t){return P_.resolve(I_.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return P_.resolve(I_.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return P_.resolve()}},{key:"updateIndexEntries",value:function(e,t){return P_.resolve()}}]),e}(),WT=function(){function e(){l(this,e),this.index={}}return p(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Nx(v_.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Nx(v_.comparator)).toArray()}}]),e}(),GT=new Uint8Array(0),QT=function(){function e(t,n){l(this,e),this.user=t,this.databaseId=n,this.on=new WT,this._n=new lS((function(e){return VE(e)}),(function(e,t){return BE(e,t)})),this.uid=t.uid||""}return p(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.on.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.on.add(t)}));var a={collectionId:r,parent:Q_(i)};return YT(e).put(a)}return P_.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[f_(t),""],!1,!0);return YT(e).G(r).next((function(e){var r,i=T(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push($_(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=$T(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=XT(e);return a.next((function(e){o.put(kT(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=$T(e),r=XT(e),i=JT(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=JT(e),i=!0,a=new Map;return P_.forEach(this.an(t),(function(t){return n.un(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=wS(),o=[];return P_.forEach(a,(function(i,a){qw("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(","))}(i)," to execute ").concat(VE(t)));var u=function(e,t){var n=b_(t);if(void 0===n)return null;var r,i=T(qE(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),s=function(e,t){var n,r=new Map,i=T(w_(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=T(qE(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=[],i=!0,a=T(w_(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?KE(e,o.fieldPath,e.startAt):HE(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new pE(r,i)}(a,i),l=function(e,t){var n,r=[],i=!0,a=T(w_(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?HE(e,o.fieldPath,e.endAt):KE(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new pE(r,i)}(a,i),f=n.cn(i,a,c),h=n.cn(i,a,l),d=n.ln(i,a,s),p=n.hn(i.indexId,u,f,c.inclusive,h,l.inclusive,d);return P_.forEach(p,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=g_.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return P_.resolve(null)}))}},{key:"an",value:function(e){var t=this._n.get(e);return t||(t=0===e.filters.length?[e]:FT(wE.create(e.filters,"and")).map((function(t){return UE(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this._n.set(e,t),t)}},{key:"hn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),l=s/(null!=t?t.length:1),f=[],h=function(){var s=t?u.Pn(t[d/l]):GT,h=u.In(e,s,n[d%l],r),p=u.Tn(e,s,i[d%l],a),v=o.map((function(t){return u.In(e,s,t,!0)}));f.push.apply(f,c(u.createRange(h,p,v)))},d=0;d<s;++d)h();return f}},{key:"In",value:function(e,t,n,r){var i=new PT(e,g_.empty(),t,n);return r?i:i.Jt()}},{key:"Tn",value:function(e,t,n,r){var i=new PT(e,g_.empty(),t,n);return r?i.Jt():i}},{key:"un",value:function(e,t){var n=new LT(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=T(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.en(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.an(t);return P_.forEach(i,(function(t){return n.un(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Nx(y_.comparator),r=!1,i=T(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=T(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=T(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"En",value:function(e,t){var n,r=new RT,i=T(w_(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ht(a.kind);ST.bt.Pt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Wt()}},{key:"Pn",value:function(e){var t=new RT;return ST.bt.Pt(e,t.Ht(0)),t.Wt()}},{key:"dn",value:function(e,t){var n=new RT;return ST.bt.Pt(Zx(this.databaseId,t),n.Ht(function(e){var t=w_(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}},{key:"ln",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new RT);var i,a=0,o=T(w_(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=T(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.An(t,s.fieldPath)&&tE(c))r=this.Rn(r,s,c);else{var h=f.Ht(s.kind);ST.bt.Pt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.Vn(r)}},{key:"cn",value:function(e,t,n){return this.ln(e,t,n.position)}},{key:"Vn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Wt();return t}},{key:"Rn",value:function(e,t,n){var r,i=c(e),a=[],o=T(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,l=T(i);try{for(l.s();!(u=l.n()).done;){var f=u.value,h=new RT;h.seed(f.Wt()),ST.bt.Pt(s,h.Ht(t.kind)),a.push(h)}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"An",value:function(e,t){return!!e.filters.find((function(e){return e instanceof bE&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=$T(e),i=XT(e);return(t?r.G("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.G()).next((function(e){var t=[];return P_.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new x_(t.sequenceNumber,new I_(hT(t.readTime),new g_($_(t.documentKey)),t.largestBatchId)):x_.empty(),r=e.fields.map((function(e){var t=S(e,2),n=t[0],r=t[1];return new __(y_.fromServerFormat(n),r)}));return new k_(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:c_(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=$T(e),a=XT(e);return this.mn(e).next((function(e){return i.G("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return P_.forEach(t,(function(t){return a.put(kT(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return P_.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?P_.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),P_.forEach(a,(function(r){return n.fn(e,t,r).next((function(t){var a=n.gn(i,r);return t.isEqual(a)?P_.resolve():n.pn(e,i,r,t,a)}))}))}))}))}},{key:"yn",value:function(e,t,n,r){return JT(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.dn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"wn",value:function(e,t,n,r){return JT(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.dn(n,t.key),t.key.path.toArray()])}},{key:"fn",value:function(e,t,n){var r=JT(e),i=new Nx(DT);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.dn(n,t)])},(function(e,r){i=i.add(new PT(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"gn",value:function(e,t){var n=new Nx(DT),r=this.En(t,e);if(null==r)return n;var i=b_(t);if(null!=i){var a=e.data.field(i.fieldPath);if(tE(a)){var o,u=T(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new PT(t.indexId,e.key,this.Pn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new PT(t.indexId,e.key,GT,r));return n}},{key:"pn",value:function(e,t,n,r,i){var a=this;qw("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Rx(a),s=Rx(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Rx(o)):l?(i(u),u=Rx(a)):(u=Rx(a),s=Rx(o))}}(r,i,DT,(function(r){o.push(a.yn(e,t,n,r))}),(function(r){o.push(a.wn(e,t,n,r))})),P_.waitFor(o)}},{key:"mn",value:function(e){var t=1;return XT(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return DT(e,t)})).filter((function(e,t,n){return!t||0!==DT(e,n[t-1])}));var r=[];r.push(e);var i,a=T(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=DT(o,e),s=DT(o,t);if(0===u)r[0]=e.Jt();else if(u>0&&s<0)r.push(o),r.push(o.Jt());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.Sn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,GT,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,GT,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"Sn",value:function(e,t){return DT(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(ZT)}},{key:"getMinOffset",value:function(e,t){var n=this;return P_.mapArray(this.an(t),(function(t){return n.un(e,t).next((function(e){return e||Gw()}))})).next(ZT)}}]),e}();function YT(e){return _x(e,"collectionParents")}function JT(e){return _x(e,"indexEntries")}function $T(e){return _x(e,"indexConfiguration")}function XT(e){return _x(e,"indexState")}function ZT(e){Qw(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;T_(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new I_(t.readTime,t.documentKey,n)}var eC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tC=function(){function e(t,n,r){l(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return p(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function nC(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Qw(1===u)})));var c,l=[],f=T(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=ex(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return P_.waitFor(a).next((function(){return l}))}function rC(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Gw();t=e.noDocument}return JSON.stringify(t).length}tC.DEFAULT_COLLECTION_PERCENTILE=10,tC.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tC.DEFAULT=new tC(41943040,tC.DEFAULT_COLLECTION_PERCENTILE,tC.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tC.DISABLED=new tC(-1,0,0);var iC=function(){function e(t,n,r,i){l(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.bn={}}return p(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return oC(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=uC(e),o=oC(e);return o.add({}).next((function(u){Qw("number"==typeof u);var s,c=new iI(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return GI(e.ct,t)})),i=n.mutations.map((function(t){return GI(e.ct,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new Nx((function(e,t){return c_(e.canonicalString(),t.canonicalString())})),d=T(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=ex(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,tx))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.bn[u]=c.keys()})),P_.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return oC(e).get(t).next((function(e){return e?(Qw(e.userId===n.userId),dT(n.serializer,e)):null}))}},{key:"Dn",value:function(e,t){var n=this;return this.bn[t]?P_.resolve(this.bn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.bn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return oC(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Qw(t.batchId>=r),a=dT(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return oC(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return oC(e).G("userMutationsIndex",n).next((function(e){return e.map((function(e){return dT(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Z_(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return uC(e).Z({range:i},(function(r,i,o){var u=S(r,3),s=u[0],c=u[1],l=u[2],f=$_(c);if(s===n.userId&&t.path.isEqual(f))return oC(e).get(l).next((function(e){if(!e)throw Gw();Qw(e.userId===n.userId),a.push(dT(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Nx(c_),i=[];return t.forEach((function(t){var a=Z_(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=uC(e).Z({range:o},(function(e,i,a){var o=S(e,3),u=o[0],s=o[1],c=o[2],l=$_(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),P_.waitFor(i).next((function(){return n.vn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Z_(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Nx(c_);return uC(e).Z({range:o},(function(e,t,a){var o=S(e,3),s=o[0],c=o[1],l=o[2],f=$_(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.vn(e,u)}))}},{key:"vn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(oC(e).get(t).next((function(e){if(null===e)throw Gw();Qw(e.userId===n.userId),r.push(dT(n.serializer,e))})))})),P_.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return nC(e.ue,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Cn(t.batchId)})),P_.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Cn",value:function(e){delete this.bn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return P_.resolve();var r=IDBKeyRange.lowerBound(function(e){return[e]}(t.userId)),i=[];return uC(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=$_(e[1]);i.push(a)}else r.done()})).next((function(){Qw(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return aC(e,this.userId,t)}},{key:"Fn",value:function(e){var t=this;return sC(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"lt",value:function(t,n,r,i){return Qw(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function aC(e,t,n){var r=Z_(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return uC(e).Z({range:a,Y:!0},(function(e,n,r){var a=S(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function oC(e){return _x(e,"mutations")}function uC(e){return _x(e,"documentMutations")}function sC(e){return _x(e,"mutationQueues")}var cC=function(){function e(t){l(this,e),this.Mn=t}return p(e,[{key:"next",value:function(){return this.Mn+=2,this.Mn}}],[{key:"xn",value:function(){return new e(0)}},{key:"On",value:function(){return new e(-1)}}]),e}(),lC=function(){function e(t,n){l(this,e),this.referenceDelegate=t,this.serializer=n}return p(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Nn(e).next((function(n){var r=new cC(n.highestTargetId);return n.highestTargetId=r.next(),t.Bn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Nn(e).next((function(e){return d_.fromTimestamp(new h_(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Nn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Nn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Bn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Ln(e,t).next((function(){return n.Nn(e).next((function(r){return r.targetCount+=1,n.kn(t,r),n.Bn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Ln(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return fC(e).delete(t.targetId)})).next((function(){return n.Nn(e)})).next((function(t){return Qw(t.targetCount>0),t.targetCount-=1,n.Bn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return fC(e).Z((function(o,u){var s=pT(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return P_.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return fC(e).Z((function(e,n){var r=pT(n);t(r)}))}},{key:"Nn",value:function(e){return hC(e).get("targetGlobalKey").next((function(e){return Qw(null!==e),e}))}},{key:"Bn",value:function(e,t){return hC(e).put("targetGlobalKey",t)}},{key:"Ln",value:function(e,t){return fC(e).put(vT(this.serializer,t))}},{key:"kn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Nn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=VE(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return fC(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=pT(n);BE(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=dC(e);return t.forEach((function(t){var o=Q_(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),P_.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=dC(e);return P_.forEach(t,(function(t){var a=Q_(t.path);return P_.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=dC(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=dC(e),i=wS();return r.Z({range:n,Y:!0},(function(e,t,n){var r=$_(e[1]),a=new g_(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Q_(t.path),r=IDBKeyRange.bound([n],[f_(n)],!1,!0),i=0;return dC(e).Z({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=S(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ut",value:function(e,t){return fC(e).get(t).next((function(e){return e?pT(e):null}))}}]),e}();function fC(e){return _x(e,"targets")}function hC(e){return _x(e,"targetGlobal")}function dC(e){return _x(e,"targetDocuments")}function pC(e,t){var n=S(e,2),r=n[0],i=n[1],a=S(t,2),o=a[0],u=a[1],s=c_(r,o);return 0===s?c_(i,u):s}var vC=function(){function e(t){l(this,e),this.qn=t,this.buffer=new Nx(pC),this.Qn=0}return p(e,[{key:"Kn",value:function(){return++this.Qn}},{key:"$n",value:function(e){var t=[e,this.Kn()];if(this.buffer.size<this.qn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();pC(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),mC=function(){function e(t,n,r){l(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Un=null}return p(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Wn(6e4)}},{key:"stop",value:function(){this.Un&&(this.Un.cancel(),this.Un=null)}},{key:"started",get:function(){return null!==this.Un}},{key:"Wn",value:function(e){var t=this;qw("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Un=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,fs(_i().mark((function e(){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Un=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!F_(e.t0)){e.next=12;break}qw("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,A_(e.t0);case 14:return e.next=16,t.Wn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),yC=function(){function e(t,n){l(this,e),this.Gn=t,this.params=n}return p(e,[{key:"calculateTargetCount",value:function(e,t){return this.Gn.zn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return P_.resolve(K_.ae);var r=new vC(t);return this.Gn.forEachTarget(e,(function(e){return r.$n(e.sequenceNumber)})).next((function(){return n.Gn.jn(e,(function(e){return r.$n(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Gn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Gn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(qw("LruGarbageCollector","Garbage collection skipped; disabled"),P_.resolve(eC)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(qw("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),eC):n.Hn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Gn.getCacheSize(e)}},{key:"Hn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(qw("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),zw()<=ms.DEBUG&&qw("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),P_.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function gC(e,t){return new yC(e,t)}var kC=function(){function e(t,n){l(this,e),this.db=t,this.garbageCollector=gC(this,n)}return p(e,[{key:"zn",value:function(e){var t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Jn",value:function(e){var t=0;return this.jn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"jn",value:function(e,t){return this.Yn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return bC(e,n)}},{key:"removeReference",value:function(e,t,n){return bC(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return bC(e,t)}},{key:"Zn",value:function(e,t){return function(e,t){var n=!1;return sC(e).X((function(r){return aC(e,r,t).next((function(e){return e&&(n=!0),P_.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Yn(e,(function(o,u){if(u<=t){var s=n.Zn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,d_.min()),dC(e).delete(function(e){return[0,Q_(e.path)]}(o))}))}));i.push(s)}})).next((function(){return P_.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return bC(e,t)}},{key:"Yn",value:function(e,t){var n,r=dC(e),i=K_.ae;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=S(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==K_.ae&&t(new g_($_(n)),i),i=s,n=u):i=K_.ae})).next((function(){i!==K_.ae&&t(new g_($_(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function bC(e,t){return dC(e).put(function(e,t){return{targetId:0,path:Q_(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var wC=function(){function e(){l(this,e),this.changes=new lS((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return p(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,dE.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?P_.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),_C=function(){function e(t){l(this,e),this.serializer=t}return p(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return IC(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return IC(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],lT(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Xn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=dE.newInvalidDocument(t);return IC(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(TC(t))},(function(e,i){r=n.er(t,i)})).next((function(){return r}))}},{key:"tr",value:function(e,t){var n=this,r={size:0,document:dE.newInvalidDocument(t)};return IC(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(TC(t))},(function(e,i){r={document:n.er(t,i),size:rC(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=hS();return this.nr(e,t,(function(e,t){var i=n.er(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"rr",value:function(e,t){var n=this,r=hS(),i=new Ix(g_.comparator);return this.nr(e,t,(function(e,t){var a=n.er(e,t);r=r.insert(e,a),i=i.insert(e,rC(t))})).next((function(){return{documents:r,ir:i}}))}},{key:"nr",value:function(e,t,n){if(t.isEmpty())return P_.resolve();var r=new Nx(NC);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(TC(r.first()),TC(r.last())),a=r.getIterator(),o=a.getNext();return IC(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=g_.fromSegments([].concat(c(t.prefixPath),[t.collectionGroup,t.documentId]));o&&NC(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.W(TC(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),lT(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return IC(e).G(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=hS(),o=T(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.er(g_.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(oS(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=hS(),o=CC(t,n),u=CC(t,I_.max());return IC(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.er(g_.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new EC(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return SC(e).get("remoteDocumentGlobalKey").next((function(e){return Qw(!!e),e}))}},{key:"Xn",value:function(e,t){return SC(e).put("remoteDocumentGlobalKey",t)}},{key:"er",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=HI(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=g_.fromSegments(t.noDocument.path),i=hT(t.noDocument.readTime);n=dE.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Gw();var a=g_.fromSegments(t.unknownDocument.path),o=hT(t.unknownDocument.version);n=dE.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new h_(e[0],e[1]);return d_.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(d_.min()))return n}return dE.newInvalidDocument(e)}}]),e}();function xC(e){return new _C(e)}var EC=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).sr=e,i.trackRemovals=r,i._r=new lS((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return p(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Nx((function(e,t){return c_(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t._r.get(a);if(n.push(t.sr.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=cT(t.sr.serializer,o);i=i.add(a.path.popLast());var c=rC(s);r+=c-u.size,n.push(t.sr.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=cT(t.sr.serializer,o.convertToNoDocument(d_.min()));n.push(t.sr.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.sr.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.sr.updateMetadata(e,r)),P_.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.sr.tr(e,t).next((function(e){return n._r.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.sr.rr(e,t).next((function(e){var t=e.documents;return e.ir.forEach((function(e,r){n._r.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(wC);function SC(e){return _x(e,"remoteDocumentGlobal")}function IC(e){return _x(e,"remoteDocumentsV14")}function TC(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function CC(e,t){var n=t.documentKey.path.toArray();return[e,lT(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function NC(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=c_(n[a],r[a]))return i;return(i=c_(n.length,r.length))||((i=c_(n[n.length-2],r[r.length-2]))||c_(n[n.length-1],r[r.length-1]))}var AC=p((function e(t,n){l(this,e),this.overlayedDocument=t,this.mutatedFields=n})),RC=function(){function e(t,n,r,i){l(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return p(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&WS(r.mutation,e,Px.empty(),h_.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,wS()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wS(),i=mS();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=pS();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=mS();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,wS())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=hS(),a=gS(),o=gS();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof JS)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),WS(o.mutation,t,o.mutation.getFieldMask(),h_.now())):a.set(t.key,Px.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new AC(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=gS(),i=new Ix((function(e,t){return e-t})),a=wS();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=T(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Px.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||wS()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=yS();c.forEach((function(e){if(!a.has(e)){var n=KS(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return P_.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return g_.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):XE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):P_.resolve(mS()),u=-1,s=a;return o.next((function(t){return P_.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?P_.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,wS())})).next((function(e){return{batchId:u,changes:vS(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new g_(t)).next((function(e){var t=pS();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=pS();return this.indexManager.getCollectionParents(e,i).next((function(o){return P_.forEach(o,(function(o){var u=function(e,t){return new WE(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,dE.newInvalidDocument(r)))}));var n=pS();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&WS(a.mutation,i,Px.empty(),h_.now()),oS(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),PC=function(){function e(t){l(this,e),this.serializer=t,this.ar=new Map,this.ur=new Map}return p(e,[{key:"getBundleMetadata",value:function(e,t){return P_.resolve(this.ar.get(t))}},{key:"saveBundleMetadata",value:function(e,t){return this.ar.set(t.id,function(e){return{id:e.id,version:e.version,createTime:LI(e.createTime)}}(t)),P_.resolve()}},{key:"getNamedQuery",value:function(e,t){return P_.resolve(this.ur.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ur.set(t.name,function(e){return{name:e.name,query:mT(e.bundledQuery),readTime:LI(e.readTime)}}(t)),P_.resolve()}}]),e}(),DC=function(){function e(){l(this,e),this.overlays=new Ix(g_.comparator),this.cr=new Map}return p(e,[{key:"getOverlay",value:function(e,t){return P_.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=mS();return P_.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ht(e,t,i)})),P_.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.cr.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.cr.delete(n)),P_.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=mS(),i=t.length+1,a=new g_(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return P_.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Ix((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=mS(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=mS(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return P_.resolve(s)}},{key:"ht",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.cr.get(r.largestBatchId).delete(n.key);this.cr.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new oI(t,n));var a=this.cr.get(t);void 0===a&&(a=wS(),this.cr.set(t,a)),this.cr.set(t,a.add(n.key))}}]),e}(),OC=function(){function e(){l(this,e),this.lr=new Nx(LC.hr),this.Pr=new Nx(LC.Ir)}return p(e,[{key:"isEmpty",value:function(){return this.lr.isEmpty()}},{key:"addReference",value:function(e,t){var n=new LC(e,t);this.lr=this.lr.add(n),this.Pr=this.Pr.add(n)}},{key:"Tr",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Er(new LC(e,t))}},{key:"dr",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Ar",value:function(e){var t=this,n=new g_(new v_([])),r=new LC(n,e),i=new LC(n,e+1),a=[];return this.Pr.forEachInRange([r,i],(function(e){t.Er(e),a.push(e.key)})),a}},{key:"Rr",value:function(){var e=this;this.lr.forEach((function(t){return e.Er(t)}))}},{key:"Er",value:function(e){this.lr=this.lr.delete(e),this.Pr=this.Pr.delete(e)}},{key:"Vr",value:function(e){var t=new g_(new v_([])),n=new LC(t,e),r=new LC(t,e+1),i=wS();return this.Pr.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new LC(e,0),n=this.lr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),LC=function(){function e(t,n){l(this,e),this.key=t,this.mr=n}return p(e,null,[{key:"hr",value:function(e,t){return g_.comparator(e.key,t.key)||c_(e.mr,t.mr)}},{key:"Ir",value:function(e,t){return c_(e.mr,t.mr)||g_.comparator(e.key,t.key)}}]),e}(),MC=function(){function e(t,n){l(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.gr=1,this.pr=new Nx(LC.hr)}return p(e,[{key:"checkEmpty",value:function(e){return P_.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.gr;this.gr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new iI(i,t,n,r);this.mutationQueue.push(a);var o,u=T(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.pr=this.pr.add(new LC(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return P_.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return P_.resolve(this.yr(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.wr(n),i=r<0?0:r;return P_.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return P_.resolve(0===this.mutationQueue.length?-1:this.gr-1)}},{key:"getAllMutationBatches",value:function(e){return P_.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new LC(t,0),i=new LC(t,Number.POSITIVE_INFINITY),a=[];return this.pr.forEachInRange([r,i],(function(e){var t=n.yr(e.mr);a.push(t)})),P_.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Nx(c_);return t.forEach((function(e){var t=new LC(e,0),i=new LC(e,Number.POSITIVE_INFINITY);n.pr.forEachInRange([t,i],(function(e){r=r.add(e.mr)}))})),P_.resolve(this.Sr(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;g_.isDocumentKey(i)||(i=i.child(""));var a=new LC(new g_(i),0),o=new Nx(c_);return this.pr.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.mr)),!0)}),a),P_.resolve(this.Sr(o))}},{key:"Sr",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.yr(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Qw(0===this.br(t.batchId,"removed")),this.mutationQueue.shift();var r=this.pr;return P_.forEach(t.mutations,(function(i){var a=new LC(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.pr=r}))}},{key:"Cn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new LC(t,0),r=this.pr.firstAfterOrEqual(n);return P_.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,P_.resolve()}},{key:"br",value:function(e,t){return this.wr(e)}},{key:"wr",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"yr",value:function(e){var t=this.wr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),FC=function(){function e(t){l(this,e),this.Dr=t,this.docs=new Ix(g_.comparator),this.size=0}return p(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Dr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return P_.resolve(n?n.document.mutableCopy():dE.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=hS();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():dE.newInvalidDocument(e))})),P_.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=hS(),a=t.path,o=new g_(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||T_(S_(l),n)<=0||(r.has(l.key)||oS(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return P_.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Gw()}},{key:"vr",value:function(e,t){return P_.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new jC(this)}},{key:"getSize",value:function(e){return P_.resolve(this.size)}}]),e}(),jC=function(e){m(n,e);var t=b(n);function n(e){var r;return l(this,n),(r=t.call(this)).sr=e,r}return p(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.sr.addEntry(e,i)):t.sr.removeEntry(r)})),P_.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.sr.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.sr.getEntries(e,t)}}]),n}(wC),UC=function(){function e(t){l(this,e),this.persistence=t,this.Cr=new lS((function(e){return VE(e)}),BE),this.lastRemoteSnapshotVersion=d_.min(),this.highestTargetId=0,this.Fr=0,this.Mr=new OC,this.targetCount=0,this.Or=cC.xn()}return p(e,[{key:"forEachTarget",value:function(e,t){return this.Cr.forEach((function(e,n){return t(n)})),P_.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return P_.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return P_.resolve(this.Fr)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Or.next(),P_.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Fr&&(this.Fr=t),P_.resolve()}},{key:"Ln",value:function(e){this.Cr.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Or=new cC(t),this.highestTargetId=t),e.sequenceNumber>this.Fr&&(this.Fr=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Ln(t),this.targetCount+=1,P_.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Ln(t),P_.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Cr.delete(t.target),this.Mr.Ar(t.targetId),this.targetCount-=1,P_.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Cr.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Cr.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),P_.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return P_.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Cr.get(t)||null;return P_.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Mr.Tr(t,n),P_.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Mr.dr(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),P_.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Mr.Ar(t),P_.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Mr.Vr(t);return P_.resolve(n)}},{key:"containsKey",value:function(e,t){return P_.resolve(this.Mr.containsKey(t))}}]),e}(),VC=function(){function e(t,n){var r=this;l(this,e),this.Nr={},this.overlays={},this.Br=new K_(0),this.Lr=!1,this.Lr=!0,this.referenceDelegate=t(this),this.kr=new UC(this),this.indexManager=new HT,this.remoteDocumentCache=function(e){return new FC(e)}((function(e){return r.referenceDelegate.qr(e)})),this.serializer=new sT(n),this.Qr=new PC(this.serializer)}return p(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Lr=!1,Promise.resolve()}},{key:"started",get:function(){return this.Lr}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new DC,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Nr[e.toKey()];return n||(n=new MC(t,this.referenceDelegate),this.Nr[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.kr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Qr}},{key:"runTransaction",value:function(e,t,n){var r=this;qw("MemoryPersistence","Starting transaction:",e);var i=new BC(this.Br.next());return this.referenceDelegate.Kr(),n(i).next((function(e){return r.referenceDelegate.$r(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ur",value:function(e,t){return P_.or(Object.values(this.Nr).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),BC=function(e){m(n,e);var t=b(n);function n(e){var r;return l(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return p(n)}(N_),zC=function(){function e(t){l(this,e),this.persistence=t,this.Wr=new OC,this.Gr=null}return p(e,[{key:"jr",get:function(){if(this.Gr)return this.Gr;throw Gw()}},{key:"addReference",value:function(e,t,n){return this.Wr.addReference(n,t),this.jr.delete(n.toString()),P_.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Wr.removeReference(n,t),this.jr.add(n.toString()),P_.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.jr.add(t.toString()),P_.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Wr.Ar(t.targetId).forEach((function(e){return n.jr.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.jr.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Kr",value:function(){this.Gr=new Set}},{key:"$r",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P_.forEach(this.jr,(function(r){var i=g_.fromPath(r);return t.Hr(e,i).next((function(e){e||n.removeEntry(i,d_.min())}))})).next((function(){return t.Gr=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hr(e,t).next((function(e){e?n.jr.delete(t.toString()):n.jr.add(t.toString())}))}},{key:"qr",value:function(e){return 0}},{key:"Hr",value:function(e,t){var n=this;return P_.or([function(){return P_.resolve(n.Wr.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ur(e,t)}])}}],[{key:"zr",value:function(t){return new e(t)}}]),e}(),qC=function(){function e(t){l(this,e),this.serializer=t}return p(e,[{key:"B",value:function(e,t,n,r){var i=this,a=new D_("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",X_,{unique:!0}),e.createObjectStore("documentMutations")}(e),KC(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=P_.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),KC(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:d_.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").G().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",X_,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return P_.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Yr(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Zr(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Xr(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ei(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ti(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:dx});t.createIndex("collectionPathOverlayIndex",px,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",vx,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:nx});t.createIndex("documentKeyIndex",rx),t.createIndex("collectionGroupIndex",ix)}(e)})).next((function(){return i.ni(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.ri(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:cx}).createIndex("sequenceNumberIndex",lx,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:fx}).createIndex("documentKeyIndex",hx,{unique:!1})}(e)}))),o}},{key:"Zr",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=rC(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Yr",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.G().next((function(n){return P_.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.G("userMutationsIndex",i).next((function(r){return P_.forEach(r,(function(r){Qw(r.userId===n.userId);var i=dT(t.serializer,r);return nC(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Xr",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new v_(n),o=function(e){return[0,Q_(e)]}(a);r.push(t.get(o).next((function(n){return n?P_.resolve():function(n){return t.put({targetId:0,path:Q_(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return P_.waitFor(r)}))}))}},{key:"ei",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:sx});var n=t.store("collectionParents"),r=new WT,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Q_(i)})}};return t.store("remoteDocuments").Z({Y:!0},(function(e,t){var n=new v_(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({Y:!0},(function(e,t){var n=S(e,3),r=(n[0],n[1]),a=(n[2],$_(r));return i(a.popLast())}))}))}},{key:"ti",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=pT(r),a=vT(t.serializer,i);return n.put(a)}))}},{key:"ni",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i=t.store("remoteDocumentsV14"),a=function(e){return e.document?new g_(v_.fromString(e.document.name).popFirst(5)):e.noDocument?g_.fromSegments(e.noDocument.path):e.unknownDocument?g_.fromSegments(e.unknownDocument.path):Gw()}(n).path.toArray(),o={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((function(){return P_.waitFor(r)}))}},{key:"ri",value:function(e,t){var n=this,r=t.store("mutations"),i=xC(this.serializer),a=new VC(zC.zr,this.serializer.ct);return r.G().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:wS();dT(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),P_.forEach(r,(function(e,r){var o=new Uw(r),u=xT.lt(n.serializer,o),s=a.getIndexManager(o),c=iC.lt(o,n.serializer,s,a.referenceDelegate);return new RC(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new wx(t,K_.ae),e).next()}))}))}}]),e}();function KC(e){e.createObjectStore("targetDocuments",{keyPath:ox}).createIndex("documentTargetsIndex",ux,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ax,{unique:!0}),e.createObjectStore("targetGlobal")}var HC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",WC=function(){function e(t,n,r,i,a,o,u,s,c,f){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(l(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.ii=a,this.window=o,this.document=u,this.si=c,this.oi=f,this._i=h,this.Br=null,this.Lr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ai=null,this.inForeground=!1,this.ui=null,this.ci=null,this.li=Number.NEGATIVE_INFINITY,this.hi=function(e){return Promise.resolve()},!e.v())throw new $w(Jw.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new kC(this,i),this.Pi=n+"main",this.serializer=new sT(s),this.Ii=new O_(this.Pi,this._i,new qC(this.serializer)),this.kr=new lC(this.referenceDelegate,this.serializer),this.remoteDocumentCache=xC(this.serializer),this.Qr=new bT,this.window&&this.window.localStorage?this.Ti=this.window.localStorage:(this.Ti=null,!1===f&&Kw("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return p(e,[{key:"start",value:function(){var e=this;return this.Ei().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new $w(Jw.FAILED_PRECONDITION,HC);return e.di(),e.Ai(),e.Ri(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.kr.getHighestSequenceNumber(t)}))})).then((function(t){e.Br=new K_(t,e.si)})).then((function(){e.Lr=!0})).catch((function(t){return e.Ii&&e.Ii.close(),Promise.reject(t)}))}},{key:"Vi",value:function(e){var t=this;return this.hi=function(){var n=fs(_i().mark((function n(r){return _i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.Ii.k(function(){var t=fs(_i().mark((function t(n){return _i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(fs(_i().mark((function e(){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Ei();case 4:case"end":return e.stop()}}),e)})))))}},{key:"Ei",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return QC(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.mi(t).next((function(t){t||(e.isPrimary=!1,e.ii.enqueueRetryable((function(){return e.hi(!1)})))}))})).next((function(){return e.fi(t)})).next((function(n){return e.isPrimary&&!n?e.gi(t).next((function(){return!1})):!!n&&e.pi(t).next((function(){return!0}))}))})).catch((function(t){if(F_(t))return qw("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return qw("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.ii.enqueueRetryable((function(){return e.hi(t)})),e.isPrimary=t}))}},{key:"mi",value:function(e){var t=this;return GC(e).get("owner").next((function(e){return P_.resolve(t.yi(e))}))}},{key:"wi",value:function(e){return QC(e).delete(this.clientId)}},{key:"Si",value:function(){var e=fs(_i().mark((function e(){var t,n,r,i,a=this;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.bi(this.li,18e5)){e.next=6;break}return this.li=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=_x(e,"clientMetadata");return t.G().next((function(e){var n=a.Di(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return P_.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Ti){n=T(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Ti.removeItem(this.vi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ri",value:function(){var e=this;this.ci=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Ei().then((function(){return e.Si()})).then((function(){return e.Ri()}))}))}},{key:"yi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"fi",value:function(e){var t=this;return this.oi?P_.resolve(!0):GC(e).get("owner").next((function(n){if(null!==n&&t.bi(n.leaseTimestampMs,5e3)&&!t.Ci(n.ownerId)){if(t.yi(n)&&t.networkEnabled)return!0;if(!t.yi(n)){if(!n.allowTabSynchronization)throw new $w(Jw.FAILED_PRECONDITION,HC);return!1}}return!(!t.networkEnabled||!t.inForeground)||QC(e).G().next((function(e){return void 0===t.Di(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&qw("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=fs(_i().mark((function e(){var t=this;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lr=!1,this.Fi(),this.ci&&(this.ci.cancel(),this.ci=null),this.Mi(),this.xi(),e.next=7,this.Ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new wx(e,K_.ae);return t.gi(n).next((function(){return t.wi(n)}))}));case 7:this.Ii.close(),this.Oi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Di",value:function(e,t){var n=this;return e.filter((function(e){return n.bi(e.updateTimeMs,t)&&!n.Ci(e.clientId)}))}},{key:"Ni",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return QC(t).G().next((function(t){return e.Di(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Lr}},{key:"getMutationQueue",value:function(e,t){return iC.lt(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.kr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new QT(e,this.serializer.ct.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return xT.lt(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.Qr}},{key:"runTransaction",value:function(e,t,n){var r=this;qw("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite",o=function(e){return 15===e?bx:14===e?kx:13===e?gx:12===e?yx:11===e?mx:void Gw()}(this._i);return this.Ii.runTransaction(e,a,o,(function(a){return i=new wx(a,r.Br?r.Br.next():K_.ae),"readwrite-primary"===t?r.mi(i).next((function(e){return!!e||r.fi(i)})).next((function(t){if(!t)throw Kw("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.ii.enqueueRetryable((function(){return r.hi(!1)})),new $w(Jw.FAILED_PRECONDITION,C_);return n(i)})).next((function(e){return r.pi(i).next((function(){return e}))})):r.Bi(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Bi",value:function(e){var t=this;return GC(e).get("owner").next((function(e){if(null!==e&&t.bi(e.leaseTimestampMs,5e3)&&!t.Ci(e.ownerId)&&!t.yi(e)&&!(t.oi||t.allowTabSynchronization&&e.allowTabSynchronization))throw new $w(Jw.FAILED_PRECONDITION,HC)}))}},{key:"pi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return GC(e).put("owner",t)}},{key:"gi",value:function(e){var t=this,n=GC(e);return n.get("owner").next((function(e){return t.yi(e)?(qw("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):P_.resolve()}))}},{key:"bi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Kw("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"di",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ui=function(){e.ii.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Ei()}))},this.document.addEventListener("visibilitychange",this.ui),this.inForeground="visible"===this.document.visibilityState)}},{key:"Mi",value:function(){this.ui&&(this.document.removeEventListener("visibilitychange",this.ui),this.ui=null)}},{key:"Ai",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ai=function(){t.Fi();var e=/(?:Version|Mobile)\/1[456]/;!Hu()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.ii.enterRestrictedMode(!0),t.ii.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ai))}},{key:"xi",value:function(){this.ai&&(this.window.removeEventListener("pagehide",this.ai),this.ai=null)}},{key:"Ci",value:function(e){var t;try{var n=null!==(null===(t=this.Ti)||void 0===t?void 0:t.getItem(this.vi(e)));return qw("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Kw("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Fi",value:function(){if(this.Ti)try{this.Ti.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){Kw("Failed to set zombie client id.",e)}}},{key:"Oi",value:function(){if(this.Ti)try{this.Ti.removeItem(this.vi(this.clientId))}catch(e){}}},{key:"vi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"v",value:function(){return O_.v()}}]),e}();function GC(e){return _x(e,"owner")}function QC(e){return _x(e,"clientMetadata")}function YC(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var JC=function(){function e(t,n,r,i){l(this,e),this.targetId=t,this.fromCache=n,this.Li=r,this.ki=i}return p(e,null,[{key:"qi",value:function(t,n){var r,i=wS(),a=wS(),o=T(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),$C=function(){function e(){l(this,e),this.Qi=!1}return p(e,[{key:"initialize",value:function(e,t){this.Ki=e,this.indexManager=t,this.Qi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.$i(e,t).next((function(a){return a||i.Ui(e,t,r,n)})).next((function(n){return n||i.Wi(e,t)}))}},{key:"$i",value:function(e,t){var n=this;if(YE(t))return P_.resolve(null);var r=eS(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=nS(t,null,"F"),r=eS(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=wS.apply(void 0,c(i));return n.Ki.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Gi(t,i);return n.zi(t,o,a,r.readTime)?n.$i(e,nS(t,null,"F")):n.ji(e,o,t,r)}))}))})))}))}},{key:"Ui",value:function(e,t,n,r){var i=this;return YE(t)||r.isEqual(d_.min())?this.Wi(e,t):this.Ki.getDocuments(e,n).next((function(a){var o=i.Gi(t,a);return i.zi(t,o,n,r)?i.Wi(e,t):(zw()<=ms.DEBUG&&qw("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),aS(t)),i.ji(e,o,t,E_(r,-1)))}))}},{key:"Gi",value:function(e,t){var n=new Nx(sS(e));return t.forEach((function(t,r){oS(e,r)&&(n=n.add(r))})),n}},{key:"zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Wi",value:function(e,t){return zw()<=ms.DEBUG&&qw("QueryEngine","Using full collection scan to execute query:",aS(t)),this.Ki.getDocumentsMatchingQuery(e,t,I_.min())}},{key:"ji",value:function(e,t,n,r){return this.Ki.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),XC=function(){function e(t,n,r,i){l(this,e),this.persistence=t,this.Hi=n,this.serializer=i,this.Ji=new Ix(c_),this.Yi=new lS((function(e){return VE(e)}),BE),this.Zi=new Map,this.Xi=t.getRemoteDocumentCache(),this.kr=t.getTargetCache(),this.Qr=t.getBundleCache(),this.es(r)}return p(e,[{key:"es",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RC(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ji)}))}}]),e}();function ZC(e,t,n,r){return new XC(e,t,n,r)}function eN(e,t){return tN.apply(this,arguments)}function tN(){return tN=fs(_i().mark((function e(t,n){var r;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yw(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.es(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=wS(),s=T(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=T(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=T(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=T(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{ts:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),tN.apply(this,arguments)}function nN(e,t){var n=Yw(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Xi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=P_.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Qw(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=wS(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function rN(e){var t=Yw(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.kr.getLastRemoteSnapshotVersion(e)}))}function iN(e,t){var n=Yw(e),r=t.snapshotVersion,i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Xi.newChangeBuffer({trackRemovals:!0});i=n.Ji;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.kr.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.kr.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(Ox.EMPTY_BYTE_STRING,d_.min()).withLastLimboFreeSnapshotVersion(d_.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.kr.updateTargetData(e,c))}}));var u=hS(),s=wS();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(aN(e,a,t.documentUpdates).next((function(e){u=e.ns,s=e.rs}))),!r.isEqual(d_.min())){var c=n.kr.getLastRemoteSnapshotVersion(e).next((function(t){return n.kr.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return P_.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ji=i,e}))}function aN(e,t,n){var r=wS(),i=wS();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=hS();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(d_.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):qw("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{ns:r,rs:i}}))}function oN(e,t){var n=Yw(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function uN(e,t){var n=Yw(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.kr.getTargetData(e,t).next((function(i){return i?(r=i,P_.resolve(r)):n.kr.allocateTargetId(e).next((function(i){return r=new uT(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.kr.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}function sN(e,t,n){return cN.apply(this,arguments)}function cN(){return cN=fs(_i().mark((function e(t,n,r){var i,a,o;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Yw(t),a=i.Ji.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),F_(e.t1)){e.next=12;break}throw e.t1;case 12:qw("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ji=i.Ji.remove(n),i.Yi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),cN.apply(this,arguments)}function lN(e,t,n){var r=Yw(e),i=d_.min(),a=wS();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Yw(e),i=r.Yi.get(n);return void 0!==i?P_.resolve(r.Ji.get(i)):r.kr.getTargetData(t,n)}(r,e,eS(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.kr.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Hi.getDocumentsMatchingQuery(e,t,n?i:d_.min(),n?a:wS())})).next((function(e){return dN(r,uS(t),e),{documents:e,ss:a}}))}))}function fN(e,t){var n=Yw(e),r=Yw(n.kr),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ut(e,t).next((function(e){return e?e.target:null}))}))}function hN(e,t){var n=Yw(e),r=n.Zi.get(t)||d_.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Xi.getAllFromCollectionGroup(e,t,E_(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return dN(n,t,e),e}))}function dN(e,t,n){var r=e.Zi.get(t)||d_.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Zi.set(t,r)}function pN(e,t,n,r){return vN.apply(this,arguments)}function vN(){return vN=fs(_i().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Yw(t),o=wS(),u=hS(),s=T(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.os(l.metadata.name),l.document&&(o=o.add(f)),(h=n._s(l)).setReadTime(n.us(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Xi.newChangeBuffer({trackRemovals:!0}),e.next=7,uN(a,function(e){return eS(QE(v_.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return aN(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.kr.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.kr.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.ns,t.rs)})).next((function(){return t.ns}))}))})));case 9:case"end":return e.stop()}}),e)}))),vN.apply(this,arguments)}function mN(e,t){return yN.apply(this,arguments)}function yN(){return yN=fs(_i().mark((function e(t,n){var r,i,a,o=arguments;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:wS(),e.next=3,uN(t,eS(mT(n.bundledQuery)));case 3:return i=e.sent,a=Yw(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=LI(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Qr.saveNamedQuery(e,n);var o=i.withResumeToken(Ox.EMPTY_BYTE_STRING,t);return a.Ji=a.Ji.insert(o.targetId,o),a.kr.updateTargetData(e,o).next((function(){return a.kr.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.kr.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Qr.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),yN.apply(this,arguments)}function gN(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function kN(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function bN(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var wN=function(){function e(t,n,r,i){l(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return p(e,[{key:"ls",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"cs",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new $w(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Kw("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),_N=function(){function e(t,n,r){l(this,e),this.targetId=t,this.state=n,this.error=r}return p(e,[{key:"ls",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"cs",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new $w(i.error.code,i.error.message))),a?new e(t,i.state,r):(Kw("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),xN=function(){function e(t,n){l(this,e),this.clientId=t,this.activeTargetIds=n}return p(e,null,[{key:"cs",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=xS(),o=0;i&&o<r.activeTargetIds.length;++o)i=G_(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Kw("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),EN=function(){function e(t,n){l(this,e),this.clientId=t,this.onlineState=n}return p(e,null,[{key:"cs",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Kw("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),SN=function(){function e(){l(this,e),this.activeTargetIds=xS()}return p(e,[{key:"hs",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ps",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"ls",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),IN=function(){function e(t,n,r,i,a){l(this,e),this.window=t,this.ii=n,this.persistenceKey=r,this.Is=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ts=this.Es.bind(this),this.ds=new Ix(c_),this.started=!1,this.As=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Rs=gN(this.persistenceKey,this.Is),this.Vs=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ds=this.ds.insert(this.Is,new SN),this.fs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.gs=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.ps=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.ys=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.ws=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Ts)}return p(e,[{key:"start",value:function(){var e=fs(_i().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Ni();case 2:t=e.sent,n=T(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.Is){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(gN(this.persistenceKey,i)))&&(o=xN.cs(i,a))&&(this.ds=this.ds.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Ss(),(u=this.storage.getItem(this.ys))&&(s=this.bs(u))&&this.Ds(s),c=T(this.As);try{for(c.s();!(l=c.n()).done;)f=l.value,this.Es(f)}catch(d){c.e(d)}finally{c.f()}this.As=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Vs,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.vs(this.ds)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ds.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Cs(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Cs(e,t,n),this.Fs(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(bN(this.persistenceKey,e));if(n){var r=_N.cs(e,n);r&&(t=r.state)}}return this.Ms.hs(e),this.Ss(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ms.Ps(e),this.Ss()}},{key:"isLocalQueryTarget",value:function(e){return this.Ms.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(bN(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.xs(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Fs(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Os(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ns(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.Ts),this.removeItem(this.Rs),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return qw("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){qw("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){qw("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"Es",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(qw("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Rs)return void Kw("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(fs(_i().mark((function e(){var r,i,a,o,u,s,c;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.fs.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Bs(n.key),e.abrupt("return",t.Ls(r,null));case 6:if(!(i=t.ks(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Ls(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.gs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.qs(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Qs(a));case 16:e.next=41;break;case 18:if(!t.ps.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Ks(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.$s(o));case 23:e.next=41;break;case 25:if(n.key!==t.ys){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.bs(n.newValue))){e.next=30;break}return e.abrupt("return",t.Ds(u));case 30:e.next=41;break;case 32:if(n.key!==t.Vs){e.next=37;break}s=function(e){var t=K_.ae;if(null!=e)try{var n=JSON.parse(e);Qw("number"==typeof n),t=n}catch(e){Kw("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==K_.ae&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.ws){e.next=41;break}return c=t.Us(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Ws(e)})));case 41:e.next=44;break;case 43:t.As.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ms",get:function(){return this.ds.get(this.Is)}},{key:"Ss",value:function(){this.setItem(this.Rs,this.Ms.ls())}},{key:"Cs",value:function(e,t,n){var r=new wN(this.currentUser,e,t,n),i=kN(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ls())}},{key:"Fs",value:function(e){var t=kN(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Os",value:function(e){var t={clientId:this.Is,onlineState:e};this.storage.setItem(this.ys,JSON.stringify(t))}},{key:"xs",value:function(e,t,n){var r=bN(this.persistenceKey,e),i=new _N(e,t,n);this.setItem(r,i.ls())}},{key:"Ns",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.ws,t)}},{key:"Bs",value:function(e){var t=this.fs.exec(e);return t?t[1]:null}},{key:"ks",value:function(e,t){var n=this.Bs(e);return xN.cs(n,t)}},{key:"qs",value:function(e,t){var n=this.gs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return wN.cs(new Uw(i),r,t)}},{key:"Ks",value:function(e,t){var n=this.ps.exec(e),r=Number(n[1]);return _N.cs(r,t)}},{key:"bs",value:function(e){return EN.cs(e)}},{key:"Us",value:function(e){return JSON.parse(e)}},{key:"Qs",value:function(){var e=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Gs(t.batchId,t.state,t.error));case 2:qw("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"$s",value:function(e){return this.syncEngine.zs(e.targetId,e.state,e.error)}},{key:"Ls",value:function(e,t){var n=this,r=t?this.ds.insert(e,t):this.ds.remove(e),i=this.vs(this.ds),a=this.vs(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.js(o,u).then((function(){n.ds=r}))}},{key:"Ds",value:function(e){this.ds.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"vs",value:function(e){var t=xS();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"v",value:function(e){return!(!e||!e.localStorage)}}]),e}(),TN=function(){function e(){l(this,e),this.Hs=new SN,this.Js={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return p(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Hs.hs(e),this.Js[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Js[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Hs.Ps(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Hs.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Js[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Hs.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Hs.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Hs=new SN,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),CN=function(){function e(){l(this,e)}return p(e,[{key:"Ys",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),NN=function(){function e(){var t=this;l(this,e),this.Zs=function(){return t.Xs()},this.eo=function(){return t.no()},this.ro=[],this.io()}return p(e,[{key:"Ys",value:function(e){this.ro.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Zs),window.removeEventListener("offline",this.eo)}},{key:"io",value:function(){window.addEventListener("online",this.Zs),window.addEventListener("offline",this.eo)}},{key:"Xs",value:function(){qw("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=T(this.ro);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"no",value:function(){qw("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=T(this.ro);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"v",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),AN=null;function RN(){return null===AN?AN=268435456+Math.round(2147483648*Math.random()):AN++,"0x"+AN.toString(16)}var PN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},DN=function(){function e(t){l(this,e),this.so=t.so,this.oo=t.oo}return p(e,[{key:"_o",value:function(e){this.ao=e}},{key:"uo",value:function(e){this.co=e}},{key:"onMessage",value:function(e){this.lo=e}},{key:"close",value:function(){this.oo()}},{key:"send",value:function(e){this.so(e)}},{key:"ho",value:function(){this.ao()}},{key:"Po",value:function(e){this.co(e)}},{key:"Io",value:function(e){this.lo(e)}}]),e}(),ON="WebChannelConnection",LN=function(e){m(n,e);var t=b(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return p(n,[{key:"fo",value:function(e,t,n,r){var i=RN();return new Promise((function(a,o){var u=new Lw;u.setWithCredentials(!0),u.listenOnce(Aw.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case Nw.NO_ERROR:var t=u.getResponseJson();qw(ON,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Nw.TIMEOUT:qw(ON,"RPC '".concat(e,"' ").concat(i," timed out")),o(new $w(Jw.DEADLINE_EXCEEDED,"Request time out"));break;case Nw.HTTP_ERROR:var n=u.getStatus();if(qw(ON,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Jw).indexOf(t)>=0?t:Jw.UNKNOWN}(s.status);o(new $w(c,s.message))}else o(new $w(Jw.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new $w(Jw.UNAVAILABLE,"Connection failed."));break;default:Gw()}}finally{qw(ON,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);qw(ON,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"yo",value:function(e,t,n){var r=RN(),i=[this.To,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Tw(),o=Cw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(u.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(u.xmlHttpFactory=new Dw({})),this.mo(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var c=i.join("");qw(ON,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),u);var l=a.createWebChannel(c,u),f=!1,h=!1,d=new DN({so:function(t){h?qw(ON,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(qw(ON,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),qw(ON,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},oo:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,Ow.EventType.OPEN,(function(){h||qw(ON,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,Ow.EventType.CLOSE,(function(){h||(h=!0,qw(ON,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.Po())})),p(l,Ow.EventType.ERROR,(function(t){h||(h=!0,Hw(ON,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.Po(new $w(Jw.UNAVAILABLE,"The operation could not be completed")))})),p(l,Ow.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];Qw(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){qw(ON,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=eI[e];if(void 0!==t)return cI(t)}(u),c=o.message;void 0===s&&(s=Jw.INTERNAL,c="Unknown error status: "+u+" with message "+o.message),h=!0,d.Po(new $w(s,c)),l.close()}else qw(ON,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d.Io(i)}})),p(o,Rw.STAT_EVENT,(function(t){t.stat===Pw.PROXY?qw(ON,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Pw.NOPROXY&&qw(ON,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.ho()}),0),d}}]),n}(function(){function e(t){l(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.To=n+"://"+t.host,this.Eo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return p(e,[{key:"Ao",get:function(){return!1}},{key:"Ro",value:function(e,t,n,r,i){var a=RN(),o=this.Vo(e,t);qw("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this.mo(u,r,i),this.fo(e,o,u,n).then((function(t){return qw("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Hw("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"po",value:function(e,t,n,r,i,a){return this.Ro(e,t,n,r,i)}},{key:"mo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Vw,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"Vo",value:function(e,t){var n=PN[e];return"".concat(this.To,"/v1/").concat(t,":").concat(n)}}]),e}());function MN(){return"undefined"!=typeof window?window:null}function FN(){return"undefined"!=typeof document?document:null}function jN(e){return new AI(e,!0)}var UN=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;l(this,e),this.ii=t,this.timerId=n,this.wo=r,this.So=i,this.bo=a,this.Do=0,this.vo=null,this.Co=Date.now(),this.reset()}return p(e,[{key:"reset",value:function(){this.Do=0}},{key:"Fo",value:function(){this.Do=this.bo}},{key:"Mo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Do+this.xo()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&qw("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Do," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.vo=this.ii.enqueueAfterDelay(this.timerId,i,(function(){return t.Co=Date.now(),e()})),this.Do*=this.So,this.Do<this.wo&&(this.Do=this.wo),this.Do>this.bo&&(this.Do=this.bo)}},{key:"Oo",value:function(){null!==this.vo&&(this.vo.skipDelay(),this.vo=null)}},{key:"cancel",value:function(){null!==this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"xo",value:function(){return(Math.random()-.5)*this.Do}}]),e}(),VN=function(){function e(t,n,r,i,a,o,u,s){l(this,e),this.ii=t,this.No=r,this.Bo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Lo=0,this.ko=null,this.qo=null,this.stream=null,this.Qo=new UN(t,n)}return p(e,[{key:"Ko",value:function(){return 1===this.state||5===this.state||this.$o()}},{key:"$o",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Uo()}},{key:"stop",value:function(){var e=fs(_i().mark((function e(){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Ko(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Wo",value:function(){this.state=0,this.Qo.reset()}},{key:"Go",value:function(){var e=this;this.$o()&&null===this.ko&&(this.ko=this.ii.enqueueAfterDelay(this.No,6e4,(function(){return e.zo()})))}},{key:"jo",value:function(e){this.Ho(),this.stream.send(e)}},{key:"zo",value:function(){var e=fs(_i().mark((function e(){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.$o()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){this.ko&&(this.ko.cancel(),this.ko=null)}},{key:"Jo",value:function(){this.qo&&(this.qo.cancel(),this.qo=null)}},{key:"close",value:function(){var e=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ho(),this.Jo(),this.Qo.cancel(),this.Lo++,4!==t?this.Qo.reset():n&&n.code===Jw.RESOURCE_EXHAUSTED?(Kw(n.toString()),Kw("Using maximum backoff delay to prevent overloading the backend."),this.Qo.Fo()):n&&n.code===Jw.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.uo(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Yo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Zo(this.Lo),n=this.Lo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=S(t,2),i=r[0],a=r[1];e.Lo===n&&e.Xo(i,a)}),(function(n){t((function(){var t=new $w(Jw.UNKNOWN,"Fetching auth token failed: "+n.message);return e.e_(t)}))}))}},{key:"Xo",value:function(e,t){var n=this,r=this.Zo(this.Lo);this.stream=this.t_(e,t),this.stream._o((function(){r((function(){return n.state=2,n.qo=n.ii.enqueueAfterDelay(n.Bo,1e4,(function(){return n.$o()&&(n.state=3),Promise.resolve()})),n.listener._o()}))})),this.stream.uo((function(e){r((function(){return n.e_(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Uo",value:function(){var e=this;this.state=5,this.Qo.Mo(fs(_i().mark((function t(){return _i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"e_",value:function(e){return qw("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Zo",value:function(e){var t=this;return function(n){t.ii.enqueueAndForget((function(){return t.Lo===e?n():(qw("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),BN=function(e){m(n,e);var t=b(n);function n(e,r,i,a,o,u){var s;return l(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return p(n,[{key:"t_",value:function(e,t){return this.connection.yo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Qo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Gw()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Qw(void 0===t||"string"==typeof t),Ox.fromBase64String(t||"")):(Qw(void 0===t||t instanceof Uint8Array),Ox.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Jw.UNKNOWN:cI(e.code);return new $w(t,e.message||"")}(o);n=new _I(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=UI(e,s.document.name),l=LI(s.document.updateTime),f=s.document.createTime?LI(s.document.createTime):d_.min(),h=new fE({mapValue:{fields:s.document.fields}}),d=dE.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new bI(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=UI(e,m.document),g=m.readTime?LI(m.readTime):d_.min(),k=dE.newNoDocument(y,g),b=m.removedTargetIds||[];n=new bI([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=UI(e,w.document),x=w.removedTargetIds||[];n=new bI([],x,_,null)}else{if(!("filter"in t))return Gw();t.filter;var E=t.filter;E.targetId;var S=E.count,I=void 0===S?0:S,T=E.unchangedNames,C=new uI(I,T),N=E.targetId;n=new wI(N,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return d_.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?d_.min():t.readTime?LI(t.readTime):d_.min()}(e);return this.listener.n_(t,n)}},{key:"r_",value:function(e){var t={};t.database=zI(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=zE(r)?{documents:YI(e,r)}:{query:JI(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=DI(e,t.resumeToken);var i=RI(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(d_.min())>0){n.readTime=PI(e,t.snapshotVersion.toTimestamp());var a=RI(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Gw()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.jo(t)}},{key:"i_",value:function(e){var t={};t.database=zI(this.serializer),t.removeTarget=e,this.jo(t)}}]),n}(VN),zN=function(e){m(n,e);var t=b(n);function n(e,r,i,a,o,u){var s;return l(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.s_=!1,s}return p(n,[{key:"o_",get:function(){return this.s_}},{key:"start",value:function(){this.s_=!1,this.lastStreamToken=void 0,Hn(y(n.prototype),"start",this).call(this)}},{key:"Yo",value:function(){this.s_&&this.__([])}},{key:"t_",value:function(e,t){return this.connection.yo("Write",e,t)}},{key:"onMessage",value:function(e){if(Qw(!!e.streamToken),this.lastStreamToken=e.streamToken,this.s_){this.Qo.reset();var t=function(e,t){return e&&e.length>0?(Qw(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?LI(e.updateTime):LI(t);return n.isEqual(d_.min())&&(n=LI(t)),new VS(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=LI(e.commitTime);return this.listener.a_(n,t)}return Qw(!e.writeResults||0===e.writeResults.length),this.s_=!0,this.listener.u_()}},{key:"c_",value:function(){var e={};e.database=zI(this.serializer),this.jo(e)}},{key:"__",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return GI(t.serializer,e)}))};this.jo(n)}}]),n}(VN),qN=function(e){m(n,e);var t=b(n);function n(e,r,i,a){var o;return l(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.l_=!1,o}return p(n,[{key:"h_",value:function(){if(this.l_)throw new $w(Jw.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Ro",value:function(e,t,n){var r=this;return this.h_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=S(i,2),o=a[0],u=a[1];return r.connection.Ro(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Jw.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new $w(Jw.UNKNOWN,e.toString())}))}},{key:"po",value:function(e,t,n,r){var i=this;return this.h_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=S(a,2),u=o[0],s=o[1];return i.connection.po(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Jw.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new $w(Jw.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.l_=!0}}]),n}(p((function e(){l(this,e)})));var KN=function(){function e(t,n){l(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.I_=0,this.T_=null,this.E_=!0}return p(e,[{key:"d_",value:function(){var e=this;0===this.I_&&(this.A_("Unknown"),this.T_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.T_=null,e.R_("Backend didn't respond within 10 seconds."),e.A_("Offline"),Promise.resolve()})))}},{key:"V_",value:function(e){"Online"===this.state?this.A_("Unknown"):(this.I_++,this.I_>=1&&(this.m_(),this.R_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.A_("Offline")))}},{key:"set",value:function(e){this.m_(),this.I_=0,"Online"===e&&(this.E_=!1),this.A_(e)}},{key:"A_",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"R_",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.E_?(Kw(t),this.E_=!1):qw("OnlineStateTracker",t)}},{key:"m_",value:function(){null!==this.T_&&(this.T_.cancel(),this.T_=null)}}]),e}(),HN=p((function e(t,n,r,i,a){var o=this;l(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.f_=[],this.g_=new Map,this.p_=new Set,this.y_=[],this.w_=a,this.w_.Ys((function(e){r.enqueueAndForget(fs(_i().mark((function e(){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=nA(o),!e.t0){e.next=5;break}return qw("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=fs(_i().mark((function e(t){var n;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Yw(t)).p_.add(4),e.next=4,QN(n);case 4:return n.S_.set("Unknown"),n.p_.delete(4),e.next=8,WN(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.S_=new KN(r,i)}));function WN(e){return GN.apply(this,arguments)}function GN(){return(GN=fs(_i().mark((function e(t){var n,r,i;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!nA(t)){e.next=18;break}n=T(t.y_),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function QN(e){return YN.apply(this,arguments)}function YN(){return(YN=fs(_i().mark((function e(t){var n,r,i;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=T(t.y_),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function JN(e,t){var n=Yw(e);n.g_.has(t.targetId)||(n.g_.set(t.targetId,t),tA(n)?eA(n):RA(n).$o()&&XN(n,t))}function $N(e,t){var n=Yw(e),r=RA(n);n.g_.delete(t),r.$o()&&ZN(n,t),0===n.g_.size&&(r.$o()?r.Go():nA(n)&&n.S_.set("Unknown"))}function XN(e,t){if(e.b_.Be(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(d_.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}RA(e).r_(t)}function ZN(e,t){e.b_.Be(t),RA(e).i_(t)}function eA(e){e.b_=new EI({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ut:function(t){return e.g_.get(t)||null},rt:function(){return e.datastore.serializer.databaseId}}),RA(e).start(),e.S_.d_()}function tA(e){return nA(e)&&!RA(e).Ko()&&e.g_.size>0}function nA(e){return 0===Yw(e).p_.size}function rA(e){e.b_=void 0}function iA(e){return aA.apply(this,arguments)}function aA(){return(aA=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.g_.forEach((function(e,n){XN(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oA(e,t){return uA.apply(this,arguments)}function uA(){return(uA=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:rA(t),tA(t)?(t.S_.V_(n),eA(t)):t.S_.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sA(e,t,n){return cA.apply(this,arguments)}function cA(){return cA=fs(_i().mark((function e(t,n,r){var i;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.S_.set("Online"),!(n instanceof _I&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=fs(_i().mark((function e(t,n){var r,i,a,o;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=T(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.g_.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.g_.delete(o),t.b_.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),qw("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,lA(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof bI?t.b_.We(n):n instanceof wI?t.b_.Ze(n):t.b_.je(n),r.isEqual(d_.min())){e.next=29;break}return e.prev=14,e.next=17,rN(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.b_.st(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.g_.get(r);i&&e.g_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.g_.get(t);if(r){e.g_.set(t,r.withResumeToken(Ox.EMPTY_BYTE_STRING,r.snapshotVersion)),ZN(e,t);var i=new uT(r.target,t,n,r.sequenceNumber);XN(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),qw("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,lA(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),cA.apply(this,arguments)}function lA(e,t,n){return fA.apply(this,arguments)}function fA(){return(fA=fs(_i().mark((function e(t,n,r){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F_(n)){e.next=2;break}throw n;case 2:return t.p_.add(1),e.next=5,QN(t);case 5:t.S_.set("Offline"),r||(r=function(){return rN(t.localStore)}),t.asyncQueue.enqueueRetryable(fs(_i().mark((function e(){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qw("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.p_.delete(1),e.next=6,WN(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hA(e,t){return t().catch((function(n){return lA(e,n,t)}))}function dA(e){return pA.apply(this,arguments)}function pA(){return pA=fs(_i().mark((function e(t){var n,r,i,a;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Yw(t),r=PA(n),i=n.f_.length>0?n.f_[n.f_.length-1].batchId:-1;case 2:if(!vA(n)){e.next=19;break}return e.prev=3,e.next=6,oN(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.f_.length&&r.Go(),e.abrupt("break",19);case 10:i=a.batchId,mA(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,lA(n,e.t0);case 17:e.next=2;break;case 19:yA(n)&&gA(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),pA.apply(this,arguments)}function vA(e){return nA(e)&&e.f_.length<10}function mA(e,t){e.f_.push(t);var n=PA(e);n.$o()&&n.o_&&n.__(t.mutations)}function yA(e){return nA(e)&&!PA(e).Ko()&&e.f_.length>0}function gA(e){PA(e).start()}function kA(e){return bA.apply(this,arguments)}function bA(){return(bA=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:PA(t).c_();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wA(e){return _A.apply(this,arguments)}function _A(){return(_A=fs(_i().mark((function e(t){var n,r,i,a;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=PA(t),r=T(t.f_);try{for(r.s();!(i=r.n()).done;)a=i.value,n.__(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xA(e,t,n){return EA.apply(this,arguments)}function EA(){return EA=fs(_i().mark((function e(t,n,r){var i,a;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.f_.shift(),a=aI.from(i,n,r),e.next=3,hA(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,dA(t);case 5:case"end":return e.stop()}}),e)}))),EA.apply(this,arguments)}function SA(e,t){return IA.apply(this,arguments)}function IA(){return IA=fs(_i().mark((function e(t,n){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&PA(t).o_,!e.t0){e.next=4;break}return e.next=4,function(){var e=fs(_i().mark((function e(t,n){var r;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!function(e){return sI(e)&&e!==Jw.ABORTED}(n.code)){e.next=7;break}return r=t.f_.shift(),PA(t).Wo(),e.next=5,hA(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,dA(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:yA(t)&&gA(t);case 5:case"end":return e.stop()}}),e)}))),IA.apply(this,arguments)}function TA(e,t){return CA.apply(this,arguments)}function CA(){return CA=fs(_i().mark((function e(t,n){var r,i;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Yw(t)).asyncQueue.verifyOperationInProgress(),qw("RemoteStore","RemoteStore received new credentials"),i=nA(r),r.p_.add(3),e.next=6,QN(r);case 6:return i&&r.S_.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.p_.delete(3),e.next=12,WN(r);case 12:case"end":return e.stop()}}),e)}))),CA.apply(this,arguments)}function NA(e,t){return AA.apply(this,arguments)}function AA(){return(AA=fs(_i().mark((function e(t,n){var r;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Yw(t),!n){e.next=7;break}return r.p_.delete(2),e.next=5,WN(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.p_.add(2),e.next=12,QN(r);case 12:r.S_.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function RA(e){return e.D_||(e.D_=function(e,t,n){var r=Yw(e);return r.h_(),new BN(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{_o:iA.bind(null,e),uo:oA.bind(null,e),n_:sA.bind(null,e)}),e.y_.push(function(){var t=fs(_i().mark((function t(n){return _i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.D_.Wo(),tA(e)?eA(e):e.S_.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.D_.stop();case 6:rA(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.D_}function PA(e){return e.v_||(e.v_=function(e,t,n){var r=Yw(e);return r.h_(),new zN(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{_o:kA.bind(null,e),uo:SA.bind(null,e),u_:wA.bind(null,e),a_:xA.bind(null,e)}),e.y_.push(function(){var t=fs(_i().mark((function t(n){return _i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.v_.Wo(),t.next=4,dA(e);case 4:t.next=9;break;case 6:return t.next=8,e.v_.stop();case 8:e.f_.length>0&&(qw("RemoteStore","Stopping write stream with ".concat(e.f_.length," pending writes")),e.f_=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.v_}var DA=function(){function e(t,n,r,i,a){l(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Xw,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return p(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new $w(Jw.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function OA(e,t){if(Kw("AsyncQueue","".concat(t,": ").concat(e)),F_(e))return new $w(Jw.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var LA=function(){function e(t){l(this,e),this.comparator=t?function(e,n){return t(e,n)||g_.comparator(e.key,n.key)}:function(e,t){return g_.comparator(e.key,t.key)},this.keyedMap=pS(),this.sortedSet=new Ix(this.comparator)}return p(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),MA=function(){function e(){l(this,e),this.C_=new Ix(g_.comparator)}return p(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.C_.get(t);n?0!==e.type&&3===n.type?this.C_=this.C_.insert(t,e):3===e.type&&1!==n.type?this.C_=this.C_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.C_=this.C_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.C_=this.C_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.C_=this.C_.remove(t):1===e.type&&2===n.type?this.C_=this.C_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.C_=this.C_.insert(t,{type:2,doc:e.doc}):Gw():this.C_=this.C_.insert(t,e)}},{key:"F_",value:function(){var e=[];return this.C_.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),FA=function(){function e(t,n,r,i,a,o,u,s,c){l(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return p(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rS(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,LA.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),jA=p((function e(){l(this,e),this.M_=void 0,this.listeners=[]})),UA=p((function e(){l(this,e),this.queries=new lS((function(e){return iS(e)}),rS),this.onlineState="Unknown",this.x_=new Set}));function VA(e,t){return BA.apply(this,arguments)}function BA(){return BA=fs(_i().mark((function e(t,n){var r,i,a,o,u;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Yw(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new jA),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.M_=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=OA(e.t0,"Initialization of query '".concat(aS(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.O_(r.onlineState),o.M_&&n.N_(o.M_)&&WA(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),BA.apply(this,arguments)}function zA(e,t){return qA.apply(this,arguments)}function qA(){return qA=fs(_i().mark((function e(t,n){var r,i,a,o,u;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Yw(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),qA.apply(this,arguments)}function KA(e,t){var n,r=Yw(e),i=!1,a=T(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=T(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.N_(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.M_=o}}}catch(f){a.e(f)}finally{a.f()}i&&WA(r)}function HA(e,t,n){var r=Yw(e),i=r.queries.get(t);if(i){var a,o=T(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function WA(e){e.x_.forEach((function(e){e.next()}))}var GA=function(){function e(t,n,r){l(this,e),this.query=t,this.B_=n,this.L_=!1,this.k_=null,this.onlineState="Unknown",this.options=r||{}}return p(e,[{key:"N_",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=T(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new FA(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.L_?this.q_(e)&&(this.B_.next(e),a=!0):this.Q_(e,this.onlineState)&&(this.K_(e),a=!0),this.k_=e,a}},{key:"onError",value:function(e){this.B_.error(e)}},{key:"O_",value:function(e){this.onlineState=e;var t=!1;return this.k_&&!this.L_&&this.Q_(this.k_,e)&&(this.K_(this.k_),t=!0),t}},{key:"Q_",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.U_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"q_",value:function(e){if(e.docChanges.length>0)return!0;var t=this.k_&&this.k_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"K_",value:function(e){e=FA.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.L_=!0,this.B_.next(e)}}]),e}(),QA=function(){function e(t,n){l(this,e),this.W_=t,this.byteLength=n}return p(e,[{key:"G_",value:function(){return"metadata"in this.W_}}]),e}(),YA=function(){function e(t){l(this,e),this.serializer=t}return p(e,[{key:"os",value:function(e){return UI(this.serializer,e)}},{key:"_s",value:function(e){return e.metadata.exists?HI(this.serializer,e.document,!1):dE.newNoDocument(this.os(e.metadata.name),this.us(e.metadata.readTime))}},{key:"us",value:function(e){return LI(e)}}]),e}(),JA=function(){function e(t,n,r){l(this,e),this.z_=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=$A(t)}return p(e,[{key:"j_",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.W_.namedQuery)this.queries.push(e.W_.namedQuery);else if(e.W_.documentMetadata){this.documents.push({metadata:e.W_.documentMetadata}),e.W_.documentMetadata.exists||++t;var n=v_.fromString(e.W_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.W_.document&&(this.documents[this.documents.length-1].document=e.W_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"H_",value:function(e){var t,n=new Map,r=new YA(this.serializer),i=T(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.os(a.metadata.name),s=T(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||wS()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=fs(_i().mark((function e(){var t,n,r,i,a;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pN(this.localStore,new YA(this.serializer),this.documents,this.z_.id);case 2:t=e.sent,n=this.H_(this.documents),r=T(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,mN(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,J_:this.collectionGroups,Y_:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function $A(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var XA=p((function e(t){l(this,e),this.key=t})),ZA=p((function e(t){l(this,e),this.key=t})),eR=function(){function e(t,n){l(this,e),this.query=t,this.Z_=n,this.X_=null,this.hasCachedResults=!1,this.current=!1,this.ea=wS(),this.mutatedKeys=wS(),this.ta=sS(t),this.na=new LA(this.ta)}return p(e,[{key:"ra",get:function(){return this.Z_}},{key:"ia",value:function(e,t){var n=this,r=t?t.sa:new MA,i=t?t.na:this.na,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=oS(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.oa(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.ta(f,s)>0||c&&n.ta(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{na:o,sa:r,zi:u,mutatedKeys:a}}},{key:"oa",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.na;this.na=e.na,this.mutatedKeys=e.mutatedKeys;var a=e.sa.F_();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Gw()}};return n(e)-n(t)}(e.type,t.type)||r.ta(e.doc,t.doc)})),this._a(n);var o=t?this.aa():[],u=0===this.ea.size&&this.current?1:0,s=u!==this.X_;return this.X_=u,0!==a.length||s?{snapshot:new FA(this.query,e.na,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),ua:o}:{ua:o}}},{key:"O_",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({na:this.na,sa:new MA,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{ua:[]}}},{key:"ca",value:function(e){return!this.Z_.has(e)&&!!this.na.has(e)&&!this.na.get(e).hasLocalMutations}},{key:"_a",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Z_=t.Z_.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Z_=t.Z_.delete(e)})),this.current=e.current)}},{key:"aa",value:function(){var e=this;if(!this.current)return[];var t=this.ea;this.ea=wS(),this.na.forEach((function(t){e.ca(t.key)&&(e.ea=e.ea.add(t.key))}));var n=[];return t.forEach((function(t){e.ea.has(t)||n.push(new ZA(t))})),this.ea.forEach((function(e){t.has(e)||n.push(new XA(e))})),n}},{key:"la",value:function(e){this.Z_=e.ss,this.ea=wS();var t=this.ia(e.documents);return this.applyChanges(t,!0)}},{key:"ha",value:function(){return FA.fromInitialDocuments(this.query,this.na,this.mutatedKeys,0===this.X_,this.hasCachedResults)}}]),e}(),tR=p((function e(t,n,r){l(this,e),this.query=t,this.targetId=n,this.view=r})),nR=p((function e(t){l(this,e),this.key=t,this.Pa=!1})),rR=function(){function e(t,n,r,i,a,o){l(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ia={},this.Ta=new lS((function(e){return iS(e)}),rS),this.Ea=new Map,this.da=new Set,this.Aa=new Ix(g_.comparator),this.Ra=new Map,this.Va=new OC,this.ma={},this.fa=new Map,this.ga=cC.On(),this.onlineState="Unknown",this.pa=void 0}return p(e,[{key:"isPrimaryClient",get:function(){return!0===this.pa}}]),e}();function iR(e,t){return aR.apply(this,arguments)}function aR(){return aR=fs(_i().mark((function e(t,n){var r,i,a,o,u,s;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=$R(t),!(o=r.Ta.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ha(),e.next=15;break;case 6:return e.next=8,uN(r.localStore,eS(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,oR(r,n,i,"current"===s,u.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&JN(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),aR.apply(this,arguments)}function oR(e,t,n,r,i){return uR.apply(this,arguments)}function uR(){return uR=fs(_i().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.ya=function(e,n,r){return function(){var e=fs(_i().mark((function e(t,n,r,i){var a,o,u;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.ia(r),e.t0=a.zi,!e.t0){e.next=6;break}return e.next=5,lN(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.ia(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(TR(t,n.targetId,u.ua),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,lN(t.localStore,n,!0);case 3:return o=e.sent,u=new eR(n,o.ss),s=u.ia(o.documents),c=kI.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),TR(t,r,l.ua),f=new tR(n,r,u),e.abrupt("return",(t.Ta.set(n,f),t.Ea.has(r)?t.Ea.get(r).push(n):t.Ea.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),uR.apply(this,arguments)}function sR(e,t){return cR.apply(this,arguments)}function cR(){return cR=fs(_i().mark((function e(t,n){var r,i,a;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Yw(t),i=r.Ta.get(n),!((a=r.Ea.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.Ea.set(i.targetId,a.filter((function(e){return!rS(e,n)}))),void r.Ta.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,sN(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),$N(r.remoteStore,i.targetId),SR(r,i.targetId)})).catch(A_);case 9:e.next=14;break;case 11:return SR(r,i.targetId),e.next=14,sN(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),cR.apply(this,arguments)}function lR(e,t,n){return fR.apply(this,arguments)}function fR(){return fR=fs(_i().mark((function e(t,n,r){var i,a,o;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=XR(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Yw(e),a=h_.now(),o=t.reduce((function(e,t){return e.add(t.key)}),wS());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=hS(),s=wS();return i.Xi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=T(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=GS(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new JS(c.key,l,hE(l.value.mapValue),BS.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:vS(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ma[e.currentUser.toKey()];r||(r=new Ix(c_)),r=r.insert(t,n),e.ma[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,AR(i,a.changes);case 9:return e.next=11,dA(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=OA(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),fR.apply(this,arguments)}function hR(e,t){return dR.apply(this,arguments)}function dR(){return dR=fs(_i().mark((function e(t,n){var r,i;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yw(t),e.prev=1,e.next=4,iN(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Ra.get(t);n&&(Qw(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Pa=!0:e.modifiedDocuments.size>0?Qw(n.Pa):e.removedDocuments.size>0&&(Qw(n.Pa),n.Pa=!1))})),e.next=8,AR(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,A_(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),dR.apply(this,arguments)}function pR(e,t,n){var r=Yw(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Ta.forEach((function(e,n){var r=n.view.O_(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Yw(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=T(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.O_(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&WA(n)}(r.eventManager,t),i.length&&r.Ia.n_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function vR(e,t,n){return mR.apply(this,arguments)}function mR(){return mR=fs(_i().mark((function e(t,n,r){var i,a,o,u,s,c;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Yw(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Ra.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Ix(g_.comparator)).insert(o,dE.newNoDocument(o,d_.min())),s=wS().add(o),c=new gI(d_.min(),new Map,new Ix(c_),u,s),e.next=9,hR(i,c);case 9:i.Aa=i.Aa.remove(o),i.Ra.delete(n),NR(i),e.next=16;break;case 14:return e.next=16,sN(i.localStore,n,!1).then((function(){return SR(i,n,r)})).catch(A_);case 16:case"end":return e.stop()}}),e)}))),mR.apply(this,arguments)}function yR(e,t){return gR.apply(this,arguments)}function gR(){return gR=fs(_i().mark((function e(t,n){var r,i,a;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yw(t),i=n.batch.batchId,e.prev=1,e.next=4,nN(r.localStore,n);case 4:return a=e.sent,ER(r,i,null),xR(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,AR(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,A_(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),gR.apply(this,arguments)}function kR(e,t,n){return bR.apply(this,arguments)}function bR(){return bR=fs(_i().mark((function e(t,n,r){var i,a;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Yw(t),e.prev=1,e.next=4,function(e,t){var n=Yw(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Qw(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,ER(i,n,r),xR(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,AR(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,A_(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),bR.apply(this,arguments)}function wR(e,t){return _R.apply(this,arguments)}function _R(){return _R=fs(_i().mark((function e(t,n){var r,i,a,o;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nA((r=Yw(t)).remoteStore)||qw("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Yw(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.fa.get(i)||[]).push(n),r.fa.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=OA(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),_R.apply(this,arguments)}function xR(e,t){(e.fa.get(t)||[]).forEach((function(e){e.resolve()})),e.fa.delete(t)}function ER(e,t,n){var r=Yw(e),i=r.ma[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ma[r.currentUser.toKey()]=i}}function SR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=T(e.Ea.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.Ta.delete(a),n&&e.Ia.wa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.Ea.delete(t),e.isPrimaryClient&&e.Va.Ar(t).forEach((function(t){e.Va.containsKey(t)||IR(e,t)}))}function IR(e,t){e.da.delete(t.path.canonicalString());var n=e.Aa.get(t);null!==n&&($N(e.remoteStore,n),e.Aa=e.Aa.remove(t),e.Ra.delete(n),NR(e))}function TR(e,t,n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof XA?(e.Va.addReference(a.key,t),CR(e,a)):a instanceof ZA?(qw("SyncEngine","Document no longer in limbo: "+a.key),e.Va.removeReference(a.key,t),e.Va.containsKey(a.key)||IR(e,a.key)):Gw()}}catch(o){i.e(o)}finally{i.f()}}function CR(e,t){var n=t.key,r=n.path.canonicalString();e.Aa.get(n)||e.da.has(r)||(qw("SyncEngine","New document in limbo: "+n),e.da.add(r),NR(e))}function NR(e){for(;e.da.size>0&&e.Aa.size<e.maxConcurrentLimboResolutions;){var t=e.da.values().next().value;e.da.delete(t);var n=new g_(v_.fromString(t)),r=e.ga.next();e.Ra.set(r,new nR(n)),e.Aa=e.Aa.insert(n,r),JN(e.remoteStore,new uT(eS(QE(n.path)),r,"TargetPurposeLimboResolution",K_.ae))}}function AR(e,t,n){return RR.apply(this,arguments)}function RR(){return RR=fs(_i().mark((function e(t,n,r){var i,a,o,u;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Yw(t),a=[],o=[],u=[],e.t0=i.Ta.isEmpty(),e.t0){e.next=9;break}return i.Ta.forEach((function(e,t){u.push(i.ya(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=JC.qi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Ia.n_(a),e.next=9,function(){var e=fs(_i().mark((function e(t,n){var r,i,a,o,u,s,c,l;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yw(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return P_.forEach(n,(function(t){return P_.forEach(t.Li,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return P_.forEach(t.ki,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),F_(e.t0)){e.next=10;break}throw e.t0;case 10:qw("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=T(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ji.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ji=r.Ji.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),RR.apply(this,arguments)}function PR(e,t){return DR.apply(this,arguments)}function DR(){return(DR=fs(_i().mark((function e(t,n){var r,i;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Yw(t)).currentUser.isEqual(n)){e.next=11;break}return qw("SyncEngine","User change. New user:",n.toKey()),e.next=5,eN(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.fa.forEach((function(e){e.forEach((function(e){e.reject(new $w(Jw.CANCELLED,t))}))})),e.fa.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,AR(r,i.ts);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function OR(e,t){var n=Yw(e),r=n.Ra.get(t);if(r&&r.Pa)return wS().add(r.key);var i=wS(),a=n.Ea.get(t);if(!a)return i;var o,u=T(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.Ta.get(s);i=i.unionWith(c.view.ra)}}catch(l){u.e(l)}finally{u.f()}return i}function LR(e,t){return MR.apply(this,arguments)}function MR(){return MR=fs(_i().mark((function e(t,n){var r,i,a;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yw(t),e.next=3,lN(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.la(i),e.abrupt("return",(r.isPrimaryClient&&TR(r,n.targetId,a.ua),a));case 6:case"end":return e.stop()}}),e)}))),MR.apply(this,arguments)}function FR(e,t){return jR.apply(this,arguments)}function jR(){return(jR=fs(_i().mark((function e(t,n){var r;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yw(t),e.abrupt("return",hN(r.localStore,n).then((function(e){return AR(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function UR(e,t,n,r){return VR.apply(this,arguments)}function VR(){return VR=fs(_i().mark((function e(t,n,r,i){var a,o;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Yw(t),e.next=3,function(e,t){var n=Yw(e),r=Yw(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Dn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):P_.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,dA(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(ER(a,n,i||null),xR(a,n),function(e,t){Yw(Yw(e).mutationQueue).Cn(t)}(a.localStore,n)):Gw();case 11:return e.next=13,AR(a,o);case 13:e.next=16;break;case 15:qw("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),VR.apply(this,arguments)}function BR(e,t){return zR.apply(this,arguments)}function zR(){return(zR=fs(_i().mark((function e(t,n){var r,i,a,o,u,s,c,l;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($R(r=Yw(t)),XR(r),!0!==n||!0===r.pa){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,qR(r,i.toArray());case 5:return a=e.sent,r.pa=!0,e.next=9,NA(r.remoteStore,!0);case 9:o=T(a);try{for(o.s();!(u=o.n()).done;)s=u.value,JN(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.pa){e.next=25;break}return c=[],l=Promise.resolve(),r.Ea.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return SR(r,t),sN(r.localStore,t,!0)})),$N(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,qR(r,c);case 21:return function(e){var t=Yw(e);t.Ra.forEach((function(e,n){$N(t.remoteStore,n)})),t.Va.Rr(),t.Ra=new Map,t.Aa=new Ix(g_.comparator)}(r),r.pa=!1,e.next=25,NA(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qR(e,t,n){return KR.apply(this,arguments)}function KR(){return KR=fs(_i().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Yw(t),a=[],o=[],u=T(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.Ea.get(c))||0===f.length){e.next=34;break}return e.next=11,uN(i.localStore,eS(f[0]));case 11:l=e.sent,h=T(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.Ta.get(p),e.next=20,LR(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,fN(i.localStore,c);case 36:return y=e.sent,e.next=39,uN(i.localStore,y);case 39:return l=e.sent,e.next=42,oR(i,HR(y),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Ia.n_(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),KR.apply(this,arguments)}function HR(e){return GE(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function WR(e){return function(e){return Yw(Yw(e).persistence).Ni()}(Yw(e).localStore)}function GR(e,t,n,r){return QR.apply(this,arguments)}function QR(){return QR=fs(_i().mark((function e(t,n,r,i){var a,o,u,s;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Yw(t)).pa){e.next=3;break}return e.abrupt("return",void qw("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.Ea.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,hN(a.localStore,uS(o[0]));case 10:return u=e.sent,s=gI.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Ox.EMPTY_BYTE_STRING),e.next=14,AR(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,sN(a.localStore,n,!0);case 17:return SR(a,n,i),e.abrupt("break",20);case 19:Gw();case 20:case"end":return e.stop()}}),e)}))),QR.apply(this,arguments)}function YR(e,t,n){return JR.apply(this,arguments)}function JR(){return JR=fs(_i().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=$R(t)).pa){e.next=45;break}a=T(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.Ea.has(u)){e.next=10;break}return qw("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,fN(i.localStore,u);case 12:return s=e.sent,e.next=15,uN(i.localStore,s);case 15:return c=e.sent,e.next=18,oR(i,HR(s),c.targetId,!1,c.resumeToken);case 18:JN(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=T(r),e.prev=30,h=_i().mark((function e(){var t;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.Ea.has(t),!e.t0){e.next=5;break}return e.next=5,sN(i.localStore,t,!1).then((function(){$N(i.remoteStore,t),SR(i,t)})).catch(A_);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),JR.apply(this,arguments)}function $R(e){var t=Yw(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=hR.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=OR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=vR.bind(null,t),t.Ia.n_=KA.bind(null,t.eventManager),t.Ia.wa=HA.bind(null,t.eventManager),t}function XR(e){var t=Yw(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=yR.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=kR.bind(null,t),t}function ZR(e,t,n){var r=Yw(e);(function(){var e=fs(_i().mark((function e(t,n,r){var i,a,o,u,s;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Yw(e),r=LI(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Qr.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress($A(i)),a=new JA(i,t.localStore,n.serializer),e.next=15,n.Sa();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.j_(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.Sa();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,AR(t,s.Y_,void 0);case 31:return e.next=33,function(e,t){var n=Yw(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Qr.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.J_));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Hw("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var eP=function(){function e(){l(this,e),this.synchronizeTabs=!1}return p(e,[{key:"initialize",value:function(){var e=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=jN(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return ZC(this.persistence,new $C,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new VC(zC.zr,this.serializer)}},{key:"createSharedClientState",value:function(e){return new TN}},{key:"terminate",value:function(){var e=fs(_i().mark((function e(){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),tP=function(e){m(n,e);var t=b(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).ba=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return p(n,[{key:"initialize",value:function(){var e=fs(_i().mark((function e(t){var r=this;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hn(y(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.ba.initialize(this,t);case 4:return e.next=6,XR(this.ba.syncEngine);case 6:return e.next=8,dA(this.ba.remoteStore);case 8:return e.next=10,this.persistence.Vi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return ZC(this.persistence,new $C,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new mC(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new q_(t,this.persistence);return new z_(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=YC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?tC.withCacheSize(this.cacheSizeBytes):tC.DEFAULT;return new WC(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,MN(),FN(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new TN}}]),n}(eP),nP=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r,!1)).ba=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return p(n,[{key:"initialize",value:function(){var e=fs(_i().mark((function e(t){var r,i=this;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hn(y(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.ba.syncEngine,e.t0=this.sharedClientState instanceof IN,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Gs:UR.bind(null,r),zs:GR.bind(null,r),js:YR.bind(null,r),Ni:WR.bind(null,r),Ws:FR.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Vi(function(){var e=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,BR(i.ba.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=MN();if(!IN.v(t))throw new $w(Jw.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=YC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new IN(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(tP),rP=function(){function e(){l(this,e)}return p(e,[{key:"initialize",value:function(){var e=fs(_i().mark((function e(t,n){var r=this;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return pR(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=PR.bind(null,this.syncEngine),e.next=12,NA(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new UA}},{key:"createDatastore",value:function(e){var t=jN(e.databaseInfo.databaseId),n=function(e){return new LN(e)}(e.databaseInfo);return function(e,t,n,r){return new qN(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}},{key:"createRemoteStore",value:function(e){var t=this;return function(e,t,n,r,i){return new HN(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(function(e){return pR(t.syncEngine,e,0)}),NN.v()?new NN:new CN)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new rR(e,t,n,r,i,a);return o&&(u.pa=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=fs(_i().mark((function e(t){var n;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Yw(t),qw("RemoteStore","RemoteStore shutting down."),n.p_.add(5),e.next=5,QN(n);case 5:n.w_.shutdown(),n.S_.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function iP(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return fs(_i().mark((function r(){var i;return _i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return fs(_i().mark((function e(){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var aP=function(){function e(t){l(this,e),this.observer=t,this.muted=!1}return p(e,[{key:"next",value:function(e){this.observer.next&&this.Da(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Da(this.observer.error,e):Kw("Uncaught Error in snapshot listener:",e.toString())}},{key:"va",value:function(){this.muted=!0}},{key:"Da",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),oP=function(){function e(t,n){var r=this;l(this,e),this.Ca=t,this.serializer=n,this.metadata=new Xw,this.buffer=new Uint8Array,this.Fa=new TextDecoder("utf-8"),this.Ma().then((function(e){e&&e.G_()?r.metadata.resolve(e.W_.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.W_))))}),(function(e){return r.metadata.reject(e)}))}return p(e,[{key:"close",value:function(){return this.Ca.cancel()}},{key:"getMetadata",value:function(){var e=fs(_i().mark((function e(){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Sa",value:function(){var e=fs(_i().mark((function e(){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Ma());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ma",value:function(){var e=fs(_i().mark((function e(){var t,n,r,i;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.xa();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Fa.decode(t),r=Number(n),isNaN(r)&&this.Oa("length string (".concat(n,") is not valid number")),e.next=9,this.Na(r);case 9:return i=e.sent,e.abrupt("return",new QA(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ba",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"xa",value:function(){var e=fs(_i().mark((function e(){var t,n;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Ba()<0)){e.next=7;break}return e.next=3,this.La();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Ba())<0&&this.Oa("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Na",value:function(){var e=fs(_i().mark((function e(t){var n;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.La();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Oa("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Fa.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Oa",value:function(e){throw this.Ca.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"La",value:function(){var e=fs(_i().mark((function e(){var t,n;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ca.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),uP=function(){function e(t){l(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return p(e,[{key:"lookup",value:function(){var e=fs(_i().mark((function e(t){var n,r=this;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new $w(Jw.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=fs(_i().mark((function e(t,n){var r,i,a,o,u,s;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yw(t),i=zI(r.serializer)+"/documents",a={documents:n.map((function(e){return jI(r.serializer,e)}))},e.next=5,r.po("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=WI(r.serializer,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Qw(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new nI(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=fs(_i().mark((function e(){var t,n=this;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=g_.fromPath(t);n.mutations.push(new rI(r,n.precondition(r)))})),e.next=7,function(){var e=fs(_i().mark((function e(t,n){var r,i,a;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yw(t),i=zI(r.serializer)+"/documents",a={writes:n.map((function(e){return GI(r.serializer,e)}))},e.next=3,r.Ro("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Gw();t=d_.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new $w(Jw.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(d_.min())?BS.exists(!1):BS.updateTime(t):BS.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(d_.min()))throw new $w(Jw.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return BS.updateTime(t)}return BS.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),sP=function(){function e(t,n,r,i,a){l(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.ka=r.maxAttempts,this.Qo=new UN(this.asyncQueue,"transaction_retry")}return p(e,[{key:"run",value:function(){this.ka-=1,this.qa()}},{key:"qa",value:function(){var e=this;this.Qo.Mo(fs(_i().mark((function t(){var n,r;return _i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new uP(e.datastore),(r=e.Qa(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ka(t)}))}))})).catch((function(t){e.Ka(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Qa",value:function(e){try{var t=this.updateFunction(e);return!H_(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ka",value:function(e){var t=this;this.ka>0&&this.$a(e)?(this.ka-=1,this.asyncQueue.enqueueAndForget((function(){return t.qa(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"$a",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!sI(t)}return!1}}]),e}(),cP=function(){function e(t,n,r,i){var a=this;l(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Uw.UNAUTHENTICATED,this.clientId=s_.V(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qw("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return qw("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return p(e,[{key:"getConfiguration",value:function(){var e=fs(_i().mark((function e(){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new $w(Jw.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Xw;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(fs(_i().mark((function n(){var r;return _i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=OA(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function lP(e,t){return fP.apply(this,arguments)}function fP(){return fP=fs(_i().mark((function e(t,n){var r,i;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),qw("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,eN(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),fP.apply(this,arguments)}function hP(e,t){return dP.apply(this,arguments)}function dP(){return dP=fs(_i().mark((function e(t,n){var r,i;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,vP(t);case 3:return r=e.sent,qw("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return TA(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return TA(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),dP.apply(this,arguments)}function pP(e){return"FirebaseError"===e.name?e.code===Jw.FAILED_PRECONDITION||e.code===Jw.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function vP(e){return mP.apply(this,arguments)}function mP(){return(mP=fs(_i().mark((function e(t){var n;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return qw("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,lP(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),pP(n=e.t0)){e.next=13;break}throw n;case 13:return Hw("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,lP(t,new eP);case 16:e.next=21;break;case 18:return qw("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,lP(t,new eP);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function yP(e){return gP.apply(this,arguments)}function gP(){return(gP=fs(_i().mark((function e(t){return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return qw("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,hP(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return qw("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,hP(t,new rP);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kP(e){return vP(e).then((function(e){return e.persistence}))}function bP(e){return vP(e).then((function(e){return e.localStore}))}function wP(e){return yP(e).then((function(e){return e.remoteStore}))}function _P(e){return yP(e).then((function(e){return e.syncEngine}))}function xP(e){return yP(e).then((function(e){return e.datastore}))}function EP(e){return SP.apply(this,arguments)}function SP(){return(SP=fs(_i().mark((function e(t){var n,r;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yP(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=iR.bind(null,n.syncEngine),r.onUnlisten=sR.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function IP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Xw;return e.asyncQueue.enqueueAndForget(fs(_i().mark((function i(){return _i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new aP({next:function(a){t.enqueueAndForget((function(){return zA(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new $w(Jw.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new $w(Jw.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new GA(QE(n.path),a,{includeMetadataChanges:!0,U_:!0});return VA(e,o)},i.next=3,EP(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function TP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Xw;return e.asyncQueue.enqueueAndForget(fs(_i().mark((function i(){return _i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new aP({next:function(n){t.enqueueAndForget((function(){return zA(e,o)})),n.fromCache&&"server"===r.source?i.reject(new $w(Jw.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new GA(n,a,{includeMetadataChanges:!0,U_:!0});return VA(e,o)},i.next=3,EP(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function CP(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var NP=new Map;function AP(e,t,n){if(!n)throw new $w(Jw.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function RP(e,t,n,r){if(!0===t&&!0===r)throw new $w(Jw.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function PP(e){if(!g_.isDocumentKey(e))throw new $w(Jw.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function DP(e){if(g_.isDocumentKey(e))throw new $w(Jw.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function OP(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Gw()}function LP(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new $w(Jw.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=OP(e);throw new $w(Jw.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function MP(e,t){if(t<=0)throw new $w(Jw.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var FP=function(){function e(t){var n,r;if(l(this,e),void 0===t.host){if(void 0!==t.ssl)throw new $w(Jw.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new $w(Jw.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}RP("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CP(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new $w(Jw.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new $w(Jw.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new $w(Jw.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return p(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),jP=function(){function e(t,n,r,i){l(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FP({}),this._settingsFrozen=!1}return p(e,[{key:"app",get:function(){if(!this._app)throw new $w(Jw.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new $w(Jw.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FP(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new e_;switch(e.type){case"firstParty":return new i_(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new $w(Jw.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=NP.get(e);t&&(qw("ComponentProvider","Removing Datastore"),NP.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function UP(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=LP(e,jP))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&Hw("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var u,s;if("string"==typeof i.mockUserToken)u=i.mockUserToken,s=Uw.MOCK_USER;else{u=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Fu(JSON.stringify({alg:"none",type:"JWT"})),Fu(JSON.stringify(a)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new $w(Jw.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new Uw(c)}e._authCredentials=new t_(new Zw(u,s))}}var VP=function(){function e(t,n,r){l(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return p(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),BP=function(){function e(t,n,r){l(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return p(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new zP(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),zP=function(e){m(n,e);var t=b(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this,e,r,QE(i)))._path=i,a.type="collection",a}return p(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new BP(this.firestore,null,new g_(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(VP);function qP(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=cs(e),AP("collection","path",t),e instanceof jP){var a=v_.fromString.apply(v_,[t].concat(r));return DP(a),new zP(e,null,a)}if(!(e instanceof BP||e instanceof zP))throw new $w(Jw.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(v_.fromString.apply(v_,[t].concat(r)));return DP(o),new zP(e.firestore,null,o)}function KP(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=cs(e),1===arguments.length&&(t=s_.V()),AP("doc","path",t),e instanceof jP){var a=v_.fromString.apply(v_,[t].concat(r));return PP(a),new BP(e,null,new g_(a))}if(!(e instanceof BP||e instanceof zP))throw new $w(Jw.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(v_.fromString.apply(v_,[t].concat(r)));return PP(o),new BP(e.firestore,e instanceof zP?e.converter:null,new g_(o))}function HP(e,t){return e=cs(e),t=cs(t),(e instanceof BP||e instanceof zP)&&(t instanceof BP||t instanceof zP)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function WP(e,t){return e=cs(e),t=cs(t),e instanceof VP&&t instanceof VP&&e.firestore===t.firestore&&rS(e._query,t._query)&&e.converter===t.converter}var GP=function(){function e(){var t=this;l(this,e),this.Ua=Promise.resolve(),this.Wa=[],this.Ga=!1,this.za=[],this.ja=null,this.Ha=!1,this.Ja=!1,this.Ya=[],this.Qo=new UN(this,"async_queue_retry"),this.Za=function(){var e=FN();e&&qw("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Qo.Oo()};var n=FN();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Za)}return p(e,[{key:"isShuttingDown",get:function(){return this.Ga}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Xa(),this.eu(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ga){this.Ga=!0,this.Ja=e||!1;var t=FN();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Za)}}},{key:"enqueue",value:function(e){var t=this;if(this.Xa(),this.Ga)return new Promise((function(){}));var n=new Xw;return this.eu((function(){return t.Ga&&t.Ja?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Wa.push(e),t.tu()}))}},{key:"tu",value:function(){var e=fs(_i().mark((function e(){var t=this;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Wa.length){e.next=14;break}return e.prev=1,e.next=4,this.Wa[0]();case 4:this.Wa.shift(),this.Qo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),F_(e.t0)){e.next=12;break}throw e.t0;case 12:qw("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Wa.length>0&&this.Qo.Mo((function(){return t.tu()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"eu",value:function(e){var t=this,n=this.Ua.then((function(){return t.Ha=!0,e().catch((function(e){t.ja=e,t.Ha=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Kw("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Ha=!1,e}))}));return this.Ua=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Xa(),this.Ya.indexOf(e)>-1&&(t=0);var i=DA.createAndSchedule(this,e,t,n,(function(e){return r.nu(e)}));return this.za.push(i),i}},{key:"Xa",value:function(){this.ja&&Gw()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ru",value:function(){var e=fs(_i().mark((function e(){var t;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Ua,e.next=3,t;case 3:if(t!==this.Ua){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"iu",value:function(e){var t,n=T(this.za);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"su",value:function(e){var t=this;return this.ru().then((function(){t.za.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=T(t.za);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.ru()}))}},{key:"ou",value:function(e){this.Ya.push(e)}},{key:"nu",value:function(e){var t=this.za.indexOf(e);this.za.splice(t,1)}}]),e}();function QP(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=T(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var YP=function(){function e(){l(this,e),this._progressObserver={},this._taskCompletionResolver=new Xw,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return p(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),JP=function(e){m(n,e);var t=b(n);function n(e,r,i,a){var o;return l(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new GP,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return p(n,[{key:"_terminate",value:function(){return this._firestoreClient||XP(this),this._firestoreClient.terminate()}}]),n}(jP);function $P(e){return e._firestoreClient||XP(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function XP(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new zx(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,CP(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new cP(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function ZP(e,t,n){var r=new Xw;return e.asyncQueue.enqueue(fs(_i().mark((function i(){var a;return _i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,lP(e,n);case 3:return i.next=5,hP(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),pP(a=i.t0)){i.next=13;break}throw a;case 13:Hw("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function eD(e){return function(e){var t=new Xw;return e.asyncQueue.enqueueAndForget(fs(_i().mark((function n(){return _i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=wR,n.next=3,_P(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}($P(e=LP(e,JP)))}function tD(e){return function(e){return e.asyncQueue.enqueue(fs(_i().mark((function t(){var n,r;return _i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,kP(e);case 2:return n=t.sent,t.next=5,wP(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Yw(e);return t.p_.delete(0),WN(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}($P(e=LP(e,JP)))}function nD(e){return function(e){return e.asyncQueue.enqueue(fs(_i().mark((function t(){var n,r;return _i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,kP(e);case 2:return n=t.sent,t.next=5,wP(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=fs(_i().mark((function e(t){var n;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Yw(t)).p_.add(0),e.next=4,QN(n);case 4:n.S_.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}($P(e=LP(e,JP)))}function rD(e,t){var n=$P(e=LP(e,JP)),r=new YP;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new oP(e,t)}(function(e,t){if(e instanceof Uint8Array)return iP(e,t);if(e instanceof ArrayBuffer)return iP(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?hI().encode(e):e),t)}(n,jN(t));e.asyncQueue.enqueueAndForget(fs(_i().mark((function t(){return _i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=ZR,t.next=3,_P(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function iD(e,t){return function(e,t){return e.asyncQueue.enqueue(fs(_i().mark((function n(){return _i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Yw(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Qr.getNamedQuery(e,t)}))},n.next=3,bP(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}($P(e=LP(e,JP)),t).then((function(t){return t?new VP(e,null,t.query):null}))}function aD(e){if(e._initialized||e._terminated)throw new $w(Jw.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var oD=function(){function e(t){l(this,e),this._byteString=t}return p(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Ox.fromBase64String(t))}catch(t){throw new $w(Jw.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Ox.fromUint8Array(t))}}]),e}(),uD=function(){function e(){l(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new $w(Jw.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new y_(n)}return p(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var sD=p((function e(t){l(this,e),this._methodName=t})),cD=function(){function e(t,n){if(l(this,e),!isFinite(t)||t<-90||t>90)throw new $w(Jw.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new $w(Jw.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return p(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return c_(this._lat,e._lat)||c_(this._long,e._long)}}]),e}(),lD=/^__.*__$/,fD=function(){function e(t,n,r){l(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return p(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new JS(e,this.data,this.fieldMask,t,this.fieldTransforms):new YS(e,this.data,t,this.fieldTransforms)}}]),e}(),hD=function(){function e(t,n,r){l(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return p(e,[{key:"toMutation",value:function(e,t){return new JS(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function dD(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Gw()}}var pD=function(){function e(t,n,r,i,a,o){l(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this._u(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return p(e,[{key:"path",get:function(){return this.settings.path}},{key:"au",get:function(){return this.settings.au}},{key:"uu",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"cu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.uu({path:n,lu:!1});return r.hu(e),r}},{key:"Pu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.uu({path:n,lu:!1});return r._u(),r}},{key:"Iu",value:function(e){return this.uu({path:void 0,lu:!0})}},{key:"Tu",value:function(e){return OD(e,this.settings.methodName,this.settings.Eu||!1,this.path,this.settings.du)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"_u",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.hu(this.path.get(e))}},{key:"hu",value:function(e){if(0===e.length)throw this.Tu("Document fields must not be empty");if(dD(this.au)&&lD.test(e))throw this.Tu('Document fields cannot begin and end with "__"')}}]),e}(),vD=function(){function e(t,n,r){l(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||jN(t)}return p(e,[{key:"Au",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new pD({au:e,methodName:t,du:n,path:y_.emptyPath(),lu:!1,Eu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function mD(e){var t=e._freezeSettings(),n=jN(e._databaseId);return new vD(e._databaseId,!!t.ignoreUndefinedProperties,n)}function yD(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.Au(a.merge||a.mergeFields?2:0,t,n,i);AD("Data must be an object, but it was:",o,r);var u,s,c=CD(r,o);if(a.merge)u=new Px(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=T(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=RD(t,l.value,n);if(!o.contains(d))throw new $w(Jw.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));LD(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new Px(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new fD(new fE(c),u,s)}var gD=function(e){m(n,e);var t=b(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.au)throw 1===e.au?e.Tu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Tu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(sD);function kD(e,t,n){return new pD({au:3,du:t.settings.du,methodName:e._methodName,lu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var bD=function(e){m(n,e);var t=b(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"_toFieldTransform",value:function(e){return new US(e.path,new RS)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(sD),wD=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e)).Ru=r,i}return p(n,[{key:"_toFieldTransform",value:function(e){var t=kD(this,e,!0),n=this.Ru.map((function(e){return TD(e,t)})),r=new PS(n);return new US(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(sD),_D=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e)).Ru=r,i}return p(n,[{key:"_toFieldTransform",value:function(e){var t=kD(this,e,!0),n=this.Ru.map((function(e){return TD(e,t)})),r=new OS(n);return new US(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(sD),xD=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e)).Vu=r,i}return p(n,[{key:"_toFieldTransform",value:function(e){var t=new MS(e.serializer,IS(e.serializer,this.Vu));return new US(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(sD);function ED(e,t,n,r){var i=e.Au(1,t,n);AD("Data must be an object, but it was:",i,r);var a=[],o=fE.empty();Ex(r,(function(e,r){var u=DD(t,e,n);r=cs(r);var s=i.Pu(u);if(r instanceof gD)a.push(u);else{var c=TD(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Px(a);return new hD(o,u,i.fieldTransforms)}function SD(e,t,n,r,i,a){var o=e.Au(1,t,n),u=[RD(t,r,n)],s=[i];if(a.length%2!=0)throw new $w(Jw.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(RD(t,a[c])),s.push(a[c+1]);for(var l=[],f=fE.empty(),h=u.length-1;h>=0;--h)if(!LD(l,u[h])){var d=u[h],p=s[h];p=cs(p);var v=o.Pu(d);if(p instanceof gD)l.push(d);else{var m=TD(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new Px(l);return new hD(f,y,o.fieldTransforms)}function ID(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return TD(n,e.Au(r?4:3,t))}function TD(e,t){if(ND(e=cs(e)))return AD("Unsupported field value:",t,e),CD(e,t);if(e instanceof sD)return function(e,t){if(!dD(t.au))throw t.Tu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Tu("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.lu&&4!==t.au)throw t.Tu("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=T(e);try{for(a.s();!(n=a.n()).done;){var o=TD(n.value,t.Iu(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=cs(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return IS(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=h_.fromDate(e);return{timestampValue:PI(t.serializer,n)}}if(e instanceof h_){var r=new h_(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:PI(t.serializer,r)}}if(e instanceof cD)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof oD)return{bytesValue:DI(t.serializer,e._byteString)};if(e instanceof BP){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.Tu("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:MI(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Tu("Unsupported field value: ".concat(OP(e)))}(e,t)}function CD(e,t){var n={};return Sx(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ex(e,(function(e,r){var i=TD(r,t.cu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function ND(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof h_||e instanceof cD||e instanceof oD||e instanceof BP||e instanceof sD)}function AD(e,t,n){if(!ND(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=OP(n);throw"an object"===r?t.Tu(e+" a custom object"):t.Tu(e+" "+r)}}function RD(e,t,n){if((t=cs(t))instanceof uD)return t._internalPath;if("string"==typeof t)return DD(e,t);throw OD("Field path arguments must be of type string or ",e,!1,void 0,n)}var PD=new RegExp("[~\\*/\\[\\]]");function DD(e,t,n){if(t.search(PD)>=0)throw OD("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return w(uD,c(t.split(".")))._internalPath}catch(Ny){throw OD("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function OD(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new $w(Jw.INVALID_ARGUMENT,u+e+s)}function LD(e,t){return e.some((function(e){return e.isEqual(t)}))}var MD=function(){function e(t,n,r,i,a){l(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return p(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new BP(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new FD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(jD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),FD=function(e){m(n,e);var t=b(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"data",value:function(){return Hn(y(n.prototype),"data",this).call(this)}}]),n}(MD);function jD(e,t){return"string"==typeof t?DD(e,t):t instanceof uD?t._internalPath:t._delegate._internalPath}function UD(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new $w(Jw.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var VD=p((function e(){l(this,e)})),BD=function(e){m(n,e);var t=b(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n)}(VD);function zD(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof VD&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof KD})).length,n=e.filter((function(e){return e instanceof qD})).length;if(t>1||t>0&&n>0)throw new $w(Jw.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=T(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var qD=function(e){m(n,e);var t=b(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return p(n,[{key:"_apply",value:function(e){var t=this._parse(e);return nO(e._query,t),new VP(e.firestore,e.converter,tS(e._query,t))}},{key:"_parse",value:function(e){var t=mD(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new $w(Jw.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){tO(o,a);var s,c=[],l=T(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(eO(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=eO(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||tO(o,a),u=ID(n,t,o,"in"===a||"not-in"===a);return bE.create(i,a,u)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(BD);var KD=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return p(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:wE.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=T(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;nO(r,a),r=tS(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new VP(e.firestore,e.converter,tS(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(VD);var HD=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return p(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new $w(Jw.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new $w(Jw.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new yE(t,n);return function(e,t){if(null===JE(e)){var n=$E(e);null!==n&&rO(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new VP(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new WE(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(BD);var WD=function(e){m(n,e);var t=b(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return p(n,[{key:"_apply",value:function(e){return new VP(e.firestore,e.converter,nS(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(BD);var GD=function(e){m(n,e);var t=b(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return p(n,[{key:"_apply",value:function(e){var t=ZD(e,this.type,this._docOrFields,this._inclusive);return new VP(e.firestore,e.converter,function(e,t){return new WE(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(BD);function QD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return GD._create("startAt",t,!0)}function YD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return GD._create("startAfter",t,!1)}var JD=function(e){m(n,e);var t=b(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return p(n,[{key:"_apply",value:function(e){var t=ZD(e,this.type,this._docOrFields,this._inclusive);return new VP(e.firestore,e.converter,function(e,t){return new WE(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(BD);function $D(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return JD._create("endBefore",t,!1)}function XD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return JD._create("endAt",t,!0)}function ZD(e,t,n,r){if(n[0]=cs(n[0]),n[0]instanceof MD)return function(e,t,n,r,i){if(!r)throw new $w(Jw.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=T(ZE(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Zx(t,r.key));else{var c=r.data.field(s.field);if(Ux(c))throw new $w(Jw.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new $w(Jw.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new pE(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=mD(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new $w(Jw.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new $w(Jw.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!XE(e)&&-1!==c.indexOf("/"))throw new $w(Jw.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(v_.fromString(c));if(!g_.isDocumentKey(l))throw new $w(Jw.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new g_(l);u.push(Zx(t,f))}else{var h=ID(n,r,c);u.push(h)}}return new pE(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function eO(e,t,n){if("string"==typeof(n=cs(n))){if(""===n)throw new $w(Jw.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!XE(t)&&-1!==n.indexOf("/"))throw new $w(Jw.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(v_.fromString(n));if(!g_.isDocumentKey(r))throw new $w(Jw.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Zx(e,new g_(r))}if(n instanceof BP)return Zx(e,n._key);throw new $w(Jw.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(OP(n),"."))}function tO(e,t){if(!Array.isArray(e)||0===e.length)throw new $w(Jw.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function nO(e,t){if(t.isInequality()){var n=$E(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new $w(Jw.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=JE(e);null!==i&&rO(e,r,i)}var a=function(e,t){var n,r=T(e);try{for(r.s();!(n=r.n()).done;){var i,a=T(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new $w(Jw.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new $w(Jw.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function rO(e,t,n){if(!n.isEqual(t))throw new $w(Jw.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var iO=function(){function e(){l(this,e)}return p(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Wx(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fx(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(jx(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Gw()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return Ex(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new cD(Fx(e.latitude),Fx(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Vx(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Bx(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Mx(e);return new h_(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=v_.fromString(e);Qw(oT(n));var r=new qx(n.get(1),n.get(3)),i=new g_(n.popFirst(5));return r.isEqual(t)||Kw("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function aO(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var oO=function(e){m(n,e);var t=b(n);function n(e){var r;return l(this,n),(r=t.call(this)).firestore=e,r}return p(n,[{key:"convertBytes",value:function(e){return new oD(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new BP(this.firestore,null,t)}}]),n}(iO);var uO=function(){function e(t,n){l(this,e),this.hasPendingWrites=t,this.fromCache=n}return p(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),sO=function(e){m(n,e);var t=b(n);function n(e,r,i,a,o,u){var s;return l(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return p(n,[{key:"exists",value:function(){return Hn(y(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new cO(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(jD("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(MD),cO=function(e){m(n,e);var t=b(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Hn(y(n.prototype),"data",this).call(this,e)}}]),n}(sO),lO=function(){function e(t,n,r,i){l(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new uO(i.hasPendingWrites,i.fromCache),this.query=r}return p(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new cO(n._firestore,n._userDataWriter,r.key,r,new uO(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new $w(Jw.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new cO(e._firestore,e._userDataWriter,t.doc.key,t.doc,new uO(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new cO(e._firestore,e._userDataWriter,t.doc.key,t.doc,new uO(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:fO(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function fO(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Gw()}}function hO(e,t){return e instanceof sO&&t instanceof sO?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof lO&&t instanceof lO&&e._firestore===t._firestore&&WP(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var dO=function(e){m(n,e);var t=b(n);function n(e){var r;return l(this,n),(r=t.call(this)).firestore=e,r}return p(n,[{key:"convertBytes",value:function(e){return new oD(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new BP(this.firestore,null,t)}}]),n}(iO);function pO(e){e=LP(e,BP);var t=LP(e.firestore,JP),n=$P(t),r=new dO(t);return function(e,t){var n=new Xw;return e.asyncQueue.enqueueAndForget(fs(_i().mark((function r(){return _i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=fs(_i().mark((function e(t,n,r){var i,a;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Yw(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new $w(Jw.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=OA(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,bP(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new sO(t,r,e._key,n,new uO(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function vO(e){e=LP(e,VP);var t=LP(e.firestore,JP),n=$P(t),r=new dO(t);return UD(e._query),TP(n,e._query).then((function(n){return new lO(t,r,e,n)}))}function mO(e){e=LP(e,VP);var t=LP(e.firestore,JP),n=$P(t),r=new dO(t);return function(e,t){var n=new Xw;return e.asyncQueue.enqueueAndForget(fs(_i().mark((function r(){return _i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=fs(_i().mark((function e(t,n,r){var i,a,o,u,s;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,lN(t,n,!0);case 3:i=e.sent,a=new eR(n,i.ss),o=a.ia(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=OA(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,bP(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new lO(t,r,e,n)}))}function yO(e){e=LP(e,VP);var t=LP(e.firestore,JP),n=$P(t),r=new dO(t);return TP(n,e._query,{source:"server"}).then((function(n){return new lO(t,r,e,n)}))}function gO(e,t,n){e=LP(e,BP);var r=LP(e.firestore,JP),i=aO(e.converter,t,n);return _O(r,[yD(mD(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,BS.none())])}function kO(e,t,n){e=LP(e,BP);for(var r=LP(e.firestore,JP),i=mD(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return _O(r,[("string"==typeof(t=cs(t))||t instanceof uD?SD(i,"updateDoc",e._key,t,n,o):ED(i,"updateDoc",e._key,t)).toMutation(e._key,BS.exists(!0))])}function bO(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=cs(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||QP(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(QP(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof BP)l=LP(e.firestore,JP),f=QE(e._key.path),c={next:function(t){n[s]&&n[s](xO(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=LP(e,VP);l=LP(p.firestore,JP),f=p._query;var v=new dO(l);c={next:function(e){n[s]&&n[s](new lO(l,v,p,e))},error:n[s+1],complete:n[s+2]},UD(e._query)}return function(e,t,n,r){var i=new aP(r),a=new GA(t,i,n);return e.asyncQueue.enqueueAndForget(fs(_i().mark((function t(){return _i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=VA,t.next=3,EP(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.va(),e.asyncQueue.enqueueAndForget(fs(_i().mark((function t(){return _i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=zA,t.next=3,EP(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}($P(l),f,h,c)}function wO(e,t){return function(e,t){var n=new aP(t);return e.asyncQueue.enqueueAndForget(fs(_i().mark((function t(){return _i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Yw(e).x_.add(t),t.next()},t.next=3,EP(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.va(),e.asyncQueue.enqueueAndForget(fs(_i().mark((function t(){return _i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Yw(e).x_.delete(t)},t.next=3,EP(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}($P(e=LP(e,JP)),QP(t)?t:{next:t})}function _O(e,t){return function(e,t){var n=new Xw;return e.asyncQueue.enqueueAndForget(fs(_i().mark((function r(){return _i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=lR,r.next=3,_P(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}($P(e),t)}function xO(e,t,n){var r=n.docs.get(t._key),i=new dO(e);return new sO(e,i,t._key,r,new uO(n.hasPendingWrites,n.fromCache),t.converter)}var EO={maxAttempts:5},SO=function(){function e(t,n){l(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=mD(t)}return p(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=IO(e,this._firestore),i=aO(r.converter,t,n),a=yD(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,BS.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=IO(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=cs(t))||t instanceof uD?SD(this._dataReader,"WriteBatch.update",i._key,t,n,o):ED(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,BS.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=IO(e,this._firestore);return this._mutations=this._mutations.concat(new nI(t._key,BS.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new $w(Jw.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function IO(e,t){if((e=cs(e)).firestore!==t)throw new $w(Jw.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var TO=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r))._firestore=e,i}return p(n,[{key:"get",value:function(e){var t=this,r=IO(e,this._firestore),i=new dO(this._firestore);return Hn(y(n.prototype),"get",this).call(this,e).then((function(e){return new sO(t._firestore,i,r._key,e._document,new uO(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){l(this,e),this._firestore=t,this._transaction=n,this._dataReader=mD(t)}return p(e,[{key:"get",value:function(e){var t=this,n=IO(e,this._firestore),r=new oO(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Gw();var i=e[0];if(i.isFoundDocument())return new MD(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new MD(t._firestore,r,n._key,null,n.converter);throw Gw()}))}},{key:"set",value:function(e,t,n){var r=IO(e,this._firestore),i=aO(r.converter,t,n),a=yD(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=IO(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=cs(t))||t instanceof uD?SD(this._dataReader,"Transaction.update",i._key,t,n,o):ED(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=IO(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function CO(e,t,n){e=LP(e,JP);var r=Object.assign(Object.assign({},EO),n);return function(e){if(e.maxAttempts<1)throw new $w(Jw.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Xw;return e.asyncQueue.enqueueAndForget(fs(_i().mark((function i(){var a;return _i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,xP(e);case 2:a=i.sent,new sP(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}($P(e),(function(n){return t(new TO(e,n))}),r)}function NO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new wD("arrayUnion",t)}function AO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new _D("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Vw=e}(sc),tc(new hs("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new JP(new n_(e.getProvider("auth-internal")),new o_(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new $w(Jw.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qx(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),pc(jw,"4.0.0",e),pc(jw,"4.0.0","esm2017")}();function RO(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new $w("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function PO(){if("undefined"===typeof Uint8Array)throw new $w("unimplemented","Uint8Arrays are not available in this environment.")}function DO(){if("undefined"==typeof atob)throw new $w("unimplemented","Blobs are unavailable in Firestore in this environment.")}var OO=function(){function e(t){l(this,e),this._delegate=t}return p(e,[{key:"toBase64",value:function(){return DO(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return PO(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return DO(),new e(oD.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return PO(),new e(oD.fromUint8Array(t))}}]),e}();function LO(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=T(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var MO=function(){function e(){l(this,e)}return p(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){aD(e=LP(e,JP));var n=$P(e);if(n._uninitializedComponentsProvider)throw new $w(Jw.FAILED_PRECONDITION,"SDK cache is already specified.");Hw("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new rP;return ZP(n,i,new tP(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){aD(e=LP(e,JP));var t=$P(e);if(t._uninitializedComponentsProvider)throw new $w(Jw.FAILED_PRECONDITION,"SDK cache is already specified.");Hw("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new rP;return ZP(t,r,new nP(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new $w(Jw.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Xw;return e._queue.enqueueAndForgetEvenWhileRestricted(fs(_i().mark((function n(){return _i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=fs(_i().mark((function e(t){var n;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O_.v()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,O_.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(YC(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),FO=function(){function e(t,n,r){var i=this;l(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof qx||(this._appCompat=t)}return p(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Hw("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};UP(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return tD(this._delegate)}},{key:"disableNetwork",value:function(){return nD(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&RP("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return eD(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return wO(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new $w("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new $O(this,qP(this._delegate,e))}catch(t){throw qO(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new zO(this,KP(this._delegate,e))}catch(t){throw qO(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new QO(this,function(e,t){if(e=LP(e,jP),AP("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new $w(Jw.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new VP(e,null,function(e){return new WE(v_.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw qO(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return CO(this._delegate,(function(n){return e(new UO(t,n))}))}},{key:"batch",value:function(){var e=this;return $P(this._delegate),new VO(new SO(this._delegate,(function(t){return _O(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return rD(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return iD(this._delegate,e).then((function(e){return e?new QO(t,e):null}))}}]),e}(),jO=function(e){m(n,e);var t=b(n);function n(e){var r;return l(this,n),(r=t.call(this)).firestore=e,r}return p(n,[{key:"convertBytes",value:function(e){return new OO(new oD(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return zO.forKey(t,this.firestore,null)}}]),n}(iO);var UO=function(){function e(t,n){l(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new jO(t)}return p(e,[{key:"get",value:function(e){var t=this,n=XO(e);return this._delegate.get(n).then((function(e){return new WO(t._firestore,new sO(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=XO(e);return n?(RO("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=XO(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=XO(e);return this._delegate.delete(t),this}}]),e}(),VO=function(){function e(t){l(this,e),this._delegate=t}return p(e,[{key:"set",value:function(e,t,n){var r=XO(e);return n?(RO("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=XO(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=XO(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),BO=function(){function e(t,n,r){l(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return p(e,[{key:"fromFirestore",value:function(e,t){var n=new cO(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new GO(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new jO(t),n),i.set(n,a)),a}}]),e}();BO.INSTANCES=new WeakMap;var zO=function(){function e(t,n){l(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new jO(t)}return p(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new $O(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new $O(this.firestore,qP(this._delegate,e))}catch(t){throw qO(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=cs(e))instanceof BP&&HP(this._delegate,e)}},{key:"set",value:function(e,t){t=RO("DocumentReference.set",t);try{return t?gO(this._delegate,e,t):gO(this._delegate,e)}catch(n){throw qO(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?kO(this._delegate,e):kO.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw qO(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return _O(LP((e=this._delegate).firestore,JP),[new nI(e._key,BS.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=KO(n),a=HO(n,(function(t){return new WO(e.firestore,new sO(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return bO(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?pO(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=LP(e,BP);var t=LP(e.firestore,JP);return IP($P(t),e._key,{source:"server"}).then((function(n){return xO(t,e,n)}))}(this._delegate):function(e){e=LP(e,BP);var t=LP(e.firestore,JP);return IP($P(t),e._key).then((function(n){return xO(t,e,n)}))}(this._delegate)).then((function(e){return new WO(t.firestore,new sO(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(BO.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new $w("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new BP(n._delegate,r,new g_(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new BP(n._delegate,r,t))}}]),e}();function qO(e,t,n){return e.message=e.message.replace(t,n),e}function KO(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!LO(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function HO(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=LO(e[0])?e[0]:LO(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var WO=function(){function e(t,n){l(this,e),this._firestore=t,this._delegate=n}return p(e,[{key:"ref",get:function(){return new zO(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return hO(this._delegate,e._delegate)}}]),e}(),GO=function(e){m(n,e);var t=b(n);function n(){return l(this,n),t.apply(this,arguments)}return p(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||Gw(),t}}]),n}(WO),QO=function(){function e(t,n){l(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new jO(t)}return p(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,zD(this._delegate,function(e,t,n){var r=t,i=jD("where",e);return qD._create(i,r,n)}(t,n,r)))}catch(i){throw qO(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,zD(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=jD("orderBy",e);return HD._create(n,t)}(t,n)))}catch(r){throw qO(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,zD(this._delegate,(MP("limit",n=t),WD._create("limit",n,"F"))))}catch(n){throw qO(n,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,zD(this._delegate,(MP("limitToLast",n=t),WD._create("limitToLast",n,"L"))))}catch(n){throw qO(n,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,zD(this._delegate,QD.apply(void 0,arguments)))}catch(t){throw qO(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,zD(this._delegate,YD.apply(void 0,arguments)))}catch(t){throw qO(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,zD(this._delegate,$D.apply(void 0,arguments)))}catch(t){throw qO(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,zD(this._delegate,XD.apply(void 0,arguments)))}catch(t){throw qO(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return WP(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?mO(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?yO(this._delegate):vO(this._delegate)).then((function(e){return new JO(t.firestore,new lO(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=KO(n),a=HO(n,(function(t){return new JO(e.firestore,new lO(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return bO(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(BO.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),YO=function(){function e(t,n){l(this,e),this._firestore=t,this._delegate=n}return p(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new GO(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),JO=function(){function e(t,n){l(this,e),this._firestore=t,this._delegate=n}return p(e,[{key:"query",get:function(){return new QO(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new GO(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new YO(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new GO(n._firestore,r))}))}},{key:"isEqual",value:function(e){return hO(this._delegate,e._delegate)}}]),e}(),$O=function(e){m(n,e);var t=b(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return p(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new zO(this.firestore,e):null}},{key:"doc",value:function(e){try{return new zO(this.firestore,void 0===e?KP(this._delegate):KP(this._delegate,e))}catch(t){throw qO(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=LP(e.firestore,JP),r=KP(e),i=aO(e.converter,t);return _O(n,[yD(mD(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,BS.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new zO(t.firestore,e)}))}},{key:"isEqual",value:function(e){return HP(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(BO.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(QO);function XO(e){return LP(e,BP)}var ZO=function(){function e(){l(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=w(uD,n)}return p(e,[{key:"isEqual",value:function(e){return(e=cs(e))instanceof uD&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(y_.keyField().canonicalString())}}]),e}(),eL=function(){function e(t){l(this,e),this._delegate=t}return p(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new bD("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new gD("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=NO.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=AO.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new xD("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),tL={Firestore:FO,GeoPoint:cD,Timestamp:h_,Blob:OO,Transaction:UO,WriteBatch:VO,DocumentReference:zO,DocumentSnapshot:WO,Query:QO,QueryDocumentSnapshot:GO,QuerySnapshot:JO,CollectionReference:$O,FieldPath:ZO,FieldValue:eL,setLogLevel:function(e){var t;t=e,Bw.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new hs("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},tL)))}(e,(function(e,t){return new FO(e,t,new MO)})),e.registerVersion("@firebase/firestore-compat","0.3.13")}(Vc);Vc.initializeApp({apiKey:"AIzaSyArFanWkGGG1M-iInIpU_nsTkVKqzY3JfI",authDomain:"gearbest-challenge.firebaseapp.com",projectId:"gearbest-challenge",storageBucket:"gearbest-challenge.appspot.com",messagingSenderId:"914764071881",appId:"1:914764071881:web:3804421106663bd867de18",measurementId:"G-JRERWFFVHR"}).firestore();var nL=Vc.auth();var rL=function(){var e=S((0,r.useState)(""),2),t=e[0],n=e[1],i=S((0,r.useState)(""),2),a=i[0],o=i[1],u=S((0,r.useState)(!1),2),s=(u[0],u[1]),c=we();return(0,Vn.jsx)("div",{children:(0,Vn.jsxs)("div",{className:"login",children:[(0,Vn.jsxs)("div",{className:"login__container",children:[(0,Vn.jsx)("h1",{children:"Sign-in"}),(0,Vn.jsxs)("form",{children:[(0,Vn.jsx)("h5",{children:"E-mail"}),(0,Vn.jsx)("input",{type:"email",value:t,onChange:function(e){return n(e.target.value)}}),(0,Vn.jsx)("h5",{children:"Password"}),(0,Vn.jsx)("input",{type:"password",value:a,onChange:function(e){return o(e.target.value)}}),(0,Vn.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault(),nL.signInWithEmailAndPassword(t,a).then((function(e){s(!0),c("/")})).catch((function(e){return alert(e.message)}))},className:"login__signInButton",children:"Log In"})]}),(0,Vn.jsx)("p",{children:"By signing-in you agree to the Task Ninja Conditions of Use & Sale. Please see our Privacy Notice, our Cookies Notice and our Interest-Based Ads Notice."}),(0,Vn.jsx)("button",{onClick:function(e){e.preventDefault(),nL.createUserWithEmailAndPassword(t,a).then((function(e){e&&(s(!0),c("/"))})).catch((function(e){return alert(e.message)}))},className:"login__registerButton",children:"Sign Up"})]}),(0,Vn.jsx)(zn,{})]})})};var iL=function(e){var t=e.children,n=!!nL.currentUser;return console.log(n),n?t:(0,Vn.jsx)(Me,{to:"/login",replace:!0})};var aL=function(){var e=S((0,r.useState)(""),2),t=e[0],n=e[1],i=S((0,r.useState)(""),2),a=i[0],o=i[1],u=S((0,r.useState)(!1),2),s=(u[0],u[1]),c=we();return(0,Vn.jsx)("div",{children:(0,Vn.jsxs)("div",{className:"login",children:[(0,Vn.jsxs)("div",{className:"login__container",children:[(0,Vn.jsx)("h1",{children:"Sign-in"}),(0,Vn.jsxs)("form",{children:[(0,Vn.jsx)("h5",{children:"E-mail"}),(0,Vn.jsx)("input",{type:"email",value:t,onChange:function(e){return n(e.target.value)}}),(0,Vn.jsx)("h5",{children:"Password"}),(0,Vn.jsx)("input",{type:"password",value:a,onChange:function(e){return o(e.target.value)}}),(0,Vn.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault(),nL.signInWithEmailAndPassword(t,a).then((function(e){s(!0),c("/admin")})).catch((function(e){return alert(e.message)}))},className:"login__signInButton",children:"Log In"})]}),(0,Vn.jsx)("p",{children:"By logging-in you agree to the Task Ninja Conditions of Use & Sale. Please see our Privacy Notice, our Cookies Notice and our Interest-Based Ads Notice. Admin Email :- Tau123@gmail.com Admin Password :- 123456789"})]}),(0,Vn.jsx)(zn,{})]})})},oL=function(){var e=we(),t=_e().id,n=S((0,r.useState)(""),2),i=n[0],a=n[1],o=S((0,r.useState)(""),2),u=o[0],s=o[1],c=S((0,r.useState)(""),2),l=c[0],f=c[1],h=S((0,r.useState)(""),2),d=h[0],p=h[1],v=S((0,r.useState)(""),2),m=v[0],y=v[1];(0,r.useEffect)((function(){Cn.get("http://localhost:".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.PORT,"/todos/").concat(t)).then((function(e){var t=e.data;a(t.title),s(t.description),f(t.dueDate),p(t.status),y(t.user)})).catch((function(e){console.error(e)}))}),[t]);return(0,Vn.jsxs)("div",{children:[(0,Vn.jsx)(Bn,{}),(0,Vn.jsx)("div",{className:"container formContainer mt-20",children:(0,Vn.jsx)("div",{className:"row d-flex justify-content-center",children:(0,Vn.jsxs)("div",{className:"col-8 border formDiv",children:[(0,Vn.jsx)("h1",{className:"text-center  text-success text-decoration-underline",children:"Create a Task"}),(0,Vn.jsxs)("form",{onSubmit:function(n){n.preventDefault();var r={title:i,description:u,dueDate:l,status:d,user:m};Cn.patch("http://localhost:".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.PORT,"/todos/").concat(t),r).then((function(){e("/tasks")})).catch((function(e){console.error(e)}))},children:[(0,Vn.jsxs)("div",{className:"mb-3",children:[(0,Vn.jsx)("label",{htmlFor:"title",className:"form-label",children:"Title"}),(0,Vn.jsx)("input",{type:"text",className:"form-control",id:"title",value:i,onChange:function(e){return a(e.target.value)}})]}),(0,Vn.jsxs)("div",{className:"mb-3",children:[(0,Vn.jsx)("label",{htmlFor:"description",className:"form-label",children:"Description"}),(0,Vn.jsx)("textarea",{className:"form-control",id:"description",rows:"1",value:u,onChange:function(e){return s(e.target.value)}})]}),(0,Vn.jsxs)("div",{className:"mb-3",children:[(0,Vn.jsx)("label",{htmlFor:"dueDate",className:"form-label",children:"Due Date"}),(0,Vn.jsx)("input",{type:"date",className:"form-control",id:"dueDate",value:l,onChange:function(e){return f(e.target.value)}})]}),(0,Vn.jsxs)("div",{className:"mb-3",children:[(0,Vn.jsx)("label",{htmlFor:"status",className:"form-label",children:"Status"}),(0,Vn.jsxs)("select",{className:"form-select",id:"status",value:d,onChange:function(e){return p(e.target.value)},children:[(0,Vn.jsx)("option",{value:"",children:"Select Status"}),(0,Vn.jsx)("option",{value:"Pending",children:"Pending"}),(0,Vn.jsx)("option",{value:"In Progress",children:"In Progress"}),(0,Vn.jsx)("option",{value:"Completed",children:"Completed"})]})]}),(0,Vn.jsxs)("div",{className:"mb-3",children:[(0,Vn.jsx)("label",{htmlFor:"user",className:"form-label",children:"User"}),(0,Vn.jsxs)("select",{className:"form-select",id:"user",value:m,onChange:function(e){return y(e.target.value)},children:[(0,Vn.jsx)("option",{value:"",children:"Select User"}),(0,Vn.jsx)("option",{value:"User 1",children:"User 1"}),(0,Vn.jsx)("option",{value:"User 2",children:"User 2"}),(0,Vn.jsx)("option",{value:"User 3",children:"User 3"})]})]}),(0,Vn.jsx)("div",{className:"col-12 d-grid",children:(0,Vn.jsx)("button",{type:"submit",className:"btn btn-success",id:"formBtn",children:"Update Task"})})]})]})})}),(0,Vn.jsx)(zn,{})]})};var uL=function(){var e=we(),t=_e().id,n=S((0,r.useState)(""),2),i=n[0],a=n[1],o=S((0,r.useState)(""),2),u=o[0],s=o[1],c=S((0,r.useState)(""),2),l=c[0],f=c[1],h=S((0,r.useState)(""),2),d=h[0],p=h[1],v=S((0,r.useState)(""),2),m=v[0],y=v[1];return(0,r.useEffect)((function(){Cn.get("http://localhost:".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.PORT,"/todos/").concat(t)).then((function(e){var t=e.data;a(t.title),s(t.description),f(t.dueDate),p(t.status),y(t.user)})).catch((function(e){console.error(e)}))}),[t]),(0,Vn.jsxs)("div",{children:[(0,Vn.jsx)(Bn,{}),(0,Vn.jsx)("div",{className:"container formContainer mt-20",children:(0,Vn.jsx)("div",{className:"row d-flex justify-content-center",children:(0,Vn.jsxs)("div",{className:"col-8 border formDiv",children:[(0,Vn.jsx)("h1",{className:"text-center  text-success text-decoration-underline",children:"Create a Task"}),(0,Vn.jsxs)("form",{onSubmit:function(n){n.preventDefault();var r={title:i,description:u,dueDate:l,status:d,user:m};Cn.patch("http://localhost:".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.PORT,"/todos/").concat(t),r).then((function(){e("/admin")})).catch((function(e){console.error(e)}))},children:[(0,Vn.jsxs)("div",{className:"mb-3",children:[(0,Vn.jsx)("label",{htmlFor:"title",className:"form-label",children:"Title"}),(0,Vn.jsx)("input",{type:"text",className:"form-control",id:"title",value:i,onChange:function(e){return a(e.target.value)}})]}),(0,Vn.jsxs)("div",{className:"mb-3",children:[(0,Vn.jsx)("label",{htmlFor:"description",className:"form-label",children:"Description"}),(0,Vn.jsx)("textarea",{className:"form-control",id:"description",rows:"1",value:u,onChange:function(e){return s(e.target.value)}})]}),(0,Vn.jsxs)("div",{className:"mb-3",children:[(0,Vn.jsx)("label",{htmlFor:"dueDate",className:"form-label",children:"Due Date"}),(0,Vn.jsx)("input",{type:"date",className:"form-control",id:"dueDate",value:l,onChange:function(e){return f(e.target.value)}})]}),(0,Vn.jsxs)("div",{className:"mb-3",children:[(0,Vn.jsx)("label",{htmlFor:"status",className:"form-label",children:"Status"}),(0,Vn.jsxs)("select",{className:"form-select",id:"status",value:d,onChange:function(e){return p(e.target.value)},children:[(0,Vn.jsx)("option",{value:"",children:"Select Status"}),(0,Vn.jsx)("option",{value:"Pending",children:"Pending"}),(0,Vn.jsx)("option",{value:"In Progress",children:"In Progress"}),(0,Vn.jsx)("option",{value:"Completed",children:"Completed"})]})]}),(0,Vn.jsxs)("div",{className:"mb-3",children:[(0,Vn.jsx)("label",{htmlFor:"user",className:"form-label",children:"User"}),(0,Vn.jsxs)("select",{className:"form-select",id:"user",value:m,onChange:function(e){return y(e.target.value)},children:[(0,Vn.jsx)("option",{value:"",children:"Select User"}),(0,Vn.jsx)("option",{value:"User 1",children:"User 1"}),(0,Vn.jsx)("option",{value:"User 2",children:"User 2"}),(0,Vn.jsx)("option",{value:"User 3",children:"User 3"})]})]}),(0,Vn.jsx)("div",{className:"col-12 d-grid",children:(0,Vn.jsx)("button",{type:"submit",className:"btn btn-success",id:"formBtn",children:"Update Task"})})]})]})})}),(0,Vn.jsx)(zn,{})]})},sL=function(e){var t=e.children,n=!!nL.currentUser;return console.log(n),n?t:(0,Vn.jsx)(Me,{to:"/AdminLogin",replace:!0})};var cL=function(){return(0,Vn.jsxs)(Ue,{children:[(0,Vn.jsx)(Fe,{path:"/",element:(0,Vn.jsx)(iL,{children:(0,Vn.jsx)(qn,{})})}),(0,Vn.jsx)(Fe,{path:"/tasks",element:(0,Vn.jsx)(iL,{children:(0,Vn.jsx)(Kn,{})})}),(0,Vn.jsx)(Fe,{path:"/admin",element:(0,Vn.jsx)(sL,{children:(0,Vn.jsx)(Du,{})})}),(0,Vn.jsx)(Fe,{path:"/admin/:id",element:(0,Vn.jsx)(iL,{children:(0,Vn.jsx)(uL,{})})}),(0,Vn.jsx)(Fe,{path:"/edit/:id",element:(0,Vn.jsx)(iL,{children:(0,Vn.jsx)(oL,{})})}),(0,Vn.jsx)(Fe,{path:"/login",element:(0,Vn.jsx)(rL,{})}),(0,Vn.jsx)(Fe,{path:"/signup",element:(0,Vn.jsx)(rL,{})}),(0,Vn.jsx)(Fe,{path:"/adminlogin",element:(0,Vn.jsx)(aL,{})})]})};var lL=function(){return(0,Vn.jsx)("div",{className:"App",children:(0,Vn.jsx)(cL,{})})},fL=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};a.createRoot(document.getElementById("root")).render((0,Vn.jsx)(r.StrictMode,{children:(0,Vn.jsx)(On,{children:(0,Vn.jsx)(lL,{})})})),fL()}()}();
//# sourceMappingURL=main.ff4058fc.js.map